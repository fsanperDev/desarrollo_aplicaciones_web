
<!-- saved from url=(0091)https://educacionadistancia.juntadeandalucia.es/cursos/blocks/recopila/recopila.php?id=6198 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script src="./PROG_T7_files/common.js.descarga" type="text/javascript"></script>
<script src="./PROG_T7_files/APIWrapper.js.descarga" type="text/javascript"></script>
<script src="./PROG_T7_files/SCOFunctions.js.descarga" type="text/javascript"></script>
<link href="./PROG_T7_files/base.css" type="text/css" rel="stylesheet">
<link href="./PROG_T7_files/content.css" type="text/css" rel="stylesheet">
</head>
<body>
<div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
Almacenando datos.</h1></div>
<div class="CasopracticofpdIdevice" id="id0">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta0_66" class="block" style="display:block;position:relative"><p><img alt="Foto de Ada mirando al frente." class="elemento_izquierda" src="./PROG_T7_files/CASO_PERSONAJES_24.png" title="Foto de Ada." height="200" width="140"></p>
<p><strong>Ada</strong> está repasando los requisitos de la aplicación informática que están desarrollando para la clínica veterinaria.</p>
<p>En particular, ahora mismo se está centrando en estudiar las necesidades respecto al almacenamiento de datos. <strong>Ada</strong> piensa que hay ciertas partes de la aplicación que no necesitan una base de datos para guardar los datos, y sería suficiente con emplear ficheros. Por ejemplo, para guardar datos de configuración de la aplicación.</p>
<p>Tras repasar, se reúne con <strong>María</strong> y <strong>Juan</strong> para planificar adecuadamente el tema de los ficheros que van a usar en la aplicación, ya que es un asunto muy importante, que no deben dejar aparcado por más tiempo.</p>
<p>Precisamente <strong>Antonio</strong>, que está matriculado y cursando el módulo de Programación, está repasando para el examen que tiene la semana que viene. Uno de los temas que le "cae" es precisamente el de almacenamiento de información en ficheros.</p></div></div>
</div>
</div>
<div class="DestacadofpdIdevice" id="id68">
<div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta68_70" class="block" style="display:block;position:relative"><div align="center"><span style="font-size: large;"><strong><img src="./PROG_T7_files/Junta_Andalucia3.jpg" alt="Logotipo de la Junta de Andalucía." title="Logotipo de la Junta de Andalucía."><img src="./PROG_T7_files/by-nc-sa.eu_petit.png" alt="Derechos de los materiales." title="Derechos de los materiales." style="float: right;"></strong></span>
<div style="text-align: center;" align="right"><span style="font-size: large;"><strong>Materiales actualizados por el profesorado de la Junta de Andalucía.</strong></span></div>
<p style="text-align: center;"><a title="Acceder al Aviso legal para los materiales formativos de FP en línea." href="http://es.creativecommons.org/blog/licencias/">Aviso Legal</a></p>
</div>
<div align="center"><img alt="Logotipo del Ministerio de Educación, Cultura y Deporte. Junto a una banda vertical que representa esquemáticamente la bandera de Europa y otra que representa la bandera de España, aparece el escudo de España, y el texto: Gobierno de España. Ministerio de Educación, Cultura y Deporte." src="./PROG_T7_files/web-web-EducacionCulturaYDeporte-_63px.jpg" style="height: 63px; width: 261px; display: block; margin-left: auto; margin-right: auto;" title="Logotipo del Ministerio de Educación, Cultura y Deporte." height="63" width="261"></div>
<div align="center"><span style="font-size: large;"><strong>Materiales formativos de <acronym title="Formación Profesional.">FP</acronym> <span lang="en">Online</span> propiedad del Ministerio de Educación, Cultura y Deporte.</strong></span></div>
<div align="center"><a title="Acceder al Aviso legal para los materiales formativos de FP Online del MECD." href="http://www.educacion.gob.es/fponline/aviso-legal.html">Aviso Legal</a></div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
1.- Introducción.</h1></div>
<div class="FreeTextfpdIdevice" id="id1">
<div class="iDevice emphasis0">
<div id="ta1_73" class="block" style="display:block;position:relative"><div class="elemento_izquierda">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R02_ficheros.jpg" alt="Carpetas de documentos en archivadores." title="Carpetas de documentos en archivadores." style="float: left;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-nc-sa" title="CC by-nc-sa" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc-sa</span></a> <a title="Stephanie Booth" href="https://www.flickr.com/photos/bunny/203863198/" target="_blank">Stephanie Booth</a></div>
</div>
<p>Cuando desarrollas programas, en la mayoría de ellos los usuarios pueden pedirle a la aplicación que realice cosas y pueda suministrarle datos con los que se quiere hacer algo. Una vez introducidos los datos y las órdenes, se espera que el programa manipule de alguna forma esos datos, para proporcionar una respuesta a lo solicitado.</p>
<p>Además, normalmente interesa que el programa guarde los datos que se le han introducido, de forma que si el programa termina, los datos no se pierdan y puedan ser recuperados en una sesión posterior. La forma más normal de hacer esto es mediante la utilización de ficheros, que se guardarán en un dispositivo de memoria no volátil (normalmente un disco).</p>
<p>Por tanto, sabemos que el almacenamiento en variables o vectores (<span lang="en">arrays</span>) es temporal, los datos se pierden en las variables cuando están fuera de su ámbito o cuando el programa termina. <strong>Las computadoras utilizan ficheros para guardar los datos</strong>, incluso después de que el programa termine su ejecución. Se suele denominar a los datos que se guardan en ficheros <strong>datos persistentes</strong>, porque persisten más allá de la ejecución de la aplicación, es decir, siguen existiendo en algún soporte permanente, para poder ser recuperados en una próxima ejecución. Los ordenadores almacenan los ficheros en unidades de almacenamiento secundario como discos duros, discos ópticos, <abbr title="etcétera.">etc</abbr>. En esta unidad veremos cómo hacer con <span lang="en">Java</span> estas operaciones de crear, actualizar y procesar ficheros.</p>
<p>A todas estas operaciones, que constituyen un flujo de información del programa con el exterior, se les conoce como <strong>Entrada/Salida (<abbr title="Entrada/Salida.">E/S</abbr>).</strong></p>
<p>Distinguimos dos tipos de <abbr title="Entrada/Salida">E/S</abbr>: la <strong><abbr title="Entrada/Salida">E/S</abbr> estándar</strong> que se realiza con el terminal del usuario y <strong>la <strong><abbr title="Entrada/Salida">E/S</abbr> </strong>a través de ficheros</strong>, en la que se trabaja con ficheros de disco.</p>
<p>Todas las operaciones de <abbr title="Entrada/Salida">E/S</abbr> en <span lang="en">Java</span> vienen proporcionadas por el paquete estándar del <acronym title="Application Programming Interface" lang="en">API</acronym> de <span lang="en">Java</span> denominado java.io que incorpora interfaces, clases y excepciones para acceder a todo tipo de ficheros.</p>
<p>El contenido de un archivo puede interpretarse como <strong>campos</strong> y <strong>registros</strong> (grupos de campos), dándole un significado al conjunto de bits que en realidad posee.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id2">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta2_47" class="block" style="display:block;position:relative"><p>A continuación puedes ampliar tus conocimientos sobre Entrada y Salida en general, en el mundo de la informática. Verás que es un basto tema lo que abarca.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a una web con información sobre entrada y salida." href="http://exa.unne.edu.ar/depar/areas/informatica/SistemasOperativos/SO5.htm">Entrada y Salida.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
1.1.- Excepciones.</h1></div>
<div class="FreeTextfpdIdevice" id="id3">
<div class="iDevice emphasis0">
<div id="ta3_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R03_calcetines.jpg" alt="Mensaje de error que dice error 404, los calcetines que buscabas no se encontraron." title="Calcetines no encontrados." style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by" title="CC by" href="http://creativecommons.org/licenses/by/3.0/deed.es" target="_blank"><span class="transparente">CC by</span></a> <a title="Luis Fernando Pienda Mahecha" href="https://www.flickr.com/photos/ghostcero/3790862212/" target="_blank">Luis Fernando Pienda Mahecha</a></div>
</div>
<p>Cuando se trabaja con archivos, es normal que pueda haber errores, por ejemplo: podríamos intentar leer un archivo que no existe, o podríamos intentar escribir en un archivo para el que no tenemos permisos de escritura. Para manejar todos estos errores debemos utilizar <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">excepciones<span><em>Excepción</em>Una aplicación, ante una entrada de usuario no esperada, o por alguna otra causa, puede producir un error inesperado. Es posible admitir cierto número de errores y continuar su proceso para producir el mejor resultado posible en lugar de producir una salida aparatosa con mensajes de error incomprensibles para el usuario. Esto se consigue con las excepciones. Muchas veces, la acción asociada a una excepción es simplemente producir un mensaje informativo y terminar.</span></a>. Las dos excepciones más comunes al manejar archivos son:</p>
<ul class="lista_verificacion">
<li>FileNotFoundException: si no se puede encontrar el archivo.</li>
<li>IOException: si no se tienen permisos de lectura o escritura o si el archivo está dañado.</li>
</ul>
<p>Un esquema básico de uso de la captura y tratamiento de excepciones en un programa, podría ser este, importando el paquete java.io.IOException:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R03_01_codigo.jpg"><img alt="Estructura de código Java para capturar excepciones. Se incluye en archivo enlazado bajo la imagen." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R03_01_codigo_miniatura.jpg" style="width: 200px; height: 140px;" title="Capturar excepciones." height="140" width="200"></a></div>
</div>
<p class="elemento_centrado"><a class="documento" title="Descargar archivo con el código. [.txt – 1 KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R03_02_codiexc.txt">Código de la estructura para gestionar excepciones.</a> <span class="tamano">(1.00 KB)</span></p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id4">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion4_60" class="block" style="display:block;position:relative"><p><strong>Señala la opción correcta:</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option4_60" id="i4_63" onclick="getFeedback(0,4,&#39;4_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans4_63" class="block" style="display:block;position:relative"><p><span lang="en">Java</span> no ofrece soporte para excepciones.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option4_60" id="i4_80" onclick="getFeedback(1,4,&#39;4_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans4_80" class="block" style="display:block;position:relative"><p>Un campo y un archivo es lo mismo.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option4_60" id="i4_83" onclick="getFeedback(2,4,&#39;4_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans4_83" class="block" style="display:block;position:relative"><p>Si se intenta abrir un archivo que no existe, entonces saltará una excepción.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option4_60" id="i4_86" onclick="getFeedback(3,4,&#39;4_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans4_86" class="block" style="display:block;position:relative"><p>Ninguna es correcta.</p></div></div>
</div></div>
<div id="sa0b4_60" class="feedback" style="display: none;"><div id="taf4_63" class="" style="display:block;position:relative"><p>Respuesta incorrecta, sí que las soporta.</p></div></div>
<div id="sa1b4_60" class="feedback" style="display: none;"><div id="taf4_80" class="" style="display:block;position:relative"><p>Incorrecto, el contenido de un fichero está conformado por campos.</p></div></div>
<div id="sa2b4_60" class="feedback" style="display: none;"><div id="taf4_83" class="" style="display:block;position:relative"><p>¡Exacto! Se disparará una excepción de tipo FileNotFoundException.</p></div></div>
<div id="sa3b4_60" class="feedback" style="display: none;"><div id="taf4_86" class="" style="display:block;position:relative"><p>No has acertado, sí hay una correcta.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>Respuesta incorrecta, sí que las soporta.</p></li><li><strong>Incorrecto</strong> <p>Incorrecto, el contenido de un fichero está conformado por campos.</p></li><li><strong>Opción correcta</strong> <p>¡Exacto! Se disparará una excepción de tipo FileNotFoundException</code>.</p></li><li><strong>Incorrecto</strong> <p>No has acertado, sí hay una correcta.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
<div class="ParasabermasfpdIdevice" id="id5">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta5_47" class="block" style="display:block;position:relative"><p>En los siguientes enlaces hay algunos ejemplos donde se puede ver cómo se trabaja con ficheros de texto y de acceso aleatorio.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a una web con información sobre ficheros de texto." href="http://puntocomnoesunlenguaje.blogspot.com.es/2013/05/ficheros-de-texto-en-java.html">Algún ejemplo de ficheros de texto en Java.</a></p>
<p class="enlace_centrado"><a class="html" title="Acceder a una web con información sobre ficheros de acceso aleatorio." href="http://puntocomnoesunlenguaje.blogspot.com.es/2013/06/java-ficheros-acceso-aleatorio.html">Algún ejemplo de ficheros de acceso aleatorio.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
2.- Concepto de flujo.</h1></div>
<div class="CasopracticofpdIdevice" id="id6">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta6_66" class="block" style="display:block;position:relative"><p><strong><img src="./PROG_T7_files/EIN_PPAA_CASO_R05_JuanCuerpo_FOT.jpg" alt="Antonio de pie y de perfil, con los brazos flexionados a media altura." title="Antonio de perfil." class="elemento_izquierda">Antonio</strong> está estudiando un poco antes de irse a dormir. Se ha tomado un vaso de leche con cacao y está repasando el concepto de flujo o stream en<span> Java</span>. Entenderlo al principio, cuando lo estudió por primera vez, le costó un poco, pero ya lo entiende a la perfección y piensa que si le sale alguna pregunta en el examen de la semana que viene, sobre esto, seguro que la va a acertar.</p>
<p>Pensar en el flujo de datos como un chorro de agua que fluye por una tubería le ha sido de gran ayuda: los datos son  como el agua, de forma que lo que se introduce por la entrada (fuente de datos), va obteniéndose en la salida (aplicación) en el mismo orden que se introdujo, para el caso de un flujo de entrada.</p>
<p>Aunque también podemos habilitar una tubería que lleve el agua en sentido contrario, desde la aplicación a la salida (destino de datos), para el caso de un flujo de salida. Lo que no vamos a tener es una tubería (un flujo)  en la que el agua (los datos) pueda circular en los dos sentidos .</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id7">
<div class="iDevice emphasis0">
<div id="ta7_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R04_flujos_Esquema.png"><img alt="Esquema en el que se ve una entidad rectangular fuente y otro programa, y entre medias una línea que representa un flujo de lectura. Más abajo lo mismo pero a la izquierda pone Programa y a la derecha Destino, y entre las dos una línea que representa un flujo de escritura. " class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R04_flujos_Esquema_miniatura.png" title="Flujos" height="140" width="200"></a></div>
</div>
<p>La clase Stream representa un flujo o corriente de datos, es decir, un conjunto secuencial de <span lang="en">bytes</span>, como puede ser un archivo, un dispositivo de entrada/salida (en adelante<abbr title="Entrada/Salida"> E/S</abbr>), memoria, un conector <acronym title="Transmission Control Protocol/Internet Protocol" lang="en">TCP/IP</acronym> (Protocolo de Control de Transmisión/Protocolo de Internet), <abbr title="etcétera. ">etc.</abbr></p>
<p>Cualquier programa realizado en<span lang="en"> Java</span> que necesite llevar a cabo una operación de entrada salida lo hará a través de un stream.</p>
<p>Un flujo es una abstracción de aquello que produzca o consuma información. Es una entidad lógica.</p>
<p>Las clases y métodos de <abbr title="Entrada/Salida">E/S</abbr> que necesitamos emplear son las mismas <strong>independientemente del dispositivo con el que estemos actuando</strong>, luego, el núcleo de <span lang="en">Java</span>, sabrá si tiene que tratar con el teclado, el monitor, un sistema de archivos o un <span lang="en">socket</span> de red liberando al programador de tener que saber con quién está interactuando.</p>
<p>La vinculación de un flujo al dispositivo físico la hace el sistema de entrada y salida de <span lang="en">Java.</span></p>
<p>En resumen, será el flujo el que tenga que comunicarse con el sistema operativo concreto y "entendérselas" con él. De esta manera<strong>, no tenemos que cambiar absolutamente nada en nuestra aplicación</strong>, que va a ser independiente tanto de los dispositivos físicos de almacenamiento como del sistema operativo sobre el que se ejecuta. Esto es <strong>primordial en un lenguaje multiplataforma y tan altamente portable</strong> como <span lang="en">Java.</span></p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id8">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion8_60" class="block" style="display:block;position:relative"><p><strong>Señala la opción correcta:</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option8_60" id="i8_63" onclick="getFeedback(0,4,&#39;8_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans8_63" class="block" style="display:block;position:relative"><p>La clase Stream puede representar, al instanciarse, a un archivo.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option8_60" id="i8_92" onclick="getFeedback(1,4,&#39;8_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans8_92" class="block" style="display:block;position:relative"><p>Si programamos en <span lang="en">Java</span>, hay que tener en cuenta el sistema operativo cuando tratemos con flujos, pues varía su tratamiento debido a la diferencia de plataformas.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option8_60" id="i8_95" onclick="getFeedback(2,4,&#39;8_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans8_95" class="block" style="display:block;position:relative"><p>La clase Keyboard es la que debemos utilizar al leer flujos de teclado.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option8_60" id="i8_98" onclick="getFeedback(3,4,&#39;8_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans8_98" class="block" style="display:block;position:relative"><p>La vinculación de un flujo al dispositivo físico la hace el <span lang="en">hardware</span> de la máquina.</p></div></div>
</div></div>
<div id="sa0b8_60" class="feedback" style="display: none;"><div id="taf8_63" class="" style="display:block;position:relative"><p>¡Exacto!</p></div></div>
<div id="sa1b8_60" class="feedback" style="display: none;"><div id="taf8_92" class="" style="display:block;position:relative"><p>¡No! Es indiferente.</p></div></div>
<div id="sa2b8_60" class="feedback" style="display: none;"><div id="taf8_95" class="" style="display:block;position:relative"><p>¡Incorrecto! Es la clase Stream.</p></div></div>
<div id="sa3b8_60" class="feedback" style="display: none;"><div id="taf8_98" class="" style="display:block;position:relative"><p>¡Incorrecto! Lo hace el sistema de <abbr title="Entrada/Salida">E/S</abbr> de <span lang="en">Java</span>.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Opción correcta</strong> <p>¡Exacto!</p></li><li><strong>Incorrecto</strong> <p>¡No! Es indiferente.</p></li><li><strong>Incorrecto</strong> <p>¡Incorrecto! Es la clase Stream</code>.</p></li><li><strong>Incorrecto</strong> <p>¡Incorrecto! Lo hace el sistema de <abbr title="Entrada/Salida">E/S</abbr> de <span lang="en">Java</span>.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
<div class="ParasabermasfpdIdevice" id="id9">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta9_47" class="block" style="display:block;position:relative"><p>En la siguiente presentación puedes aprender más sobre <span lang="en">sockets</span> en <span lang="en">Java</span>.</p>
<p class="enlace_centrado"><a class="presentacion" title="Acceder a presentación de sockets. [ppt – 162KB]" href="http://studies.ac.upc.edu/FIB/CASO/seminaris/1q0102/M18.ppt" target="_self"><span lang="en">Sockets</span> en <span lang="en">Java</span>.</a> <span class="tamano">(162.00 KB)</span>    <span><a class="credenciales" title="Acceder al resumen txtual alternativo para la presentación" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_presentacion_SocketsJava.html">Resumen textual alternativo</a></span></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.- Clases relativas a flujos.</h1></div>
<div class="CasopracticofpdIdevice" id="id10">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta10_66" class="block" style="display:block;position:relative"><p><img src="./PROG_T7_files/CASO_PERSONAJES_26.png" alt="Primer plano de María, mirando hacia el frente." title="Primer plano de María." class="elemento_izquierda" height="140" width="200">Otro aspecto importante que <strong>Ada</strong> trata con <strong>María</strong> y <strong>Juan</strong>, acerca de los ficheros para la aplicación de la clínica, es el tipo de ficheros a usar. Es decir, deben estudiar si es conveniente utilizar ficheros para almacenar datos en ficheros de texto, o si deben utilizar ficheros binarios.</p>
<p><strong>María</strong> comenta:</p>
<p><span class="st">—</span>Quizás debemos usar los dos tipos de ficheros, dependerá de qué se vaya a guardar.</p>
<p><strong>Juan</strong> le contesta:</p>
<p><span class="st">—</span>Tienes razón <strong>María</strong>, pero debemos pensar entonces cómo va el programa a leer y a escribir la información, tendremos que utilizar las clases <span lang="en">Java</span> adecuadas según los ficheros que decidamos usar.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id11">
<div class="iDevice emphasis0">
<div id="ta11_73" class="block" style="display:block;position:relative"><div class="elemento_derecha"> </div>
<div class="elemento_derecha">
<div class="elemento_centrado"><a href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R06_clasesIO.gif"><img src="./PROG_T7_files/PROG08_CONT_R06_clasesIO_miniatura.gif" alt="Jerarquía de clases java.io." title="Clases Java I/O." class="imagen_ampliable" style="float: right;" height="192" width="140"></a></div>
<div class="elemento_centrado credenciales"><a class="Copyright" title="CC by-nc" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc</span></a> <a title="O&#39;Reilly &amp; Associates." href="https://aps2.elekta.lt/Books/oreilly/java/fclass/figs/jfc_1101.gif" target="_blank">O'Reilly &amp; Associates. Copiright (cita)</a></div>
</div>
<p>Existen dos tipos de flujos, flujos de <span lang="en">bytes</span> (<span lang="en">byte streams</span>) y flujos de caracteres (<span lang="en">character streams</span>).</p>
<ul class="lista_verificacion" type="disc">
<li>Los <strong>flujos de caracteres </strong>(16 <span lang="en">bits</span>) se usan para manipular datos legibles por humanos (por ejemplo un fichero de texto). Vienen determinados por dos clases abstractas: Reader y <code>Writer</code>. Dichas clases manejan flujos de caracteres <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">Unicode<span><em>Unicode</em>Estándar de codificación de caracteres diseñado para facilitar el tratamiento informático, transmisión y visualización de textos de múltiples lenguajes y disciplinas técnicas.</span></a>. De ellas derivan subclases concretas que implementan los métodos definidos, destacando los métodos read() y <code>write()</code> que, en este caso, leen y escriben <strong>caracteres</strong> de datos respectivamente.</li>
<li>Los <strong>flujos de </strong><span lang="en">bytes</span> (8 bits) se usan para manipular datos binarios, legibles solo por la máquina (por ejemplo un fichero de programa). Su uso está orientado a la lectura y escritura de datos binarios. El tratamiento del flujo de <span lang="en">bytes</span> viene determinado por dos clases abstractas que son InputStream y <code>OutputStream</code>. Estas dos clases son las que definen los métodos que sus subclases tendrán implementados y, de entre todos, destacan read() y <code>write()</code> que leen y escriben <span lang="en">bytes</span> de datos respectivamente.</li>
</ul>
<p>Las clases del paquete java.io se pueden ver en la ilustración. Destacamos las clases relativas a flujos:</p>
<ul class="lista_verificacion" type="disc">
<li>BufferedInputStream: permite leer datos a través de un flujo con un <span lang="en">buffer</span> intermedio.</li>
<li>BufferedOutputStream: implementa los métodos para escribir en un flujo a través de un <span lang="en">buffer</span>.</li>
<li>FileInputStream: permite leer <span lang="en">bytes</span> de un fichero.</li>
<li>FileOutputStream: permite escribir <span lang="en">bytes</span> en un fichero o descriptor.</li>
<li>StreamTokenizer: esta clase recibe un flujo de entrada, lo analiza (<span lang="en">parse</span>) y divide en diversos pedazos (<span lang="en">tokens</span>), permitiendo leer uno en cada momento.</li>
<li>StringReader: es un flujo de caracteres cuya fuente es una cadena de caracteres o String.</li>
<li>StringWriter: es un flujo de caracteres cuya salida es un <span lang="en">buffer</span> de cadena de caracteres, que puede utilizarse para construir un String.</li>
</ul>
<p>Destacar que hay clases que se<strong> "montan" sobre otros flujos para modificar la forma de trabajar con ellos. </strong>Por ejemplo, con BufferedInputStream podemos añadir un <span lang="en">buffer </span>a un flujo FileInputStream, de manera que se mejore la eficiencia de los accesos a los dispositivos en los que se almacena el fichero con el que conecta el flujo.</p></div></div>
</div>
<div class="DebesconocerfpdIdevice" id="id12">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta12_48" class="block" style="display:block;position:relative"><p>En el siguiente vídeo puedes clarificar algunos de estos conceptos.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " conceptos="" sobre="" java.io.""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_Video_ConceptosJavaIo.html">Resumen textual alternativo</a></div>
</div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.1.- Ejemplo comentado de una clase con flujos.</h1></div>
<div class="FreeTextfpdIdevice" id="id13">
<div class="iDevice emphasis0">
<div id="ta13_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R07_tokens.jpg" alt="Se pueden apreciar perlas de cristal de diferentes colores." title="Tokens" style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by" title="CC by" href="http://creativecommons.org/licenses/by/3.0/deed.es" target="_blank"><span class="transparente">CC by</span></a> <a title="JD Hancock" href="https://www.flickr.com/photos/jdhancock/3597445568/" target="_blank">JD Hancock</a></div>
</div>
<p>Vamos a ver un ejemplo con una de las clases comentadas, en concreto, con StreamTokenizer.</p>
<p>La clase StreamTokenizer obtiene un flujo de entrada y lo divide en "<span lang="en">tokens</span>". El flujo <span lang="en">tokenizer </span>puede reconocer identificadores, números y otras cadenas.</p>
<p>El ejemplo que puedes descargarte en el siguiente enlace, muestra cómo utilizar la clase StreamTokenizer para contar números y palabras de un fichero de texto. Se abre el flujo con ayuda de la clase FileReader, y puedes ver cómo se "monta" el flujo StreamTokenizer sobre el FileReader, es decir, que se construye el objeto <strong>StreamTokenizer</strong> con el flujo FileReader como argumento, y entonces se empieza a iterar sobre él.</p>
<p class="enlace_centrado"><a class="documento" title="Acceder al fichero de la clase. [java – 2KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/token.java">Clase para leer palabras y números.</a><span class="tamano"> (2.00 KB)</span></p>
<p>El método nextToken() devuelve un int que indica el tipo de <span lang="en">token</span> leído. Hay una serie de constantes definidas para determinar el tipo de <span lang="en">token</span>:</p>
<ul class="lista_verificacion" type="circle">
<li>TT_WORD indica que el <span lang="en">token</span> es una palabra.</li>
<li>TT_NUMBER indica que el <span lang="en">token</span> es un número.</li>
<li>TT_EOL indica que se ha leído el fin de línea.</li>
<li>TT_EOF indica que se ha llegado al fin del flujo de entrada.</li>
</ul>
<p>En el código de la clase, apreciamos que se iterará hasta llegar al fin del fichero. Para cada <span lang="en">token</span>, se mira su tipo, y según el tipo se incrementa el contador de palabras o de números.</p></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id14">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta14_54" class="block" style="display:block;position:relative"><p><strong>Indica si la siguiente afirmación es verdadera o falsa.</strong></p></div><div class="question">
<div id="taquestion0b14" class="block" style="display:block;position:relative"><p><strong>Según el sistema operativo que utilicemos, habrá que utilizar un flujo u otro. </strong></p></div>Verdadero <input type="radio" name="option0b14" id="true0b14" onclick="getFeedback(0,2,&#39;0b14&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b14" id="false0b14" onclick="getFeedback(1,2,&#39;0b14&#39;,&#39;truefalse&#39;)">
<div id="s0b0b14" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> <p>El sistema operativo es indiferente, el flujo se encargará de los detalles subyacentes en la comunicación, por lo que el programador no tiene que preocuparse de esas cuestiones.</p></div>
<div id="s1b0b14" class="feedback" style="display: none;"><strong>¡Correcto! </strong> <p>El sistema operativo es indiferente, el flujo se encargará de los detalles subyacentes en la comunicación, por lo que el programador no tiene que preocuparse de esas cuestiones.</p></div>
<noscript><div class="feedback"><strong>Falso</strong> <p>El sistema operativo es indiferente, el flujo se encargará de los detalles subyacentes en la comunicación, por lo que el programador no tiene que preocuparse de esas cuestiones.</p></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.- Flujos.</h1></div>
<div class="CasopracticofpdIdevice" id="id15">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta15_66" class="block" style="display:block;position:relative"><p><img alt="Ana, antonio y una amiga sentados en el banco de un parque." class="elemento_izquierda" src="./PROG_T7_files/EIN_PPAA_CASO_R12_ChicosParque_FOT_02.jpg" title="Sentados en un banco. " width="192" height="140"></p>
<p><strong>Ana </strong>y<strong> Antonio</strong> salen de clase<strong>. </strong><strong> Antonio</strong> ha quedado con una amiga y <strong>Ana</strong> va camino de casa pensando en lo que le explicaron en clase hace unos días. Como se quedó con dudas, también le consultó a <strong>María</strong>. En concreto, le asaltaban dudas sobre cómo leer y escribir datos por teclado en un programa, y también varias dudas sobre lectura y escritura de información en ficheros. <strong>María</strong> le solventó las dudas hablándole sobre el tema, pero aún así, tenía que probarlo tranquilamente en casa, haciéndose unos pequeños ejemplos, para comprobar toda la nueva información aprendida.</p>
<p><span class="st">—</span>Antes de irte <span class="st">—</span>dice <strong>Antonio</strong> a <strong>Ana</strong><span class="st">—</span>, siéntate a hablar con nosotros un rato.</p>
<p><span class="st">—</span>Bueno, pero me voy a ir enseguida, <span class="st">—</span>contesta <strong>Ana</strong>.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id16">
<div class="iDevice emphasis0">
<div id="ta16_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R08_ruta.JPG" alt="Camino de agua sobre las losas del suelo. " title="Camino de agua sobre las losas del suelo. " style="float: right;" height="192" width="144"></div>
<div class="elemento_centrado credenciales"><a class="cc-by" title="CC by" href="http://creativecommons.org/licenses/by/3.0/deed.es" target="_blank"><span class="transparente">CC by</span></a> <a title="David Blaikie" href="https://www.flickr.com/photos/nikonvscanon/2081397439/" target="_blank">David Blaikie</a></div>
</div>
<p>Hemos visto qué es un flujo y que existe un árbol de clases amplio para su manejo. Ahora vamos a ver en primer lugar los <strong>flujos predefinidos</strong>, también conocidos como de entrada y salida, y después veremos los <strong>flujos basados en <span lang="en">bytes</span></strong> y los <strong>flujos basados en carácter</strong>.</p></div></div>
</div>
<div class="CitasparapensarfpdIdevice" id="id17">
<div class="iDevice emphasis_citasparapensarfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_citasparapensarfpd.gif">
<span class="iDeviceTitle"><strong>Citas para pensar</strong></span>
<div class="iDevice_inner">
<div id="ta17_49" class="block" style="display:block;position:relative"><blockquote><strong><em>"Lo escuché y lo olvidé, lo vi y lo entendí, lo hice y lo aprendí".</em></strong> <cite> </cite></blockquote>
<blockquote><cite>Confucio.</cite></blockquote></div></div>
</div>
</div>
<div class="ParasabermasfpdIdevice" id="id18">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta18_47" class="block" style="display:block;position:relative"><p>Antes, hemos mencionado <span lang="en">Unicode</span>. Puedes consultar el origen y más cosas sobre <span lang="en">Unicode</span>, en el enlace de la Wikipedia:</p>
<p class="enlace_centrado"><a class="html" title="Acceder a la información sobre Unicode." href="http://es.wikipedia.org/wiki/Unicode">Acerca de Unicode.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.1.- Flujos predefinidos. Entrada y salida estándar.</h1></div>
<div class="FreeTextfpdIdevice" id="id19">
<div class="iDevice emphasis0">
<div id="ta19_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R09_entrada.jpg" alt="Letrero donde se lee Entrada, en fondo azul." title="Letrero de entrada." style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-nc" title="CC by-nc" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc</span></a> <a title="César Caracuel" href="https://www.flickr.com/photos/ces_vlc/2598180993/" target="_blank">César Caracuel</a></div>
</div>
<p>Tradicionalmente, los usuarios del sistema operativo <span>Unix, Linux</span> y también <acronym title="MicroSoft-Disk Operating System." lang="en">MS-DOS</acronym>, han utilizado un tipo de entrada/salida conocida comúnmente por entrada/salida estándar. El fichero de entrada estándar (stdin) es típicamente el teclado. El fichero de salida estándar (stdout) es típicamente la pantalla (o la ventana del terminal). El fichero de salida de error estándar (stderr) también se dirige normalmente a la pantalla, pero se implementa como otro fichero de forma que se pueda distinguir entre la salida normal y (si es necesario) los mensajes de error.</p>
<p><span lang="en">Java</span> tiene acceso a la entrada/salida estándar a través de la clase System. En concreto, los tres ficheros que se implementan son:</p>
<ul class="lista_verificacion">
<li>Stdin. <code>System.in</code> es un objeto de tipo InputStream, y está definido en la clase System como flujo de entrada estándar. Por defecto es el teclado, pero puede redirigirse para cada host o cada usuario, de forma que se corresponda con cualquier otro dispositivo de entrada.</li>
<li>Stdout. <code>System.out</code> implementa stdout como una instancia de la clase PrintStream. Se pueden utilizar los métodos print() y <code>println()</code> con cualquier tipo básico <span lang="en">Java</span> como argumento.</li>
<li>Stderr. <code>System.err </code>es un objeto de tipo PrintStream. Es un flujo de salida definido en la clase System y representa la salida de error estándar. Por defecto, es el monitor, aunque es posible redireccionarlo a otro dispositivo de salida.</li>
</ul>
<p>Para la entrada, se usa el método read() para leer de la entrada estándar:</p>
<ul class="lista_verificacion">
<li>int System.in.read();
<ul>
<li>Lee el siguiente byte (char) de la entrada estándar.</li>
</ul>
</li>
<li>int System.in.read(byte[] b);
<ul>
<li>Lee un conjunto de <span lang="en">bytes</span> de la entrada estándar y lo almacena en el vector b.</li>
</ul>
</li>
</ul>
<p>Para la salida, se usa el método print() para escribir en la salida estándar:</p>
<ul class="lista_verificacion">
<li>System.out.&lt;strong&gt;print&lt;/strong&gt;(String);
<ul>
<li>Muestra el texto en la consola.</li>
</ul>
</li>
<li>System.out.&lt;strong&gt;println&lt;/strong&gt;(String);
<ul>
<li>Muestra el texto en la consola y seguidamente efectúa un salto de línea.</li>
</ul>
</li>
</ul>
<p>Normalmente, para<strong> leer valores numéricos</strong>, lo que se hace es tomar el valor de la entrada estándar en forma de cadena y entonces usar métodos que permiten transformar el texto a números (int, <code>float</code>, double, <abbr title="etcétera.">etc</abbr>.) según se requiera.</p>
<table class="tabla" summary="Esta tabla muestra los metodos de conversión y una descripción de su  funcionamiento."><caption>Funciones de conversión.</caption>
<thead>
<tr><th scope="col">Método</th><th scope="col">Funcionamiento</th></tr>
</thead>
<tbody>
<tr>
<td scope="row">byte Byte.parseByte(String)</td>
<td>Convierte una cadena en un número entero de un <span lang="en">byte.</span></td>
</tr>
<tr>
<td scope="row">short Short.parseShort(String)</td>
<td>Convierte una cadena en un número entero corto.</td>
</tr>
<tr>
<td scope="row">int Integer.parseInt(String)</td>
<td>Convierte una cadena en un número entero.</td>
</tr>
<tr>
<td scope="row">long Long.parseLong(String)</td>
<td>Convierte una cadena en un número entero largo.</td>
</tr>
<tr>
<td scope="row">float Float.parseFloat(String)</td>
<td>Convierte una cadena en un número real simple.</td>
</tr>
<tr>
<td scope="row">double Double.parseDouble(String)</td>
<td>Convierte una cadena en un número real doble.</td>
</tr>
<tr>
<td scope="row">boolean Boolean.parseBoolean(String)</td>
<td>Convierte una cadena en un valor lógico.</td>
</tr>
</tbody>
</table></div></div>
</div>
<div class="DebesconocerfpdIdevice" id="id71">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta71_44" class="block" style="display:block;position:relative"><p>En este vídeo puedes ver un ejemplo sencillo usando <span id="eow-title" class="watch-title " title="System.in.read()" dir="ltr">System.in.read()</span>.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><iframe src="./PROG_T7_files/vTn_mXlA9w4.html" frameborder="0" width="350" height="233"></iframe></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " gestión="" de="" excepciones.""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_Video_Systeminread.html">Resumen textual alternativo</a></div>
</div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.2.- Flujos predefinidos. Entrada y salida estándar. Ejemplo.</h1></div>
<div class="FreeTextfpdIdevice" id="id20">
<div class="iDevice emphasis0">
<div id="ta20_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R10_flujo.jpg" alt="Flujo de agua en un río." title="Flujo de agua en un río." style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-nc-sa" title="CC by-nc-sa" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc-sa</span></a> <a title="Enrique A. Gomez" href="https://www.flickr.com/photos/anselmogz/8681516/in/photolist-LuHj-aUcH64-a9Nrci-a9NqFx-a9Nq4i-a9Nprt-a9NoM2-dwwoBm-atBEnm-6fFQSb-5pQH8d-bquYcN-bqiYQ4-eeMPXx-bzdUpS-5RCtG-5Rzn4-jDwTdt-jDy4go-8C79Rz-8C79Ka-5sovCb-6W9mf7-71Bo3C-aio7Hi-dzmCZi-h2CdH5-6DJoph-p5hLzq-aJGFLR-pSQ2WC-daL4EE-daL1iH-daL38E-daL2Gq-daL2oA-eSgga7-o6seDC-dsRU98-dsRTGF-dsS4k9-dsRSCZ-dsS3em-5sjcfT-qXszYP-e4QvyE-ahY7Qp-7gQLcM-4g51qS-eTWsC7" target="_blank">Enrique A. Gomez</a></div>
</div>
<p>Veamos un ejemplo en el que se lee por teclado hasta pulsar la tecla de retorno, en ese momento el programa acabará imprimiendo por la salida estándar la cadena leída.</p>
<p>Para ir construyendo la cadena con los caracteres leídos podríamos usar la clase StringBuffer o la StringBuilder. La clase StringBuffer permite almacenar cadenas que cambiarán en la ejecución del programa. StringBuilder es similar, pero no es <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">síncrona<span><em>Síncrona</em>En una ejecución síncrona, la instrucción siguiente a la llamada no se ejecuta hasta que no finalice el método llamado.</span></a>. De este modo, para la mayoría de las aplicaciones, donde se ejecuta un solo hilo, supone una mejora de rendimiento sobre StringBuffer.</p>
<p>El proceso de lectura ha de estar en un bloque try..catch.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="./PROG_T7_files/PROG08_CONT_R10_01_codigo.png"><img alt="Código Java donde se lee desde teclado y se escribe por la salida estándar lo leído por teclado.Se incluye en archivo enlazado bajo la imagen.  " class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R10_01_codigo.png" style="width: 200px; height: 140px;" title="Entrada y salida estándar."></a></div>
</div>
<p class="enlace_centrado"><a class="documento" title="Descargar archivo con el código. [txt – 1KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R10_02_LeeEstandar.txt">Código del proceso de lectura.</a> <span class="tamano">(1 KB)</span></p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id21">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion21_60" class="block" style="display:block;position:relative"><p><strong>Señala la opción correcta:</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option21_60" id="i21_63" onclick="getFeedback(0,4,&#39;21_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans21_63" class="block" style="display:block;position:relative"><p>Read es una clase de System que permite leer caracteres.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option21_60" id="i21_115" onclick="getFeedback(1,4,&#39;21_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans21_115" class="block" style="display:block;position:relative"><p>StringBuffer permite leer y StringBuilder escribir en la salida estándar.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option21_60" id="i21_118" onclick="getFeedback(2,4,&#39;21_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans21_118" class="block" style="display:block;position:relative"><p>La clase Keyboard también permite leer flujos de teclado.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option21_60" id="i21_121" onclick="getFeedback(3,4,&#39;21_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans21_121" class="block" style="display:block;position:relative"><p>Stderr por defecto dirige al monitor, pero se puede direccional a otro dispositivo.</p></div></div>
</div></div>
<div id="sa0b21_60" class="feedback" style="display: none;"><div id="taf21_63" class="" style="display:block;position:relative"><p>¡Incorrecto!</p></div></div>
<div id="sa1b21_60" class="feedback" style="display: none;"><div id="taf21_115" class="" style="display:block;position:relative"><p>¡No es correcto!</p></div></div>
<div id="sa2b21_60" class="feedback" style="display: none;"><div id="taf21_118" class="" style="display:block;position:relative"><p>¡No! Inténtalo de nuevo</p></div></div>
<div id="sa3b21_60" class="feedback" style="display: none;"><div id="taf21_121" class="" style="display:block;position:relative"><p>¡Bien hecho! Esa es la respuesta correcta.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>¡Incorrecto!</p></li><li><strong>Incorrecto</strong> <p>¡No es correcto!</p></li><li><strong>Incorrecto</strong> <p>¡No! Inténtalo de nuevo</p></li><li><strong>Opción correcta</strong> <p>¡Bien hecho! Esa es la respuesta correcta.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
<div class="ParasabermasfpdIdevice" id="id72">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta72_43" class="block" style="display:block;position:relative"><p>En el siguiente enlace tienes un ejemplo e información sobre el uso de StringBuilder y StringBuffer:</p>
<p style="text-align: center;"><a class="html" href="http://www.dit.upm.es/~pepe/libros/vademecum/index.html?n=375.html">StringBuffer</a>.</p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.3.- Flujos basados en bytes.</h1></div>
<div class="FreeTextfpdIdevice" id="id23">
<div class="iDevice emphasis0">
<div id="ta23_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R11_inout.jpg" alt="Icono de una persona corriendo con una flecha a la izquierda y otra a la deecha." title="Entrada y salida." style="float: right;" height="200" width="200"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-nc-sa" title="CC by-nc-sa" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc-sa</span></a> <a title="Carlos Mota Jr" href="https://www.flickr.com/photos/carlosmotajr/15492763195/in/photolist-pB3sJP-68XxNN-8tnP8c-cvYVdQ-m2C33V-oorXZy-pKRBJ-ifhS4F-cuCwvq-p4LxGG-dSTV1g-wGMhmx-47DeTb-dSUgDt-pgUFH3-8p7NLA-ctmtxo-mXFkVg-8dYA1X-a1M6ux-8g7Rbt-cNdrDN-dV1yso-dV1wHd-rqrsm3-8p4Coc-9LU7od-kGmmE-2XTc8G-fvdrBP-gEDo3R-8dYA4M-zMi3p-dEbnD-e2KT1n-4ndymL-pbEqTu-pAMeUt-oLb1UW-puUg5b-9XzHRY-doPC79-dAZDRo-4mftei-acE4jM-rwAbp-8RehHi-8ywKBR-fvssLQ-7Feq3M" target="_blank">Carlos Mota Jr</a></div>
</div>
<p>Este tipo de flujos es el idóneo para el manejo de entradas y salidas de <span lang="en">bytes</span>, y su uso por tanto está orientado a la lectura y escritura de datos binarios.</p>
<p>Para el tratamiento de los flujos de <span>bytes, Java</span> tiene dos clases abstractas que son InputStream y <code>OutputStream</code>. Cada una de estas clases abstractas tiene varias subclases instanciables, que controlan las diferencias entre los distintos dispositivos de <abbr title="Entrada/Salida">E/S</abbr> que se pueden utilizar.</p>
<div class="codigo elemento_centrado" style="width: 42.85em;">
<div class="texto_izquierda">
<pre>class FileInputStream extends InputStream {
</pre>
<pre>    FileInputStream (String fichero) throws FileNotFoundException;
</pre>
<pre>    FileInputStream (File fichero) throws FileNotFoundException;
</pre>
<pre>    ... ... ...
</pre>
<pre>  }
</pre>
<pre> </pre>
<pre>class FileOutputStream extends OutputStream {
</pre>
<pre>    FileOutputStream (String fichero) throws FileNotFoundException;
</pre>
<pre>    FileOutputStream (File fichero) throws FileNotFoundException;
</pre>
<pre>    ... ... ...
</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>OutputStream y <code>InputStream</code> y todas sus subclases, reciben en el constructor el objeto que representa el flujo de datos para el dispositivo de entrada o salida.</p>
<p>Por ejemplo, podemos copiar el contenido de un fichero en otro con este método:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R11_01_copiar.png"><img alt="Código Java para copiar de un fichero origen a otro destino.  Se incluye en archivo enlazado bajo la imagen." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R11_01_copiar_miniatura.png" title="Entrada y salida estándar."></a></div>
</div>
<p class="enlace_centrado"><a class="documento" title="Descargar archivo con el código de copiar. [txt – 1KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R11_02_copiar.txt">Código de copiar.</a> <span class="tamano">(1 KB)</span></p></div></div>
</div>
<div class="RecomendacionfpdIdevice" id="id24">
<div class="iDevice emphasis_recomendacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_recomendacionfpd.gif">
<span class="iDeviceTitle"><strong>Recomendación</strong></span>
<div class="iDevice_inner">
<div id="ta24_50" class="block" style="display:block;position:relative"><p>En los enlaces siguientes puedes ver la documentación oficial de Oracle sobre FileInputStream y sobre FileOutputStream.</p>
<div style="width: 100%;">
<div style="width: 50%; float: left;">
<div class="elemento_centrado">
<p class="enlace_centrado"><a class="html" title="Acceder a la documentación sobre FileInputStream." href="http://docs.oracle.com/javase/8/docs/api/java/io/FileInputStream.html">FileInputStream.</a></p>
</div>
</div>
<div style="width: 50%; float: right;">
<div class="elemento_centrado">
<p class="enlace_centrado"><a class="html" title="Acceder a la documentación sobre FileOutputStream." href="http://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html">FileOutputStream.</a></p>
</div>
</div>
</div>
<div style="clear: both;"> </div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.4.- Flujos basados en caracteres.</h1></div>
<div class="FreeTextfpdIdevice" id="id25">
<div class="iDevice emphasis0">
<div id="ta25_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R12_caracteres.jpg" alt="Pantalla en la que aparecen muchos caracteres en idioma oriental. " title="Caracteres." style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="挪威 企鵝" href="https://www.flickr.com/photos/macglee/4795368373/" target="_blank">挪威 企鵝</a></div>
</div>
<p>Las clases orientadas al flujo de <span lang="en">bytes</span> nos proporcionan la suficiente funcionalidad para realizar cualquier tipo de operación de entrada o salida, pero no pueden trabajar directamente con <strong>caracteres Unicode</strong>, los cuales están <strong>representados por dos <span lang="en">bytes</span>.</strong> Por eso, se consideró necesaria la creación de las clases orientadas al flujo de caracteres para ofrecernos el soporte necesario para el tratamiento de caracteres.</p>
<p>Para los flujos de caracteres, <span lang="en">Java</span> dispone de dos clases abstractas: Reader y <code>Writer</code>.</p>
<p>Reader, <code>Writer</code>, y todas sus subclases, reciben en el constructor el objeto que representa el flujo de datos para el dispositivo de entrada o salida.</p>
<p><strong><span class="destacado_inline">Hay que recordar que cada vez que se llama a un constructor se abre el flujo de datos y es necesario cerrarlo cuando no lo necesitemos.</span></strong></p>
<p>Existen muchos tipos de flujos dependiendo de la utilidad que le vayamos a dar a los datos que extraemos de los dispositivos.</p>
<p><strong>Un flujo puede ser envuelto por otro flujo para tratar el flujo de datos de forma cómoda</strong>. Así, un bufferWriter nos permite manipular el flujo de datos como un <span lang="en">buffer,</span> pero si lo envolvemos en un PrintWriter lo podemos escribir con muchas más funcionalidades adicionales para diferentes tipos de datos.</p>
<p>En este ejemplo de código, se ve cómo podemos escribir la salida estándar a un fichero. Cuando se teclee la palabra "salir", se dejará de leer y entonces se saldrá del bucle de lectura.</p>
<p>Podemos ver cómo se usa InputStreamReader que es un puente de flujos de <span lang="en">bytes</span> a flujos de caracteres: lee <span lang="en">bytes</span> y los decodifica a caracteres. BufferedReader lee texto de un flujo de entrada de caracteres, permitiendo efectuar una lectura eficiente de caracteres, vectores y líneas.</p>
<p>Como vemos en el código, usamos FileWriter para flujos de caracteres, pues para datos binarios se utiliza FileOutputStream.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R12_01_leebufer.jpg"><img alt="Código Java donde se leen líneas de caracteres de la entrada, hasta que se teclee la palabra salir.Se incluye en archivo enlazado bajo la imagen." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R12_01_leebufer_miniatura.jpg" style="width: 200px; height: 100px;" title="Leer con buffer."></a></div>
</div>
<p class="enlace_centrado"><a class="documento" title="Descargar archivo con el código de copiar. [txt – 1KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R12_02_codleebufer.txt">Código de copiar.</a> <span class="tamano">(1 KB)</span></p></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id26">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta26_54" class="block" style="display:block;position:relative"><p><strong>Indica si es verdadera o falsa la siguiente afirmación:</strong></p>
<p><strong><br> </strong></p></div><div class="question">
<div id="taquestion0b26" class="block" style="display:block;position:relative"><p><strong> Para flujos de caracteres es mejor usar las clases </strong>Reader<strong> y </strong>Writer<strong> en vez de </strong>InputStream<strong> y </strong>OutputStream<strong>.</strong></p></div>Verdadero <input type="radio" name="option0b26" id="true0b26" onclick="getFeedback(0,2,&#39;0b26&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b26" id="false0b26" onclick="getFeedback(1,2,&#39;0b26&#39;,&#39;truefalse&#39;)">
<div id="s0b0b26" class="feedback" style="display: none;"><strong>¡Correcto! </strong> <p>Reader y <code>Writer</code> se aconseja para los flujos de caracteres, mientras que InputStream y <code>OutputStream</code> se aconsejan para los ficheros binarios.</p></div>
<div id="s1b0b26" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> <p>Reader y <code>Writer</code> se aconseja para los flujos de caracteres, mientras que InputStream y <code>OutputStream</code> se aconsejan para los ficheros binarios.</p></div>
<noscript><div class="feedback"><strong>Verdadero</strong> <p>Reader</code> y <code>Writer</code> se aconseja para los flujos de caracteres, mientras que InputStream</code> y <code>OutputStream</code> se aconsejan para los ficheros binarios.</p></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.5.- Rutas de los ficheros.</h1></div>
<div class="FreeTextfpdIdevice" id="id27">
<div class="iDevice emphasis0">
<div id="ta27_73" class="block" style="display:block;position:relative"><p><img alt="Mapa en el que se ve la ruta de Magallanes y ElCano. " class="elemento_izquierda" src="./PROG_T7_files/PROG08_CONT_R13_mapamundi.JPG" title="Mapamundi"></p>
<p>En los ejemplos que vemos en el tema estamos usando la ruta de los ficheros tal y como se usan en <acronym title="MicroSoft-Disk Operating System." lang="en">MS-DOS</acronym>, o <span lang="en">Windows</span>, es decir, por ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 24.7em;">
<div class="texto_izquierda">
<pre>c:\\datos\Programacion\fichero.txt
</pre>
</div>
</div>
<p>Cuando operamos con rutas de ficheros, el carácter separador entre directorios o carpetas suele cambiar dependiendo del sistema operativo en el que se esté ejecutando el programa.</p>
<p>Para evitar problemas en la ejecución de los programas cuando se ejecuten en uno u otro sistema operativo, y por tanto persiguiendo que nuestras aplicaciones sean lo más portables posibles, se recomienda usar en <span lang="en">Java</span>: File.separator.</p>
<p>Podríamos hacer una función que al pasarle una ruta nos devolviera la adecuada según el separador del sistema actual, del siguiente modo:</p>
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R13_01_rutas.png"><img alt="Código en Java para crear un fichero. Se incluye en archivo enlazado bajo la imagen." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R13_01_rutas_miniatura.jpg" style="width: 200px; height: 100px;" title="Separador de ruta de ficheros."></a></div>
<p class="enlace_centrado"><a title="Descargar archivo con el código de separador de rutas. [java – 1KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R14_cod_rutas.java"><span class="documento">Código de separador de rutas.</span></a><span class="tamano"> (1 KB)</span></p></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id28">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta28_54" class="block" style="display:block;position:relative"><p><strong>Indica si es verdadera o falsa la siguiente afirmación.</strong></p></div><div class="question">
<div id="taquestion0b28" class="block" style="display:block;position:relative"><p>Cuando trabajamos con ficheros en <span lang="en">Java</span>, no es necesario capturar las excepciones, el sistema se ocupa automáticamente de ellas.</p></div>Verdadero <input type="radio" name="option0b28" id="true0b28" onclick="getFeedback(0,2,&#39;0b28&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b28" id="false0b28" onclick="getFeedback(1,2,&#39;0b28&#39;,&#39;truefalse&#39;)">
<div id="s0b0b28" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> <p>Es falso, hay que tratarlas adecuadamente para evitar malos funcionamientos de la aplicación</p></div>
<div id="s1b0b28" class="feedback" style="display: none;"><strong>¡Correcto! </strong> <p>Es falso, hay que tratarlas adecuadamente para evitar malos funcionamientos de la aplicación</p></div>
<noscript><div class="feedback"><strong>Falso</strong> <p>Es falso, hay que tratarlas adecuadamente para evitar malos funcionamientos de la aplicación</p></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.- Trabajando con ficheros.</h1></div>
<div class="CasopracticofpdIdevice" id="id29">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta29_66" class="block" style="display:block;position:relative"><p><strong><img src="./PROG_T7_files/EIN_PPAA_CASO_R08_ProfesorCuerpo_FOT.jpg" alt="Juan de pie hablando, gesticulando con los brazos." title="Persona de pie y hablando." class="elemento_izquierda" width="200" height="140">Juan </strong>le comenta a <strong>María</strong>:</p>
<p><span class="st">—</span>Tenemos que programar una copia de seguridad diaria de los datos del fichero de texto plano que utiliza el programa para guardar la información.</p>
<p>Mientras <strong>María</strong> escucha a <strong>Juan</strong>, recuerda que para copias de seguridad, siempre ha comprobado que la mejor opción es utilizar ficheros secuenciales. </p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id30">
<div class="iDevice emphasis0">
<div id="ta30_73" class="block" style="display:block;position:relative"><p><img alt="Mano introduciendo un disquete en el ordenador. " class="elemento_derecha" src="./PROG_T7_files/PROG08_CONT_R15_disquete.jpg" title="Disquete."></p>
<p>¿Crees que es una buena opción la que piensa María o utilizarías otra en su lugar?</p>
<p>En este apartado vas a seguir profundizando en el manejo de los ficheros. Profundizaremos en  cómo leer y escribir en ellos, y también hablaremos de las formas de acceso a los ficheros: secuencial o  aleatorio.</p>
<p>Siempre hemos de tener en cuenta que la manera de proceder con ficheros debe ser:</p>
<ul class="lista_verificacion">
<li><strong>Abrir</strong> o bien <strong>crear</strong> si no existe el fichero.</li>
<li><strong>Hacer las operaciones</strong> que necesitemos.</li>
<li><strong>Cerrar el fichero</strong>, para no perder la información que se haya modificado o añadido.</li>
</ul>
<p>También es muy importante el <strong>control de las excepciones</strong>, para evitar que se produzcan fallos en tiempo de ejecución. Si intentamos abrir sin más un fichero, sin comprobar si existe o no, y no existe, saltará una excepción.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id31">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta31_47" class="block" style="display:block;position:relative"><p>En el siguiente enlace a la wikipedia podrás ver la descripción de varias extensiones que pueden presentar los archivos.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a la definición de extensión." href="http://es.wikipedia.org/wiki/Extensi%C3%B3n_de_archivo">Extensión de un archivo.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.1.- Escritura y lectura de información en ficheros.</h1></div>
<div class="FreeTextfpdIdevice" id="id32">
<div class="iDevice emphasis0">
<div id="ta32_73" class="block" style="display:block;position:relative"><p><img alt="Mano escribiendo a bolígrafo sobre un papel. " class="elemento_izquierda" src="./PROG_T7_files/PROG08_CONT_R16_escritura.JPG" title="Escribiendo"></p>
<p>Acabamos de mencionar los pasos fundamentales para proceder con ficheros: abrir, operar, cerrar.</p>
<p>Además de esas consideraciones, debemos tener en cuenta también las clases <span lang="en">Java</span> a emplear, es decir, recuerda que hemos comentado que si vamos a tratar con ficheros de texto, es más eficiente emplear las clases de Reader y <code>Writer</code>, frente a las clases de InputStream y <code>OutputStream</code> que están indicadas para flujos de <span lang="en">bytes</span>.</p>
<p>Otra cosa a considerar, cuando se va a hacer uso de ficheros, es la forma de acceso al fichero que se va a utilizar, si va a ser de manera secuencial o bien aleatoria. En un fichero secuencial, <strong>para acceder a un dato debemos recorrer todo el fichero desde el principio hasta llegar a su posición</strong>. Sin embargo, en un fichero de <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">acceso aleatorio<span><em>Acceso aleatorio</em>Es la posibilidad de acceder a un elemento arbitrario de una secuencia de datos en el mismo tiempo.</span></a> podemos posicionarnos directamente en una posición del fichero, y ahí leer o escribir.</p>
<p>Aunque ya has visto un ejemplo que usa BufferedReader, insistimos aquí sobre la filosofía de estas clases, que usan la idea de un <span lang="en">buffer</span>.</p>
<p>La idea es que cuando una aplicación necesita leer datos de un fichero, tiene que estar esperando a que el disco en el que está el fichero le proporcione la información.</p>
<p>Un dispositivo cualquiera de <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">memoria masiva<span><em>Memoria masiva</em>Consiste en un tipo de almacenamiento permanente, no volátil, a diferencia de la memoria principal del ordenador que sí es volátil, pero posee mayor capacidad de almacenamiento que la memoria principal, aunque es más lenta que ésta.</span></a>, por muy rápido que sea, es mucho más lento que la <acronym title="Central Processing Unit." lang="en">CPU</acronym> del ordenador.</p>
<p>Así que, es fundamental <strong>reducir el número de accesos al fichero</strong> a fin de mejorar la eficiencia de la aplicación, y para ello se asocia al fichero una memoria intermedia, el <span lang="en">buffer</span>, de modo que cuando se necesita leer un <span lang="en">byte</span> del archivo, en realidad se traen hasta el <span lang="en">buffer</span> asociado al flujo, ya que es una memoria mucho más rápida que cualquier otro dispositivo de memoria masiva.</p>
<p>Cualquier operación de Entrada/Salida a ficheros puede generar una IOException, es decir, un error de Entrada/Salida. Puede ser por ejemplo, que el fichero no exista, o que el dispositivo no funcione correctamente, o que nuestra aplicación no tenga permisos de lectura o escritura sobre el fichero en cuestión. Por eso, las sentencias que involucran operaciones sobre ficheros, deben ir siempre en un bloque try-catch.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id33">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta33_47" class="block" style="display:block;position:relative"><p>En este tutorial aprenderás a crear carpetas y archivos en la consola <acronym title="MicroSoft Disk Operating System." lang="en">MS-DOS</acronym>.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " comandos="" ms-dos.""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_Video_ComandosMS-DOS.html">Resumen textual alternativo</a></div>
</div></div></div>
</div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id34">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta34_54" class="block" style="display:block;position:relative"><p><strong>Señala si es verdadera o es falsa la siguiente afirmación:</strong></p></div><div class="question">
<div id="taquestion0b34" class="block" style="display:block;position:relative"><p><strong>La idea de usar <span lang="en">buffers</span> con los ficheros es incrementar los accesos físicos a disco.</strong> </p></div>Verdadero <input type="radio" name="option0b34" id="true0b34" onclick="getFeedback(0,2,&#39;0b34&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b34" id="false0b34" onclick="getFeedback(1,2,&#39;0b34&#39;,&#39;truefalse&#39;)">
<div id="s0b0b34" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> <p>Se trata de disminuir esos accesos.</p></div>
<div id="s1b0b34" class="feedback" style="display: none;"><strong>¡Correcto! </strong> <p>Se trata de disminuir esos accesos.</p></div>
<noscript><div class="feedback"><strong>Falso</strong> <p>Se trata de disminuir esos accesos.</p></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.2.- Ficheros binarios y ficheros de texto (I).</h1></div>
<div class="FreeTextfpdIdevice" id="id35">
<div class="iDevice emphasis0">
<div id="ta35_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R17_texto.jpg" alt="Página de un libro con texto. " title="Texto." style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-nc" title="CC by-nc" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc</span></a> <a title="Evandro Clivatti Dall&#39;Agnol" href="https://www.flickr.com/photos/entropyer/43134722/" target="_blank">Evandro Clivatti Dall'Agnol</a></div>
</div>
<p>Ya comentamos anteriormente que los ficheros se utilizan para guardar la información en un soporte: disco duro, disquetes, memorias <acronym title="Universal Serial Bus.">usb</acronym>, <acronym title="Digital Versatile Disc.">dvd</acronym>, <abbr title="etcétera.">etc.</abbr>, y posteriormente poder recuperarla. También distinguimos dos tipos de ficheros: los de <strong>texto</strong> y los <strong>binarios</strong>.</p>
<p>En los <strong>ficheros de texto</strong> la información se guarda como caracteres. Esos caracteres están codificados en <strong><span lang="en">Unicode</span></strong>, o en <strong><acronym title="American Standard Code for Information Interchange" lang="en">ASCII</acronym></strong> u otras codificaciones de texto.</p>
<p>En la siguiente porción de código puedes ver cómo para un fichero existente, que en este caso es texto.txt, averiguamos la codificación que posee, usando el método getEncoding()</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R17_01_getEncoding.jpg"><img alt="Obtener codificación.  Se incluye en archivo enlazado bajo la imagen." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R17_01_getEncoding_miniatura.jpg" style="width: 200px; height: 100px;" title="Codificación."></a></div>
</div>
<p class="enlace_centrado"><a class="documento" title="Descargar archivo con el código de separador de rutas. [txt – 1KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R17_02_getEncoding.txt">Obtención del tipo de codificación.</a> <span class="tamano">(1 KB)</span></p>
<p>Para <strong>archivos de texto</strong>, se puede abrir el fichero para leer usando la clase FileReader. Ésta clase nos proporciona métodos para <strong>leer caracteres</strong>. Cuando nos interese no leer carácter a carácter, sino <strong>leer líneas completas</strong>, podemos usar la clase BufferedReader a partir de FileReader. Lo podemos hacer de la siguiente forma:</p>
<div class="codigo elemento_centrado" style="width: 29.65em;">
<div class="texto_izquierda">
<pre>File archivo = new File ("C:\\fich.txt");
</pre>
<pre>FileReader fr = new FileReader (archivo);
</pre>
<pre>BufferedReader br = new BufferedReader(fr);
</pre>
<pre>...
</pre>
<pre>String linea = br.readLine();
</pre>
</div>
</div>
<p>Para <strong>escribir en archivos de texto</strong> lo podríamos hacer, teniendo en cuenta:</p>
<div class="codigo elemento_centrado" style="width: 26.9em;">
<div class="texto_izquierda">
<pre>FileWriter fichero = null;
</pre>
<pre>PrintWriter pw = null;
</pre>
<pre>fichero = new FileWriter("c:/fich2.txt");
</pre>
<pre>pw = new PrintWriter(fichero);
</pre>
<pre>pw.println("Linea de texto");
</pre>
<pre>...
</pre>
</div>
</div>
<p>Si el fichero al que queremos escribir existe y lo que queremos es añadir información, entonces pasaremos el segundo parámetro como true:</p>
<div class="codigo elemento_centrado" style="width: 23.6em;">
<div class="texto_izquierda">
<pre>FileWriter("c:/fich2.txt",true);
</pre>
</div>
</div></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id36">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta36_47" class="block" style="display:block;position:relative"><p>En el siguiente enlace a wikipedia puedes ver el código <acronym title="American Standard Code for Information Interchange." lang="en">ASCII</acronym>.</p>
<p class="enlace_centrado"><a class="html" title="Acceder al artículo de Wikipedia dedicado al código Ascii." href="http://es.wikipedia.org/wiki/ASCII">Código ASCII.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.2.1.- Ficheros binarios y ficheros de texto (II).</h1></div>
<div class="FreeTextfpdIdevice" id="id37">
<div class="iDevice emphasis0">
<div id="ta37_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R18_hexadecimal.png" alt="Pantalla negra con caracteres en hexadecimal." title="Hexadecimal." style="float: right;" height="100" width="200"></div>
<div class="elemento_centrado credenciales"><a class="cc0" title="Dominio público" href="http://creativecommons.org/publicdomain/zero/1.0/deed.es" target="_blank"><span class="transparente">Dominio público</span></a> <a title="Paulnasca" href="https://es.wikipedia.org/wiki/Archivo:Binary_file.png" target="_blank">Paulnasca</a></div>
</div>
<p>Los <strong>ficheros binarios</strong> almacenan la información en bytes, codificada en binario, pudiendo ser de cualquier tipo: fotografías, números, letras, archivos ejecutables, etc.</p>
<p>Los archivos binarios guardan una representación de los datos en el fichero. O sea que, cuando se guarda texto no se guarda el texto en sí, sino que se guarda su representación en código <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">UTF-8<span><em>UTF-8</em>Es un formato de codificación de caracteres Unicode usando símbolos de longitud variable.</span></a>.</p>
<p>Para <strong>leer datos de un fichero binario</strong>, Java proporciona la clase <strong>FileInputStream</strong>. Dicha clase trabaja con bytes que se leen desde el flujo asociado a un fichero. Aquí puedes ver un ejemplo comentado.</p>
<p class="enlace_centrado"><a class="documento" title="Código Java de lectura de fichero binario. [java – 3KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/leerConBuffer.java">Leer de fichero binario con buffer.</a> <span class="tamano">(3.00 KB)</span></p>
<p>Para <strong>escribir datos a un fichero binario</strong>, la clase nos permite usar un fichero para escritura de <span lang="en">bytes</span> en él, es la claseFileOutputStream. La filosofía es la misma que para la lectura de datos, pero ahora el flujo es en dirección contraria, desde la aplicación que hace de fuente de datos hasta el fichero, que los consume.</p>
<p>En la siguiente presentación puedes ver un esquema de cómo utilizar buffer para optimizar la lectura de teclado desde consola, por medio de las envolturas, podemos usar métodos como readline(), de la clase BufferedReader, que envuelve a un objeto de la clase InputStreamReader.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " envolturas.""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_presentacion_Envolturas.html">Resumen textual alternativo</a></div>
</div></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id38">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta38_54" class="block" style="display:block;position:relative"><p>
<strong>Señala si es verdadera o falsa
la siguiente afirmación:</strong>
</p>
</div><div class="question">
<div id="taquestion0b38" class="block" style="display:block;position:relative">Para leer datos desde un fichero codificados en
binario empleamos la clase FileOutputStream.
¿Verdadero o falso? 
</div>Verdadero <input type="radio" name="option0b38" id="true0b38" onclick="getFeedback(0,2,&#39;0b38&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b38" id="false0b38" onclick="getFeedback(1,2,&#39;0b38&#39;,&#39;truefalse&#39;)">
<div id="s0b0b38" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> Se trata en efecto de FileInputStream.
</div>
<div id="s1b0b38" class="feedback" style="display: none;"><strong>¡Correcto! </strong> Se trata en efecto de FileInputStream.
</div>
<noscript><div class="feedback"><strong>Falso</strong> Se trata en efecto de FileInputStream</code>.
</div></noscript>
</div>
</div>
</div>
</div>
<div class="DebesconocerfpdIdevice" id="id73">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta73_44" class="block" style="display:block;position:relative"><p>Tienes ejemplos de lectura y escritura de ficheros en Java, en el siguiente enlace:</p>
<p style="text-align: center;"><a class="html" title="Lectura y escritura de ficheros." href="http://jarroba.com/lectura-escritura-ficheros-java-ejemplos/" target="_blank">Lectura y escritura de ficheros en Java, con ejemplos.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.3.- Modos de acceso. Registros.</h1></div>
<div class="FreeTextfpdIdevice" id="id39">
<div class="iDevice emphasis0">
<div id="ta39_73" class="block" style="display:block;position:relative"><p><img alt="Tres cuadrados consecutivos representando tres registros y uno más a la derecha" class="elemento_izquierda" src="./PROG_T7_files/PROG08_CONT_R20_registros.JPG" title="Registros" width="200" height="100"></p>
<p>En Java no se impone una estructura en un fichero, por lo que conceptos como el de registro que si existen en otros lenguajes, en principio no existen en los archivos que se crean con Java. Por tanto, los programadores deben estructurar los ficheros de modo que cumplan con los requerimientos de sus aplicaciones.</p>
<p>Así, el programador definirá su registro con el número de bytes que le interesen, moviéndose luego por el fichero teniendo en cuenta ese tamaño que ha definido.</p>
<p>Se dice que un fichero es de acceso directo o de organización directa cuando para acceder a un registro <strong>n</strong> cualquiera, no se tiene que pasar por los <strong>n-1</strong> registros anteriores. En caso contrario, estamos hablando de ficheros secuenciales.</p>
<p>Con Java se puede trabajar con <strong>ficheros secuenciales</strong> y con <strong>ficheros de acceso aleatorio</strong>.</p>
<p>En los <strong>ficheros secuenciales</strong>, la información se almacena de manera secuencial, de manera que para recuperarla se debe hacer en el mismo orden en que la información se ha introducido en el archivo. Si por ejemplo queremos leer el registro del fichero que ocupa la posición tres (en la ilustración sería el que contiene el número 5), tendremos que abrir el fichero y leer los primeros tres registros, hasta que finalmente leamos el registro número tres.</p>
<p>Por el contrario, si se tratara de un <strong>fichero de acceso aleatorio</strong>, podríamos acceder directamente a la posición tres del fichero, o a la que nos interesara.</p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id40">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion40_60" class="block" style="display:block;position:relative"><p>
<strong>Señala la opción correcta:</strong>
</p>
</div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option40_60" id="i40_63" onclick="getFeedback(0,4,&#39;40_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans40_63" class="block" style="display:block;position:relative"><p>
Java sólo admite el uso de ficheros
aleatorios.
</p>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option40_60" id="i40_98" onclick="getFeedback(1,4,&#39;40_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans40_98" class="block" style="display:block;position:relative">Con los ficheros de acceso aleatorio se puede
acceder a un registro determinado directamente.<u> </u>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option40_60" id="i40_101" onclick="getFeedback(2,4,&#39;40_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans40_101" class="block" style="display:block;position:relative"><p>
Los ficheros secuenciales se deben leer de
tres en tres registros.
</p>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option40_60" id="i40_104" onclick="getFeedback(3,4,&#39;40_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans40_104" class="block" style="display:block;position:relative"><p>
Todas son falsas.
</p>
</div></div>
</div></div>
<div id="sa0b40_60" class="feedback" style="display: none;"><div id="taf40_63" class="" style="display:block;position:relative"><p>
No es correcto, permite también los ficheros secuenciales.
</p>
</div></div>
<div id="sa1b40_60" class="feedback" style="display: none;"><div id="taf40_98" class="" style="display:block;position:relative"><p>
¡Bien hecho! Esa es la respuesta correcta. 
</p>
</div></div>
<div id="sa2b40_60" class="feedback" style="display: none;"><div id="taf40_101" class="" style="display:block;position:relative"><p>
Incorrecto, no hay ninguna restricción de
este tipo.
</p>
</div></div>
<div id="sa3b40_60" class="feedback" style="display: none;"><div id="taf40_104" class="" style="display:block;position:relative">Respuesta incorrecta, repasa de nuevo los
apuntes.
</div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>
No es correcto, permite también los ficheros secuenciales.
</p>
</li><li><strong>Opción correcta</strong> <p>
¡Bien hecho! Esa es la respuesta correcta. 
</p>
</li><li><strong>Incorrecto</strong> <p>
Incorrecto, no hay ninguna restricción de
este tipo.
</p>
</li><li><strong>Incorrecto</strong> Respuesta incorrecta, repasa de nuevo los
apuntes.
</li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.4.- Acceso secuencial.</h1></div>
<div class="FreeTextfpdIdevice" id="id41">
<div class="iDevice emphasis0">
<div id="ta41_73" class="block" style="display:block;position:relative"><p><img alt="Un cero con ojos y cejas." class="elemento_derecha" src="./PROG_T7_files/PROG08_CONT_R21_cero.jpg" title="Cero."></p>
<p>En el siguiente ejemplo vemos cómo se <strong>escriben datos en un fichero secuencial</strong>: el nombre y apellidos de una persona utilizando el método writeUTF() que proporciona DataOutputStream, seguido de su edad que la escribimos con el método writeInt() de la misma clase. A continuación escribimos lo mismo para una segunda persona y de nuevo para una tercera. Después cerramos el fichero. Y ahora lo abrimos de nuevo para ir <strong>leyendo de manera secuencial</strong> los datos almacenados en el fichero, y escribiéndolos a consola.</p>
<p class="enlace_centrado"><a class="documento" title="Escribir y leer en fichero secuencial. [java – 3KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/escylee.java">Escribir y leer.</a> <span class="tamano">(3.00 KB)</span></p>
<p>Si miras el ejemplo y la documentación en la API del método writeUTF(), verás que lo primero que hace antes de escribir una cadena es guardar en el flujo de salida dos bytes que indican el número de bytes que se van a usar para escribir esa cadena. De esta forma, cuando usemos el método readUTF() para leer dicha  cadena, java sabe dónde termina, cuándo tiene que parar de leer bytes para esa cadena, sin que nosotros tengamos que preocuparnos de ello. <br><br>Con lo que sí tenemos que ser cuidadosos, a la hora de leer del fichero, es con usar los métodos readUTF() y <code>readInt()</code> en el mismo orden en que habíamos usado antes writeUTF() y <code>writeInt()</code> para escribir en el fichero. <br><br></p>
<p>Por tanto para <strong>buscar información en un fichero secuencial</strong>, tendremos que abrir el fichero e ir leyendo registros hasta encontrar el registro que buscamos.</p>
<p>¿Y si queremos <strong>eliminar un registro en un fichero secuencial</strong>, qué hacemos? Esta operación es un problema, puesto que no podemos quitar el registro y reordenar el resto. Una opción, aunque costosa, sería crear un nuevo fichero. Recorremos el fichero original y vamos copiando registros en el nuevo hasta llegar al registro que queremos borrar. Ese no lo copiamos al nuevo, y seguimos copiando hasta el final, el resto de registros al nuevo fichero. De este modo, obtendríamos un nuevo fichero que sería el mismo que teníamos pero sin el registro que queríamos borrar. Por tanto, si se prevé que se va a borrar en el fichero, no es recomendable usar un fichero de este tipo, o sea, secuencial.</p></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id42">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta42_54" class="block" style="display:block;position:relative"><p><strong>Señala si es verdadera o es falsa la siguiente afirmación:</strong></p></div><div class="question">
<div id="taquestion0b42" class="block" style="display:block;position:relative"><p>Para encontrar una información almacenada en la mitad de un fichero secuencial, podemos acceder directamente a esa posición sin pasar por los datos anteriores a esa información. ¿Verdadero o Falso?</p></div>Verdadero <input type="radio" name="option0b42" id="true0b42" onclick="getFeedback(0,2,&#39;0b42&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b42" id="false0b42" onclick="getFeedback(1,2,&#39;0b42&#39;,&#39;truefalse&#39;)">
<div id="s0b0b42" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> <p>Se ha de recorrer el fichero desde el principio.</p></div>
<div id="s1b0b42" class="feedback" style="display: none;"><strong>¡Correcto! </strong> <p>Se ha de recorrer el fichero desde el principio.</p></div>
<noscript><div class="feedback"><strong>Falso</strong> <p>Se ha de recorrer el fichero desde el principio.</p></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.5.- Acceso aleatorio.</h1></div>
<div class="FreeTextfpdIdevice" id="id43">
<div class="iDevice emphasis0">
<div id="ta43_73" class="block" style="display:block;position:relative"><p><img alt="Fichas en un archivador." class="elemento_derecha" src="./PROG_T7_files/PROG08_CONT_R22_fich.JPG" title="Fichas."></p>
<p>A veces no necesitamos leer un fichero de principio a fin, sino acceder al fichero como si fuera una base de datos, donde se accede a un registro concreto del fichero. Java proporciona la clase RandomAccessFile para este tipo de entrada/salida.</p>
<p>La clase RandomAccessFile permite utilizar un fichero de <strong>acceso aleatorio</strong> en el que el programador define el formato de los registros.</p>
<div class="codigo elemento_centrado" style="width: 40.1em;">
<div class="texto_izquierda">
<pre>RandomAccessFile objFile = new RandomAccessFile( ruta, modo );
</pre>
</div>
</div>
<p>Donde ruta es la dirección física en el sistema de archivos y modo puede ser:</p>
<ul class="lista_verificacion">
<li>"r" para sólo lectura.</li>
<li>"rw" para lectura y escritura.</li>
</ul>
<p>La clase RandomAccessFile implementa los interfaces DataInput y <code>DataOutput</code>. Para abrir un archivo en modo lectura haríamos:</p>
<div class="codigo elemento_centrado" style="width: 39.55em;">
<div class="texto_izquierda">
<pre>RandomAccessFile in = new RandomAccessFile(“input.dat”, “r”);
</pre>
</div>
</div>
<p>Para abrirlo en modo lectura y escritura:</p>
<div class="codigo elemento_centrado" style="width: 41.75em;">
<div class="texto_izquierda">
<pre>RandomAccessFile inOut = new RandomAccessFile(“input.dat”, “rw”);
</pre>
</div>
</div>
<p>Esta clase permite leer y escribir sobre el fichero, no se necesitan dos clases diferentes.</p>
<p>Hay que especificar el modo de acceso al construir un objeto de esta clase: sólo lectura o lectura/escritura.</p>
<p>Dispone de métodos específicos de desplazamiento como seek y <code>skipBytes</code> para poder moverse de un registro a otro del fichero, o posicionarse directamente en una posición concreta del fichero.</p>
<p>No está basada en el concepto de flujos o <span lang="en">streams</span>.</p>
<p>En la siguiente presentación vemos cómo crear un fichero, cómo podemos acceder, y actualizar información en él.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " ficheros="" de="" acceso="" aleatorio.""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_presentacion_FicherosAccesoAleatorio.html">Resumen textual alternativo</a></div>
</div></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id44">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta44_54" class="block" style="display:block;position:relative"><p>
<strong>Indica si es verdadera o es
falsa la siguiente afirmación:</strong>
</p>
</div><div class="question">
<div id="taquestion0b44" class="block" style="display:block;position:relative"><p>
Para decirle el modo de lectura y escritura a un
objeto RandomAccessFile debemos pasar como
parámetro "rw". ¿Verdadero o Falso? 
</p>
</div>Verdadero <input type="radio" name="option0b44" id="true0b44" onclick="getFeedback(0,2,&#39;0b44&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b44" id="false0b44" onclick="getFeedback(1,2,&#39;0b44&#39;,&#39;truefalse&#39;)">
<div id="s0b0b44" class="feedback" style="display: none;"><strong>¡Correcto! </strong> Esos son los parámetros
para el modo lectura y escritura.
</div>
<div id="s1b0b44" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> Esos son los parámetros
para el modo lectura y escritura.
</div>
<noscript><div class="feedback"><strong>Verdadero</strong> Esos son los parámetros
para el modo lectura y escritura.
</div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
6.- Aplicaciones del almacenamiento de información en ficheros.</h1></div>
<div class="CasopracticofpdIdevice" id="id46">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta46_66" class="block" style="display:block;position:relative"><p><strong><img class="elemento_izquierda" src="./PROG_T7_files/CASO_PERSONAJES_08.jpg" alt="Primer plano de Antonio, mirando hacia el frente." title="Antonio mirando hacia el frente.">Antonio </strong>ha quedado con <strong>Ana</strong> para estudiar sobre el tema de ficheros. De camino a la biblioteca, <strong>Ana</strong> le pregunta a <strong>Antonio</strong>:</p>
<p><span class="st">—</span>¿Crees que los ficheros se utilizan realmente, o ya están desfasados y sólo se utilizan las bases de datos?</p>
<p><strong>Antonio</strong>, tras pensarlo un momento, le dice a <strong>Ana</strong>:</p>
<p><span class="st">—</span>Yo creo que sí, piensa en el <acronym title="MPEG-2 Audio Layer III">mp3</acronym> que usas muchas veces, la música va grabada en ese tipo de ficheros.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id47">
<div class="iDevice emphasis0">
<div id="ta47_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R25_XML.png" alt="Contenido de un archivo XML." title="XML" style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="Dreftymac" href="https://es.wikipedia.org/wiki/Archivo:XML.svg" target="_blank">Dreftymac</a></div>
</div>
<p>¿Has pensado la <strong>diversidad de ficheros</strong> que existe, según la información que se guarda?</p>
<p>Las fotos que haces con tu cámara digital, o con el móvil, se guardan en ficheros. Así, existe una gran cantidad de ficheros de imagen, según el método que usen para guardar la información. Por ejemplo, tenemos los ficheros de extensión: .jpg, .tiff, gif, .bmp, etc.</p>
<p>La música que oyes en tu mp3 o en el reproductor de mp3 de tu coche, está almacenada en ficheros que almacenan la información en formato mp3.</p>
<p>Los sistemas operativos, como Linux, Windows, etc., están constituidos por un montón de instrucciones e información que se guarda en ficheros.</p>
<p>El propio código fuente de los lenguajes de programación, como Java, C, etc., se guarda en ficheros de texto plano la mayoría de veces.</p>
<p>También se guarda en ficheros las películas en formato .<acronym title="Audio Video Interleave.">avi</acronym>, .mp4, etc.</p>
<p>Y por supuesto, se usan mucho actualmente los ficheros <acronym title="Extensible Markup Language.">XML</acronym>, que al fin y al cabo son ficheros de texto plano, pero que siguen una estructura determinada. XML se emplea mucho para el intercambio de información estructurada entre diferentes plataformas.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id48">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta48_47" class="block" style="display:block;position:relative"><p>En el siguiente enlace a la wikipedia puedes saber más sobre el formato Mp3.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a la información sobre el Formato mp3." href="http://es.wikipedia.org/wiki/MP3">Formato mp3.</a></p>
<p class="enlace_centrado"><a class="html" title="Acceder a la información sobre el Formato flac." href="http://es.wikipedia.org/wiki/Free_Lossless_Audio_Codec">Formato flac</a>.</p></div></div>
</div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id49">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta49_54" class="block" style="display:block;position:relative"><p>
<strong>Indica si es verdadera o falsa
la siguiente afirmación:</strong>
</p>
</div><div class="question">
<div id="taquestion0b49" class="block" style="display:block;position:relative">Un fichero .bmp guarda información de música
codificada.&nbsp; ¿Verdadero o falso?
</div>Verdadero <input type="radio" name="option0b49" id="true0b49" onclick="getFeedback(0,2,&#39;0b49&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b49" id="false0b49" onclick="getFeedback(1,2,&#39;0b49&#39;,&#39;truefalse&#39;)">
<div id="s0b0b49" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> Se trata de una imagen, mp3
sería un ejemplo de fichero para guardar música. &nbsp;
</div>
<div id="s1b0b49" class="feedback" style="display: none;"><strong>¡Correcto! </strong> Se trata de una imagen, mp3
sería un ejemplo de fichero para guardar música. &nbsp;
</div>
<noscript><div class="feedback"><strong>Falso</strong> Se trata de una imagen, mp3
sería un ejemplo de fichero para guardar música.  
</div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.- Utilización de los sistemas de ficheros.</h1></div>
<div class="CasopracticofpdIdevice" id="id50">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta50_66" class="block" style="display:block;position:relative"><p><img alt="Primer plano de Ana, mirando hacia el frente." class="elemento_izquierda" src="./PROG_T7_files/CASO_PERSONAJES_03.jpg" style="width: 192px; height: 150px; float: left;" title="Ana mirando hacia el frente. " height="150" width="192"></p>
<p><strong>Ana </strong>está estudiando en la biblioteca, junto a <strong>Antonio</strong>. Está repasando lo que le explicaron en clase sobre las operaciones relativas a ficheros en Java. En concreto, está mirando lo relativo a crear carpetas o directorios, listar directorios, borrarlos, operar en definitiva con ellos. Va a repasar ahora en la biblioteca, para tener claros los conceptos y cuando llegue de vuelta a casa, probar a compilar algunos ejemplos que a ella misma se le ocurran.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id51">
<div class="iDevice emphasis0">
<div id="ta51_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R27_carpeta.jpg" alt="Trazo representando una carpeta." title="Carpeta." style="float: right;" width="160" height="160"></div>
<div class="elemento_centrado credenciales"><a class="cc-by" title="CC by" href="http://creativecommons.org/licenses/by/3.0/deed.es" target="_blank"><span class="transparente">CC by</span></a> <a title="Tim Morgan" href="https://www.flickr.com/photos/timothymorgan/75288579/" target="_blank">Tim Morgan</a></div>
</div>
<p>Has visto en los apartados anteriores cómo operar en ficheros: abrirlos, cerrarlos, escribir en ellos, etc.</p>
<p>Lo que no hemos visto es lo relativo a crear y borrar directorios o por ejemplo poder filtrar archivos, es decir, buscar sólo aquellos que tengan determinada característica, por ejemplo, que su extensión sea: .<acronym title="Texto.">txt</acronym>.</p>
<p>Ahora veremos cómo hacer estas cosas, y también cómo borrar ficheros, y crearlos, aunque crearlos ya lo hemos visto en algunos ejemplos anteriores.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id52">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta52_47" class="block" style="display:block;position:relative"><p>Accediendo a este enlace, tendrás una visión detallada sobre la organización de ficheros.</p>
<p class="enlace_centrado"><a class="html" title="Organización de ficheros." href="http://www.um.es/docencia/barzana/IAGP/Iagp7.html">Organización de Ficheros y Métodos de Enlace</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.1.- Clase File.</h1></div>
<div class="FreeTextfpdIdevice" id="id53">
<div class="iDevice emphasis0">
<div id="ta53_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R28_ruta66.jpg" alt="Carretera estadounidense con el suelo indicando ruta 66." title="Ruta 66." style="float: right;"></div>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="Vicente Villamón" href="https://www.flickr.com/photos/villamon/4436497726/" target="_blank">Vicente Villamón</a></div>
</div>
<p><strong>La clase File proporciona una representación abstracta de ficheros y directorios.</strong></p>
<p>Esta clase, permite examinar y manipular archivos y directorios, independientemente de la plataforma en la que se esté trabajando: Linux, Windows, etc.</p>
<p>Las instancias de la clase File representan nombres de archivo, no los archivos en sí mismos.</p>
<p>El archivo correspondiente a un nombre dado podría ser que no existiera, por ello, habrá que controlar las posibles excepciones.</p>
<p>Al trabajar con File, las rutas pueden ser:</p>
<ul class="lista_verificacion">
<li>Relativas al directorio actual.</li>
<li>Absolutas si la ruta que le pasamos como parámetro empieza por
<ul>
<li>La barra "/" en Unix, Linux.</li>
<li>Letra de unidad (C:, D:, etc.) en Windows.</li>
<li><acronym title="universal naming convention">UNC</acronym>(universal naming convention) en windows, como por ejemplo:</li>
</ul>
</li>
</ul>
<div class="codigo elemento_centrado" style="width: 39em;">
<div class="texto_izquierda">
<pre>File miFile=new File("\\\\mimaquina\\download\\prueba.txt");
</pre>
</div>
</div>
<p>A través del objeto File, un programa puede examinar los atributos del archivo, cambiar su nombre, borrarlo o cambiar sus permisos. Dado un objeto de la clase File, podemos hacer las siguientes operaciones con él:</p>
<ul class="lista_verificacion">
<li><strong>Renombrar</strong> el archivo, con el método renameTo(). El objeto File dejará de referirse al archivo renombrado, ya que el String con el nombre del archivo en el objeto File no cambia.</li>
<li><strong>Borrar</strong> el archivo, con el método delete(). También, con deleteOnExit() se borra cuando finaliza la ejecución de la máquina virtual Java.</li>
<li><strong>Crear</strong> un nuevo fichero con un nombre único. El método estático createTempFile() crea un fichero temporal y devuelve un objeto File que apunta a él. Es útil para crear archivos temporales, que luego se borran, asegurándonos tener un nombre de archivo no repetido.</li>
<li><strong>Establecer</strong> la fecha y la hora de modificación del archivo con setLastModified(). Por ejemplo, se podría hacer: new File("prueba.txt").setLastModified(new Date().getTime()); para establecerle la fecha actual al fichero que se le pasa como parámetro, en este caso <em>prueba.txt</em>.</li>
<li><strong>Crear</strong> un directorio con el método mkdir(). También existe mkdirs(), que crea los directorios superiores si no existen.</li>
<li><strong>Listar</strong> el contenido de un directorio. Los métodos list() y <code>listFiles()</code> listan el contenido de un directorio list() devuelve un vector de String con los nombres de los archivos, listFiles() devuelve un vector de objetos File.</li>
<li><strong>Listar</strong> los nombres de archivo de la raíz del sistema de archivos, mediante el método estático listRoots().</li>
</ul></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id54">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta54_54" class="block" style="display:block;position:relative"><p><strong>Indica si es verdadera o falsa la siguiente afirmación:</strong></p></div><div class="question">
<div id="taquestion0b54" class="block" style="display:block;position:relative"><p>Un objeto de la clase File representa un fichero en sí mismo.</p></div>Verdadero <input type="radio" name="option0b54" id="true0b54" onclick="getFeedback(0,2,&#39;0b54&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b54" id="false0b54" onclick="getFeedback(1,2,&#39;0b54&#39;,&#39;truefalse&#39;)">
<div id="s0b0b54" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> <p>En efecto, representa un nombre de archivo y no el archivo en sí mismo.</p></div>
<div id="s1b0b54" class="feedback" style="display: none;"><strong>¡Correcto! </strong> <p>En efecto, representa un nombre de archivo y no el archivo en sí mismo.</p></div>
<noscript><div class="feedback"><strong>Falso</strong> <p>En efecto, representa un nombre de archivo y no el archivo en sí mismo.</p></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.2.- Interface FilenameFilter.</h1></div>
<div class="FreeTextfpdIdevice" id="id55">
<div class="iDevice emphasis0">
<div id="ta55_73" class="block" style="display:block;position:relative"><div class="elemento_izquierda">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R29_filtro.jpg" alt="Escurridor metálico." title="Filtro metálico."></div>
<div class="elemento_centrado credenciales"><a class="cc-by-nc-sa" title="CC by-nc-sa" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-nc-sa</span></a> <a title="Pau Bou" href="http://www.flickr.com/photos/paubou/2516489783/" target="_blank">Pau Bou</a></div>
</div>
<p>En ocasiones nos interesa ver la lista de los archivos que encajan con un determinado criterio.</p>
<p>Así, nos puede interesar un filtro para ver los ficheros modificados después de una fecha, o los que tienen un tamaño mayor del que indiquemos, etc.</p>
<p>El interface FilenameFilter se puede usar para crear filtros que establezcan criterios de filtrado relativos al nombre de los ficheros. Una clase que lo implemente debe definir e implementar el método:</p>
<div class="codigo elemento_centrado" style="width: 27.45em;">
<div class="texto_izquierda">
<pre>boolean accept(File dir, String nombre)
</pre>
</div>
</div>
<p>Este método devolverá verdadero (true), en el caso de que el fichero cuyo nombre se indica en el parámetro nombre aparezca en la lista de los ficheros del directorio indicado por el parámetro dir.</p>
<p>En el siguiente ejemplo vemos cómo se listan los ficheros de la carpeta c:\datos que tengan la extensión .odt. Usamos try y <code>catch</code> para capturar las posibles excepciones, como que no exista dicha carpeta.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R29_01_codfiltro.jpg"><img alt="Imagen del código Java para filtrar ficheros en una carpeta llamada datos, del disco duro." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R29_01_codfiltro_miniatura.jpg" style="width: 192px; height: 160px;" title="Filtro de ficheros."></a></div>
</div>
<p class="enlace_centrado"><a class="paquete" title="Descargar proyecto Java para filtrar. [zip – 32KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/Filtro.zip">Filtrar ficheros.</a> <span class="tamano">(32.00 KB)</span></p></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id56">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta56_54" class="block" style="display:block;position:relative"><p>
<strong>Indica si la siguiente
afirmación es verdadera o falsa:</strong>
</p>
</div><div class="question">
<div id="taquestion0b56" class="block" style="display:block;position:relative">Una clase que implemente FileNameFilter puede o no implementar el método accept. ¿Verdadero o Falso?
</div>Verdadero <input type="radio" name="option0b56" id="true0b56" onclick="getFeedback(0,2,&#39;0b56&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b56" id="false0b56" onclick="getFeedback(1,2,&#39;0b56&#39;,&#39;truefalse&#39;)">
<div id="s0b0b56" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> En efecto,  se debe implementar siempre.
</div>
<div id="s1b0b56" class="feedback" style="display: none;"><strong>¡Correcto! </strong> En efecto,  se debe implementar siempre.
</div>
<noscript><div class="feedback"><strong>Falso</strong> En efecto,  se debe implementar siempre.
</div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.3.- Creación y eliminación de ficheros y directorios.</h1></div>
<div class="FreeTextfpdIdevice" id="id57">
<div class="iDevice emphasis0">
<div id="ta57_73" class="block" style="display:block;position:relative"><p>Podemos <strong>crear un fichero</strong> del siguiente modo:</p>
<ul class="lista_verificacion">
<li>Creamos el objeto que encapsula el fichero, por ejemplo, suponiendo que vamos a crear un fichero llamado miFichero.txt, en la carpeta C:\prueba, haríamos:
<div class="codigo elemento_centrado" style="width: 35.15em;">
<div class="texto_izquierda">
<pre>File fichero = new File("c:\\prueba\\miFichero.txt");
</pre>
</div>
</div>
</li>
<li>A partir del objeto File  creamos el fichero físicamente, con la siguiente instrucción, que devuelve un boolean con valor true si se creó correctamente, o false si no se pudo crear:
<div class="codigo elemento_centrado" style="width: 18.65em;">
<div class="texto_izquierda">
<pre>fichero.createNewFile()
</pre>
</div>
</div>
</li>
</ul>
<p>Para <strong>borrar un fichero</strong>, podemos usar la clase File, comprobando previamente si existe, del siguiente modo:</p>
<ul class="lista_verificacion">
<li>Fijamos el nombre de la carpeta y del fichero con:
<div class="codigo elemento_centrado" style="width: 34.6em;">
<div class="texto_izquierda">
<pre>File fichero = new File("C:\\prueba", "agenda.txt");
</pre>
</div>
</div>
</li>
<li>Comprobamos si existe el fichero con exists() y si es así lo borramos con:
<div class="codigo elemento_centrado" style="width: 15.35em;">
<div class="texto_izquierda">
<pre>if (fichero.exists())&lt;br /&gt;    fichero.delete();
</pre>
</div>
</div>
</li>
</ul>
<p>Para <strong>crear directorios</strong>, podríamos hacer lo siguiente (se crea un directorio en la unidad C, en la raíz, y también tres carpetas en la carpeta del proyecto):</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_CONT_R30_crearcarpetas.jpg"><img alt="Imagen del código Java para crear carpetas." class="imagen_ampliable" src="./PROG_T7_files/PROG08_CONT_R30_crearcarpetas_miniatura.jpg" style="width: 160px; height: 160px;" title="Crear carpetas."></a></div>
</div>
<p class="enlace_centrado"><a class="paquete" title="Descargar código Java para crear carpetas. [zip – 12KB] " href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/CrearCarpetas.zip">Crear directorios.</a> <span class="tamano">(12 KB)</span></p>
<p>Para <strong>borrar un directorio</strong> con Java tenemos que borrar cada uno de los ficheros y directorios que éste contenga. Al poder almacenar otros directorios, se podría recorrer recursivamente el directorio para ir borrando todos los ficheros.</p>
<p>Se puede listar el contenido del directorio con:</p>
<div class="codigo elemento_centrado" style="width: 28.55em;">
<div class="texto_izquierda">
<pre>File[] ficheros = directorio.listFiles();
</pre>
</div>
</div>
<p>y entonces poder ir borrando. Si el elemento es un directorio, lo sabemos mediante el método isDirectory,</p></div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.- Almacenamiento de objetos en ficheros. Persistencia. Serialización.</h1></div>
<div class="CasopracticofpdIdevice" id="id58">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta58_66" class="block" style="display:block;position:relative"><p><img alt="María sentada, trabajando escribiendo con un ordenador, mirando a la pantalla y tecleando." class="elemento_izquierda" src="./PROG_T7_files/EIN_JYM_Caso_MariaOrdenador_FOT.jpg" style="width: 200px; height: 140px; float: left;" title="María trabajando. " width="200" height="140"></p>
<p>Para la aplicación de la clínica veterinaria <strong>María </strong>le propone a <strong>Juan</strong> emplear un fichero para guardar los datos de los clientes de la clínica.</p>
<p><span class="st">—</span>Como vamos a guardar datos de la clase Cliente, tendremos que serializar los datos.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id59">
<div class="iDevice emphasis0">
<div id="ta59_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T7_files/PROG08_CONT_R32_tron.jpg" alt="Motos azul yroja haciendo una carrera en el ciberespacio." title="Motos cibernéticas."></div>
<div class="elemento_centrado credenciales"><a class="cc-by" title="CC by" href="http://creativecommons.org/licenses/by/3.0/deed.es" target="_blank"><span class="transparente">CC by</span></a> <a title="Ballistik Coffee Boy" href="https://www.flickr.com/photos/spaceageboy/3357268635/in/photostream/" target="_blank">Ballistik Coffee Boy</a></div>
</div>
<p>¿Qué es la <strong>serialización</strong>? Es un proceso por el que <strong>un objeto se convierte en una secuencia de bytes</strong> con la que más tarde se podrá reconstruir el valor de sus variables. Esto permite guardar un objeto en un archivo.</p>
<p>Para serializar un objeto:</p>
<ul class="lista_verificacion">
<li>Este objeto debe <strong>implementar el interface </strong>java.io.Serializable. Este interface no tiene métodos, sólo se usa para informar a la <acronym title="Java Virtual Machine" lang="en">JVM</acronym> (Java <span lang="en">Virtual Machine</span>) que un objeto va a ser serializado.</li>
<li>Todos los objetos incluidos en él tienen que implementar el interfaz Serializable.</li>
</ul>
<p>Todos los <strong>tipos primitivos en Java son serializables</strong> por defecto. (Al igual que los arrays y otros muchos tipos estándar).</p>
<p>Para leer y escribir objetos serializables a un <span lang="en">stream</span> se utilizan las clases java: ObjectInputStream y <code>ObjectOutputStream</code>.</p>
<p>En el siguiente ejemplo se puede ver cómo leer un objeto serializado que se guardó antes. En este caso, se trata de un String serializado:</p>
<div class="codigo elemento_centrado" style="width: 35.7em;">
<div class="texto_izquierda">
<pre>FileInputStream fichero = new FileInputStream(“str.out”);
</pre>
<pre>ObjectInputStream objetostream = new ObjectInputStream(fichero);
</pre>
<pre>Object objeto = &lt;code&gt;objetostream.readObject();
</pre>
</div>
</div>
<p>Así vemos que readObject lee un objeto desde el flujo de entrada fichero. Cuando se leen objetos desde un flujo, se debe tener en cuenta qué tipo de objetos se esperan en el flujo, y se han de leer en el mismo orden en que se guardaron.</p>
<p>Una cuestión importante a tener en cuenta en una clase serializable es declarar un atributo que se debe llamar: serialVersionUID y que debemos definir como static, <code>final</code> y de tipo long. Oracle <span id="result_box" lang="es"><span class="hps">recomienda encarecidamente</span> <span class="hps">que toda clase</span> <span class="hps">serializable</span> <span class="hps">declare</span> <span class="hps">explícitamente</span> un valor <span class="hps">serialVersionUID</span><span>,</span> <span class="hps">para evitar </span><span class="hps">InvalidClassExceptions</span> <span class="hps">inesperados durante</span> <span class="hps">la deserialización. Ta</span><span class="hps">mbién</span> <span class="hps">se recomienda encarecidamente</span> <span class="hps">que las declaraciones</span> <span class="hps">explícitas</span> <span class="hps">serialVersionUID</span> <span class="hps">utilicen el</span> <span class="hps">modificador</span> <span class="hps">private</span> <span class="hps">siempre que sea posible.</span></span></p>
<p><span lang="es"><span class="hps">Así, por ejemplo, en una clase serializable, tendremos:</span></span></p>
<p style="text-align: center;"><span lang="es"><span class="hps">private static final long serialVersionUID = 42L;</span></span></p></div></div>
</div>
<div class="VerdaderofalsofpdIdevice" id="id60">
<script type="text/javascript" src="./PROG_T7_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T7_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div id="ta60_54" class="block" style="display:block;position:relative"><p>
<strong>Indica si es verdadera o falsa
la siguiente afirmación:</strong>
</p>
</div><div class="question">
<div id="taquestion0b60" class="block" style="display:block;position:relative">Para serializar un fichero basta con implementar
el interface Serializable. ¿Verdadero o falso?
</div>Verdadero <input type="radio" name="option0b60" id="true0b60" onclick="getFeedback(0,2,&#39;0b60&#39;,&#39;truefalse&#39;)"> 
Falso <input type="radio" name="option0b60" id="false0b60" onclick="getFeedback(1,2,&#39;0b60&#39;,&#39;truefalse&#39;)">
<div id="s0b0b60" class="feedback" style="display: none;"><strong>¡Incorrecto! </strong> Debemos asegurarnos también
de que todos los objetos incluidos en él implementen el interface Serializable.
</div>
<div id="s1b0b60" class="feedback" style="display: none;"><strong>¡Correcto! </strong> Debemos asegurarnos también
de que todos los objetos incluidos en él implementen el interface Serializable.
</div>
<noscript><div class="feedback"><strong>Falso</strong> Debemos asegurarnos también
de que todos los objetos incluidos en él implementen el interface Serializable.
</div></noscript>
</div>
</div>
</div>
</div>
<div class="ParasabermasfpdIdevice" id="id61">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta61_47" class="block" style="display:block;position:relative"><p>En los siguientes enlaces, puedes ver un poco más sobre serialización.</p>
<div class="enlace_centrado"><a class="pdf" title="Acceder al documento de serialización. [pdf – 53,3KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/p5.dvi.pdf">Serialización en Java.</a> <span class="tamano"> (154 KB) </span></div>
<div class="enlace_centrado"><a class="pdf" title="Acceder al otro documento de serialización. [pdf – 284KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/capsula_serializable.pdf">Más sobre serialización en Java.</a> <span class="tamano"> (284 KB) </span></div>
<div class="enlace_centrado"><span class="tamano"> </span></div>
<p>En el siguiente enlace puedes ver la documentación de Oracle sobre Serializable, y entre otras cosas se puede ver lo que hemos dicho sobre <span id="result_box" lang="es"><span class="hps">serialVersionUID</span></span>:</p>
<p style="text-align: center;"><a class="html" title="Acceso a interface Serializable" href="http://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html">Interface Serializable</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.1.- Serialización: utilidad.</h1></div>
<div class="FreeTextfpdIdevice" id="id62">
<div class="iDevice emphasis0">
<div id="ta62_73" class="block" style="display:block;position:relative"><p><img alt="Letras en rojo en las que se lee serializable." class="elemento_derecha" src="./PROG_T7_files/PROG08_CONT_R33_serializable.jpg" title="Serializable."></p>
<p>La serialización en Java se desarrolló para utilizarse con <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/">RMI<span><em>RMI</em>Permite a un objeto en una máquina virtual invocar métodos de otro objeto en otra máquina virtual, posiblemente en una computadora al otro lado del planeta, enviando parámetros y devolviendo valores a través de Internet.</span></a>. <acronym title="Remote Method Invocation" lang="en">RMI</acronym> necesitaba un modo de convertir los parámetros necesarios a enviar a un objeto en una máquina remota, y también para devolver valores desde ella, en forma de flujos de bytes. Para datos primitivos es fácil, pero para objetos más complejos no tanto, y ese mecanismo es precisamente lo que proporciona la serialización.</p>
<p>El método writeObject se utiliza para guardar un objeto a través de un flujo de salida. El objeto pasado a writeObject debe implementar el interfaz Serializable.</p>
<div class="codigo elemento_centrado" style="width: 39.55em;">
<div class="texto_izquierda">
<pre>FileOutputStream fisal = new FileOutputStream(“cadenas.out”);
</pre>
<pre>ObjectOutputStream oos = new ObjectOutputStream(fisal);
</pre>
<pre>Oos.writeObject();
</pre>
</div>
</div>
<p>La serialización de objetos se emplea también en la arquitectura de componentes software <span lang="en">JavaBean</span>. Las clases bean se cargan en herramientas de construcción de software visual, como NetBeans. Con la paleta de diseño se puede personalizar el bean asignando fuentes, tamaños, texto y otras propiedades.</p>
<p>Una vez que se ha personalizado el bean, para guardarlo, se emplea la serialización: se almacena el objeto con el valor de sus campos en un fichero con extensión .ser, que suele emplazarse dentro de un fichero .jar.</p></div></div>
</div>
<div class="EjercicioresueltofpdIdevice" id="id69">
<div class="iDevice emphasis_ejercicioresueltofpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_ejercicioresueltofpd.gif">
<span class="iDeviceTitle"><strong>Ejercicio Resuelto</strong></span>
<div class="iDevice_inner">
<div id="ta69_63" class="block" style="display:block;position:relative"><p>A continuación, puedes ver el código de un ejemplo muy ilustrativo sobre serialización. Supongamos que tenemos una clase Persona, con una subclase Socio, que tiene a su vez varias subclases. Por simplificar, supondremos dos: SocioTitularFamiliar y <code>SocioTitularIndividual</code>. Ahora se me presenta la necesidad de guardar un array con socios en un fichero, para posteriormente recuperarlo, ¿cómo lo hago?</p></div><div class="question">
<div id="taquesQuestion0b69" class="block" style="display:block;position:relative"></div><div id="viewq0b69" style="display:block;"><input type="button" name="btnshowq0b69" value="Mostrar retroalimentación" class="feedbackbutton" onclick="showAnswer(&#39;q0b69&#39;,1)">
</div><div id="hideq0b69" style="display:none;"><input type="button" name="btnhideq0b69" value="Ocultar retroalimentación" class="feedbackbutton" onclick="showAnswer(&#39;q0b69&#39;,0)">
<p></p></div><div id="sq0b69" class="feedback" style=" display: none;"><div id="taquesFeedback0b69" class="block" style="display:block;position:relative"><p>Pues en primer lugar lo que tengo que asegurarme es de que la superclase, Persona, implemente el <span lang="en">interface</span> Serializable:</p>
<p>public abstract class Persona implements Serializable</p>
<p>Y ahora, podemos almacenar objetos de este tipo en fichero. Para simplificar, se pone un sencillo ejemplo, supuesto un array de únicamente dos posiciones, creamos un objeto de cada subclase que metemos en el array. Fíjate en el código, que el array se guarda "de una tacada", no hay que ir recorriéndolo y guardado cada elemento del mismo. Además, observa también que puedes guardar el array y a continuación datos de otro tipo, en el mismo fichero.</p>
<p> </p>
<div class="codigo elemento_centrado" style="width: 107.2em;">
<div class="texto_izquierda">
<pre>        // Declaramos el array de dos posiciones</pre>
<pre>        Socio[] socios = new Socio[2];</pre>
<pre> </pre>
<pre>        // Creamos un socio de un tipo</pre>
<pre>        SocioTitularFamiliar socTF = new SocioTitularFamiliar("Antonio", 25, 2, "Taxista", "50222333Q", </pre>
<pre>            "2222-3333-30-1111111111", 3, 1998, 4) ;</pre>
<pre> </pre>
<pre>        // Lo metemos al array</pre>
<pre>        socios[0] = socTF ;</pre>
<pre> </pre>
<pre>        // Creamos ahora un socio de otro tipo, de otra subclase</pre>
<pre>        SocioTitularIndividual socTI = new SocioTitularIndividual("Filomeno a mi pesar", 33, 1.3f, "Bombero", "22333444F", </pre>
<pre>            "2222-3333-30-1111111111", 2, 2001) ;</pre>
<pre> </pre>
<pre>        // Lo metemos al array también</pre>
<pre>        socios[1] = socTI ;</pre>
<pre> </pre>
<pre>        // Recorro el array para comprobar que todo va bien</pre>
<pre>        int contador ;</pre>
<pre>        Socio socio ;</pre>
<pre>        for (contador= 0; contador &lt; socios.length; contador++) {</pre>
<pre>            socio = socios[contador] ;</pre>
<pre>            if (socio instanceof SocioTitularFamiliar)</pre>
<pre>                ES.msgln("El de la posición " + contador + " es familiar");</pre>
<pre>            else</pre>
<pre>                ES.msgln("El de la posición " + contador + " no es familiar");</pre>
<pre>        }</pre>
<pre> </pre>
<pre> </pre>
<pre>        // Ahora pruebo a escribir el array en un fichero de disco</pre>
<pre>        try{</pre>
<pre>            // Abrir fichero para escribir en el, en la ruta que me interesa</pre>
<pre>            FileOutputStream fichero = new FileOutputStream(new File (GestionSocios.rutayFichero));</pre>
<pre>            ObjectOutputStream ficheroSalida;</pre>
<pre>            ficheroSalida = new ObjectOutputStream(fichero);</pre>
<pre>            // Escribo el array en el fichero</pre>
<pre>            ficheroSalida.writeObject(socios);</pre>
<pre>            // También escribo dos datos que me interesan</pre>
<pre>            ficheroSalida.writeInt(SocioTitularFamiliar.getNumeroSocios());</pre>
<pre>            ficheroSalida.writeInt(SocioTitularIndividual.getNumeroSocios());</pre>
<pre> </pre>
<pre>            // Cerramos el fichero</pre>
<pre>            ficheroSalida.close();</pre>
<pre> </pre>
<pre>            ES.msgln("El archivo " + GestionSocios.rutayFichero + " guardado con éxito...");</pre>
<pre>        }catch (FileNotFoundException fnfe){</pre>
<pre>            ES.msgln("Error: El fichero no existe. ");</pre>
<pre>        }catch (IOException ioe){</pre>
<pre>            ES.msgln("Error: falló la escritura en el fichero " + GestionSocios.rutayFichero);</pre>
<pre>         }</pre>
<pre> </pre>
<pre> </pre>
<pre> </pre>
<pre>         // Pruebo ahora a poner a null el array e intento recuperar de fichero</pre>
<pre>         socios = null ;</pre>
<pre> </pre>
<pre>         try{</pre>
<pre>             // Abrimos el fichero para lectura</pre>
<pre>             FileInputStream fichero = new FileInputStream(new File (GestionSocios.rutayFichero));</pre>
<pre>             ObjectInputStream ficheroEntrada = new ObjectInputStream(fichero) ;</pre>
<pre> </pre>
<pre>             // Recuperar el objeto array del fichero</pre>
<pre>             socios  = (Socio[]) ficheroEntrada.readObject(); </pre>
<pre> </pre>
<pre>             for (contador= 0; contador &lt; socios.length; contador++) {</pre>
<pre>                socio = socios[contador] ;</pre>
<pre>                if (socio instanceof SocioTitularFamiliar)</pre>
<pre>                    ES.msgln("El de la posición " + contador + " es familiar");</pre>
<pre>                else</pre>
<pre>                    ES.msgln("El de la posición " + contador + " no es familiar");</pre>
<pre>             }</pre>
<pre> </pre>
<pre>             // Leemos también y en el mismo orden que los guardamos, el resto de datos           </pre>
<pre>             SocioTitularFamiliar.setNumeroSocios(ficheroEntrada.readInt());</pre>
<pre>             SocioTitularIndividual.setNumeroSocios(ficheroEntrada.readInt());</pre>
<pre>             // Cerrar el fichero</pre>
<pre>            ficheroEntrada.close();</pre>
<pre>            ES.msgln("El Archivo " + GestionSocios.rutayFichero + " se ha cargado con éxito....");</pre>
<pre> </pre>
<pre>        }catch (ClassNotFoundException cnfe){</pre>
<pre>            ES.msgln("No se pudo acceder a la clase adecuada para revertir la Serialización al leer del fichero.");</pre>
<pre>        }catch (FileNotFoundException fnfe){</pre>
<pre>            ES.msgln("El fichero " + GestionSocios.rutayFichero + " no existe.");</pre>
<pre>        }catch (IOException ioe){</pre>
<pre>            ES.msgln("Error de Entrada/Salida: Falló la lectura del fichero. La aplicación sigue funcionando sin haber cargado los datos del archivo, para permitir crearlo de nuevo.");</pre>
<pre>        }</pre>
</div>
</div></div></div>
<noscript><div class="feedback">
<p><strong>Solution: </strong></p>
<p>Pues en primer lugar lo que tengo que asegurarme es de que la superclase, Persona, implemente el <span lang="en">interface</span> Serializable</code>:</p>
<p>public abstract class Persona implements Serializable</code></p>
<p>Y ahora, podemos almacenar objetos de este tipo en fichero. Para simplificar, se pone un sencillo ejemplo, supuesto un array de únicamente dos posiciones, creamos un objeto de cada subclase que metemos en el array. Fíjate en el código, que el array se guarda "de una tacada", no hay que ir recorriéndolo y guardado cada elemento del mismo. Además, observa también que puedes guardar el array y a continuación datos de otro tipo, en el mismo fichero.</p>
<p> </p>
<div class="codigo elemento_centrado" style="width: 107.2em;">
<div class="texto_izquierda">
<pre>        // Declaramos el array de dos posiciones</code></pre>
<pre>        Socio[] socios = new Socio[2];</code></pre>
<pre> </pre>
<pre>        // Creamos un socio de un tipo</code></pre>
<pre>        SocioTitularFamiliar socTF = new SocioTitularFamiliar(&quot;Antonio&quot;, 25, 2, &quot;Taxista&quot;, &quot;50222333Q&quot;, </code></pre>
<pre>            &quot;2222-3333-30-1111111111&quot;, 3, 1998, 4) ;</code></pre>
<pre> </pre>
<pre>        // Lo metemos al array</code></pre>
<pre>        socios[0] = socTF ;</code></pre>
<pre> </pre>
<pre>        // Creamos ahora un socio de otro tipo, de otra subclase</code></pre>
<pre>        SocioTitularIndividual socTI = new SocioTitularIndividual(&quot;Filomeno a mi pesar&quot;, 33, 1.3f, &quot;Bombero&quot;, &quot;22333444F&quot;, </code></pre>
<pre>            &quot;2222-3333-30-1111111111&quot;, 2, 2001) ;</code></pre>
<pre> </pre>
<pre>        // Lo metemos al array tambi&eacute;n</code></pre>
<pre>        socios[1] = socTI ;</code></pre>
<pre> </pre>
<pre>        // Recorro el array para comprobar que todo va bien</code></pre>
<pre>        int contador ;</code></pre>
<pre>        Socio socio ;</code></pre>
<pre>        for (contador= 0; contador &lt; socios.length; contador++) {</code></pre>
<pre>            socio = socios[contador] ;</code></pre>
<pre>            if (socio instanceof SocioTitularFamiliar)</code></pre>
<pre>                ES.msgln(&quot;El de la posici&oacute;n &quot; + contador + &quot; es familiar&quot;);</code></pre>
<pre>            else</code></pre>
<pre>                ES.msgln(&quot;El de la posici&oacute;n &quot; + contador + &quot; no es familiar&quot;);</code></pre>
<pre>        }</code></pre>
<pre> </pre>
<pre> </pre>
<pre>        // Ahora pruebo a escribir el array en un fichero de disco</code></pre>
<pre>        try{</code></pre>
<pre>            // Abrir fichero para escribir en el, en la ruta que me interesa</code></pre>
<pre>            FileOutputStream fichero = new FileOutputStream(new File (GestionSocios.rutayFichero));</code></pre>
<pre>            ObjectOutputStream ficheroSalida;</code></pre>
<pre>            ficheroSalida = new ObjectOutputStream(fichero);</code></pre>
<pre>            // Escribo el array en el fichero</code></pre>
<pre>            ficheroSalida.writeObject(socios);</code></pre>
<pre>            // Tambi&eacute;n escribo dos datos que me interesan</code></pre>
<pre>            ficheroSalida.writeInt(SocioTitularFamiliar.getNumeroSocios());</code></pre>
<pre>            ficheroSalida.writeInt(SocioTitularIndividual.getNumeroSocios());</code></pre>
<pre> </pre>
<pre>            // Cerramos el fichero</code></pre>
<pre>            ficheroSalida.close();</code></pre>
<pre> </pre>
<pre>            ES.msgln(&quot;El archivo &quot; + GestionSocios.rutayFichero + &quot; guardado con &eacute;xito...&quot;);</code></pre>
<pre>        }catch (FileNotFoundException fnfe){</code></pre>
<pre>            ES.msgln(&quot;Error: El fichero no existe. &quot;);</code></pre>
<pre>        }catch (IOException ioe){</code></pre>
<pre>            ES.msgln(&quot;Error: fall&oacute; la escritura en el fichero &quot; + GestionSocios.rutayFichero);</code></pre>
<pre>         }</code></pre>
<pre> </pre>
<pre> </pre>
<pre> </pre>
<pre>         // Pruebo ahora a poner a null el array e intento recuperar de fichero</code></pre>
<pre>         socios = null ;</code></pre>
<pre> </pre>
<pre>         try{</code></pre>
<pre>             // Abrimos el fichero para lectura</code></pre>
<pre>             FileInputStream fichero = new FileInputStream(new File (GestionSocios.rutayFichero));</code></pre>
<pre>             ObjectInputStream ficheroEntrada = new ObjectInputStream(fichero) ;</code></pre>
<pre> </pre>
<pre>             // Recuperar el objeto array del fichero</code></pre>
<pre>             socios  = (Socio[]) ficheroEntrada.readObject(); </code></pre>
<pre> </pre>
<pre>             for (contador= 0; contador &lt; socios.length; contador++) {</code></pre>
<pre>                socio = socios[contador] ;</code></pre>
<pre>                if (socio instanceof SocioTitularFamiliar)</code></pre>
<pre>                    ES.msgln(&quot;El de la posici&oacute;n &quot; + contador + &quot; es familiar&quot;);</code></pre>
<pre>                else</code></pre>
<pre>                    ES.msgln(&quot;El de la posici&oacute;n &quot; + contador + &quot; no es familiar&quot;);</code></pre>
<pre>             }</code></pre>
<pre> </pre>
<pre>             // Leemos tambi&eacute;n y en el mismo orden que los guardamos, el resto de datos           </code></pre>
<pre>             SocioTitularFamiliar.setNumeroSocios(ficheroEntrada.readInt());</code></pre>
<pre>             SocioTitularIndividual.setNumeroSocios(ficheroEntrada.readInt());</code></pre>
<pre>             // Cerrar el fichero</code></pre>
<pre>            ficheroEntrada.close();</code></pre>
<pre>            ES.msgln(&quot;El Archivo &quot; + GestionSocios.rutayFichero + &quot; se ha cargado con &eacute;xito....&quot;);</code></pre>
<pre> </pre>
<pre>        }catch (ClassNotFoundException cnfe){</code></pre>
<pre>            ES.msgln(&quot;No se pudo acceder a la clase adecuada para revertir la Serializaci&oacute;n al leer del fichero.&quot;);</code></pre>
<pre>        }catch (FileNotFoundException fnfe){</code></pre>
<pre>            ES.msgln(&quot;El fichero &quot; + GestionSocios.rutayFichero + &quot; no existe.&quot;);</code></pre>
<pre>        }catch (IOException ioe){</code></pre>
<pre>            ES.msgln(&quot;Error de Entrada/Salida: Fall&oacute; la lectura del fichero. La aplicaci&oacute;n sigue funcionando sin haber cargado los datos del archivo, para permitir crearlo de nuevo.&quot;);</code></pre>
<pre>        }</code></pre>
</div>
</div></div></noscript>
</div>
</div>
</div>
</div>
<div class="ParasabermasfpdIdevice" id="id63">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T7_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta63_47" class="block" style="display:block;position:relative"><p>En este enlace a puedes ver un vídeo en el que se crea una aplicación sobre serialización. No está hecha con <span lang="en">NetBeans</span>, sino con Eclipse, pero eso no presenta ningún inconveniente.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " ejemplo="" de="" aplicación="" con="" serialización="" en="" java""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100939/mod_scorm/content/0/PROG08_Descripcion_Video_SerializacionJava.html">Resumen textual alternativo</a></div>
</div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div>

</body></html>