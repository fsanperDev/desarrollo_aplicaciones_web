
<!-- saved from url=(0091)https://educacionadistancia.juntadeandalucia.es/cursos/blocks/recopila/recopila.php?id=6199 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script src="./PROG_T8_files/common.js.descarga" type="text/javascript"></script>
<script src="./PROG_T8_files/APIWrapper.js.descarga" type="text/javascript"></script>
<script src="./PROG_T8_files/SCOFunctions.js.descarga" type="text/javascript"></script>
<link href="./PROG_T8_files/base.css" type="text/css" rel="stylesheet">
<link href="./PROG_T8_files/content.css" type="text/css" rel="stylesheet">
</head>
<body>
<div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
Aplicación de estructuras de almacenamiento complejas.</h1></div>
<div class="CasopracticofpdIdevice" id="id0">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta0_66" class="block" style="display:block;position:relative"><p><img alt="Fotografía de María." class="elemento_izquierda" src="./PROG_T8_files/CASO_PERSONAJES_03.jpg" title="María." height="160" width="172"></p>
<p align="justify"><strong>Ana</strong> ha recibido un pequeño encargo de parte de su tutora, <strong>María</strong>. Se trata de que realice un pequeño programita, muy sencillo pero fundamental.</p>
<p align="justify"><span class="st">—</span>Hola <strong>Ana</strong>, hoy tengo una tarea especial para ti.</p>
<p align="justify"><span class="st">—</span>¿Sí? Estoy deseando, últimamente no hay nada que se me resista, llevo dos semanas en racha  <span class="st">—</span>comenta <strong>Ana</strong>.<acronym title="eXtensible Markup Language" lang="en"></acronym></p>
<p align="justify"><span class="st">—</span>Bueno, quizás esto se te resista un poco más, es fácil, pero tiene cierta complicación. Un cliente para el que hicimos una aplicación, nos ha dicho si podemos ayudarle. El cliente tiene una aplicación para gestionar los pedidos que recibe de sus clientes. Normalmente, recibe por correo electrónico los pedidos en un formato concreto que todos sus clientes llevan tiempo usando. El cliente suele transcribir el pedido desde el correo electrónico a la aplicación, copiando dato a dato, pero nos ha preguntado si es posible que copie todo el pedido de golpe, y que la aplicación lo procese, detectando posibles errores en el pedido.</p>
<p align="justify"><span class="st">—</span>¿Qué? <span class="st">—</span>dice <strong>María</strong> con cierta perplejidad.</p>
<p align="justify"><span class="st">—</span>Me alegra que te guste, sé que  los retos te resultan estimulantes.</p>
<p align="justify"><span class="st">—</span>Pero, ¿eso cómo se hace? ¿Cómo proceso yo el pedido?</p>
<p align="justify"><span class="st">—</span>No, mujer, se trata de comprobar si el pedido tiene el formato correcto, y transformarlo de forma que se genere un documento <acronym title="eXtensible Markup Language" lang="en">XML</acronym> con los datos del pedido. Un documento <acronym title="eXtensible Markup Language" lang="en">XML</acronym> luego se puede incorporar fácilmente a los otros pedidos que tenga el cliente en su base de datos. De la verificación de si hay algún producto que no existe, o de si hay alguna incoherencia en el pedido se encargá otra parte del software, que ya he realizado yo.</p>
<p align="justify"><span class="st">—</span>Bueno <span class="st">—</span>dice <strong>María</strong> justo después de resoplar tres veces seguidas<span class="st">—</span>, empieza por contarme qué es el formato  <acronym title="eXtensible Markup Language" lang="en">XML</acronym>.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id1">
<div class="iDevice emphasis0">
<div id="ta1_73" class="block" style="display:block;position:relative"><p><img alt="magen de las manos de una persona insertando datos en el ordenador a través del teclado." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R001_teclado.jpg" title="Tecleando datos en el ordenador." height="140" width="196"></p>
<p align="justify">Cuando el volumen de datos a manejar por una aplicación es elevado, no basta con utilizar variables. Manejar los datos de un único pedido en una aplicación puede ser relativamente sencillo, pues un pedido está compuesto por una serie de datos y eso simplemente se traduce en varias variables. Pero, ¿qué ocurre cuando en una aplicación tenemos que gestionar varios pedidos a la vez?</p>
<p align="justify">Lo mismo ocurre en otros casos. Para poder realizar ciertas aplicaciones se necesita poder manejar datos que van más allá de meros <strong>datos simples</strong> (números y letras). A veces, los datos que tiene que manejar la aplicación son <strong>datos compuestos</strong>, es decir, datos que están compuestos a su vez de varios datos más simples. Por ejemplo, un pedido está compuesto por varios datos, que podrían ser el cliente que hace el pedido, la dirección de entrega, la fecha requerida de entrega y los artículos del pedido.</p>
<p align="justify">Los datos compuestos son un tipo de estructura de datos, y en realidad ya los has manejado. <strong>Las clases son un ejemplo de estructuras de datos que permiten almacenar datos compuestos</strong>, y el objeto en sí, la instancia de una clase, sería el dato compuesto. Pero, a veces, los datos tienen estructuras aún más complejas, y son necesarias soluciones adicionales.</p>
<p align="justify">Aquí podrás aprender esas soluciones adicionales. Esas soluciones consisten básicamente en la capacidad de poder manejar varios datos del mismo o diferente tipo de forma dinámica y flexible.</p></div></div>
</div>
<div class="DestacadofpdIdevice" id="id124">
<div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta124_70" class="block" style="display:block;position:relative"><div align="center"><span style="font-size: large;"><strong><img src="./PROG_T8_files/Junta_Andalucia3.jpg" alt="Logotipo de la Junta de Andalucía." title="Logotipo de la Junta de Andalucía."><img src="./PROG_T8_files/by-nc-sa.eu_petit.png" alt="Derechos de los materiales." title="Derechos de los materiales." style="float: right;"></strong></span>
<div style="text-align: center;" align="right"><span style="font-size: large;"><strong>Materiales actualizados por el profesorado de la Junta de Andalucía.</strong></span></div>
<p style="text-align: center;"><a title="Acceder al Aviso legal para los materiales formativos de FP en línea." href="http://es.creativecommons.org/blog/licencias/">Aviso Legal</a></p>
</div>
<div align="center"><img alt="Logotipo del Ministerio de Educación, Cultura y Deporte. Junto a una banda vertical que representa esquemáticamente la bandera de Europa y otra que representa la bandera de España, aparece el escudo de España, y el texto: Gobierno de España. Ministerio de Educación, Cultura y Deporte." src="./PROG_T8_files/web-web-EducacionCulturaYDeporte-_63px.jpg" style="height: 63px; width: 261px; display: block; margin-left: auto; margin-right: auto;" title="Logotipo del Ministerio de Educación, Cultura y Deporte." height="63" width="261"></div>
<div align="center"><span style="font-size: large;"><strong>Materiales formativos de <acronym title="Formación Profesional.">FP</acronym> <span lang="en">Online</span> propiedad del Ministerio de Educación, Cultura y Deporte.</strong></span></div>
<div align="center"><a title="Acceder al Aviso legal para los materiales formativos de FP Online del MECD." href="http://www.educacion.gob.es/fponline/aviso-legal.html">Aviso Legal</a></div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
1.- Clases y métodos genéricos (I).</h1></div>
<div class="CasopracticofpdIdevice" id="id53">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta53_66" class="block" style="display:block;position:relative"><p><img alt="Imagen que muestra varios puestos de trabajo." class="elemento_izquierda" src="./PROG_T8_files/PROG09_CONT_R024_puestodetrabajo.jpg" title="Puestos de trabajo." height="144" width="192"></p>
<p><strong>María</strong> se acerca a la mesa de <strong>Ana</strong>, quiere saber cómo lo lleva:</p>
<p><span class="st">—</span>¿Qué tal? ¿Cómo vas con la tarea? <span class="st">—</span>pregunta <strong>María</strong>.</p>
<p><span class="st">—</span>Bien, creo. Mi programita ya sabe procesar el archivo de pedido y he creado un par de clases para almacenar los datos de forma estructurada para luego hacer el volcado <acronym title="eXtensible Markup Language" lang="en">XML</acronym>, pero no sé cómo almacenar los artículos del pedido, porque son varios <span class="st">—</span>comenta <strong>Ana</strong>.</p>
<p><span class="st">—</span>Pero, ¿cuál es el problema? Eso es algo sencillo.</p>
<p><span class="st">—</span>Pues que tengo que crear un <span lang="en">array</span> para guardar en él los artículos del pedido, y no sé cómo averiguar el número de artículos antes de empezar a procesarlos. Es necesario saber el número de artículos para crear el <span lang="en">array</span> del tamaño adecuado.</p>
<p><span class="st">—</span>Pues en vez de utilizar un <span lang="en">array</span>, podrías utilizar <strong>una lista</strong>. Java proporciona maneras muy flexibles de solucionar esto, usando "genéricos" como por ejemplo ArrayList.</p>
<p><span class="st">—Suena bien. </span>Tendré que informarme y probarlo.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id54">
<div class="iDevice emphasis0">
<div id="ta54_73" class="block" style="display:block;position:relative"><p><img alt="Imagen que muestra una taza con el texto “Taza &lt;T&gt;” escrito encima." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R025_tazajavagenerica.jpg" style="width: 172px; height: 160px;" title="Taza java genérica, rellénala de lo que quieras, mucho más que solo para café." width="172" height="160"></p>
<p>¿Sabes por qué se suele aprender el uso de los genéricos? Pues porque se necesita para usar las listas, aunque realmente <strong>los genéricos son una herramienta muy potente y que nos puede ahorrar tareas de programación repetitivas</strong>.</p>
<p><strong>Las clases y los métodos genéricos</strong> son un recurso de programación disponible en muchos lenguajes. Su objetivo es claro: facilitar la reutilización del software, creando métodos y clases que puedan trabajar con diferentes tipos de objetos, evitando incómodas y engorrosas conversiones de tipos. Su inicio se remonta a las <strong>plantillas (<span lang="en">templates</span>) de <acronym title="C plus plus" lang="en">C++</acronym>,</strong> un gran avance en el mundo de programación sin duda. En lenguajes de más alto nivel como <span lang="en">Java</span> o <abbr title="C sharp" lang="en"><span title="C sharp.">C#</span></abbr> se ha transformado en lo que se denomina <strong>"genéricos"</strong>. Veamos un ejemplo sencillo de cómo transformar un método normal en genérico:</p>
<table class="tabla" summary="Tabla en la que se muestran versiones genérica (segunda columna) y no genérica (primera columna) de un mismo método. Se trata de un método que permite comparar el tamaño de dos arrays."><caption>Versiones genérica y no genérica del método de compararTamano().</caption>
<thead>
<tr><th scope="col">Versión no genérica</th><th scope="col">Versión genérica del método</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 45.2em;">
<div class="texto_izquierda">
<pre>public class Util { </pre>
<pre>     public static int compararTamano(Object[] a, Object[] b) { </pre>
<pre>          return a.length-b.length;</pre>
<pre>     }</pre>
<pre> }</pre>
</div>
</div>
</td>
<td> 
<div class="codigo elemento_centrado" style="width: 40.1em;">
<div class="texto_izquierda">
<pre>public class Util { </pre>
<pre>     public static &lt;T&gt; int compararTamano (T[] a, T[] b) { </pre>
<pre>         return a.length-b.length; </pre>
<pre>     }</pre>
<pre>}</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>Los dos métodos anteriores tienen el mismo objetivo: permitir comprobar si un <span lang="en">array</span> es más grande que otro (su longitud es mayor). Retornarán 0 si ambos <span lang="en">arrays</span> tienen la misma longitud, un número mayor de cero si el <span lang="en">array</span> a es más grande (su longitud es mayor), y un número menor de cero si el <span lang="en">array</span> b es más grande. La diferencia está en que un de los métodos es genérico y el otro no. La versión genérica del método incluye la expresión "&lt;T&gt;", justo antes del tipo retornado por el método. "&lt;T&gt;" es la definición de una <strong>variable o parámetro formal de tipo</strong> de la clase o método genérico, al que podemos llamar simplemente <strong>parámetro de tipo o parámetro genérico</strong>. Este parámetro genérico (&lt;T&gt;) se puede usar a lo largo de todo el método o clase, dependiendo del ámbito de definición, y hará referencia a cualquier clase con la que nuestro algoritmo tenga que trabajar. Como veremos más adelante, puede haber más de un parámetro genérico.</p>
<p>Utilizar genéricos tiene claras ventajas. Para invocar un método genérico, sólo hay que realizar una <strong>invocación de tipo genérico</strong>, olvidándonos de las conversiones de tipo. Esto consiste en indicar qué clases o interfaces concretas se utilizarán en lugar de cada parámetro genérico ("&lt;T&gt;"), para después, pasándole los argumentos correspondientes, ejecutar el algoritmo. Cada clase o interfaz concreta, la podemos denominar <strong>tipo </strong>o <strong>tipo base</strong> y se da por sentado que <strong>los argumentos pasados al método genérico serán también de dicho tipo base</strong>.</p>
<p>Supongamos que el tipo base es Integer, pues para realizar la invocación del método genérico anterior basta con indicar el tipo, entre los símbolos de menor qué y mayor qué ("&lt;Integer&gt;"), justo antes del nombre del método.</p>
<table class="tabla" summary="Tabla en la que se muestran invocaciones a la versiones no genérica (primera columna) y genérica (segunda columna) de un mismo método."><caption>Invocaciones de las versiones genéricas y no genéricas de un método.</caption>
<thead>
<tr><th scope="col">Invocación del método no genérico.</th><th scope="col">Invocación del método genérico.</th></tr>
</thead>
<tbody>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 31.85em;">
<div class="texto_izquierda">
<pre>Integer[] a = {0,1,2,3,4}; </pre>
<pre>Integer[] b = {0,1,2,3,4,5}; </pre>
<pre>Util.compararTamano ((Object[])a, (Object[])b);</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 27.450000000000003em;">
<div class="texto_izquierda">
<pre>Integer[] a = {0,1,2,3,4}; </pre>
<pre>Integer[] b = {0,1,2,3,4,5}; </pre>
<pre>Util.&lt;Integer&gt;compararTamano (a, b);</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table></div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
1.1.- Clases y métodos genéricos (II).</h1></div>
<div class="FreeTextfpdIdevice" id="id55">
<div class="iDevice emphasis0">
<div id="ta55_73" class="block" style="display:block;position:relative"><p><img class="elemento_derecha" src="./PROG_T8_files/Swiss_Army_Knife_Wenger_Opened_20050627.jpg" alt="Imagen de una navaja multiusos" title="Clases y metodos genericos" height="144" width="192"></p>
<div style="text-align: right;"><a class="cc0" title="Dominio público" href="http://creativecommons.org/publicdomain/zero/1.0/deed.es" target="_blank"><span class="transparente">Dominio público</span></a> <a title="Berteun" href="http://commons.wikimedia.org/wiki/File:Swiss_Army_Knife_Wenger_Opened_20050627.jpg" target="_blank">Berteun</a></div>
<p>¿Crees qué el código es más legible al utilizar genéricos o que se complica?</p>
<p>La verdad es que al principio cuesta, pero después, el código se entiende mejor que si se empieza a insertar conversiones de tipo.</p>
<p><strong>Las clases genéricas son equivalentes a los métodos genéricos pero a nivel de clase</strong>, permiten definir un parámetro de tipo o genérico que se podrá usar a lo largo de toda la clase, facilitando así crear clases genéricas que son capaces de trabajar con diferentes tipos de datos base. Para crear una clase genérica se especifican los parámetros de tipo al lado del nombre de la clase:</p>
<div class="codigo elemento_centrado" style="width: 45.25em;">
<div class="texto_izquierda">
<pre>public class Util&lt;T&gt; {
</pre>
<pre>    T t1;
</pre>
<pre>    public void invertir(T[] array) {
</pre>
<pre>        for (int i = 0; i &lt; array.length / 2; i++) {
</pre>
<pre>            t1 = array[i];  
</pre>
<pre>            array[i] = array[array.length - 1 - i]; 
</pre>
<pre>            array[array.length - 1 &lt;code&gt;- i] = t1; 
</pre>
<pre>        }
</pre>
<pre>    }
</pre>
<pre>}
</pre>
</div>
</div>
<p>En el ejemplo anterior, la clase Util contiene el método invertir() cuya función es invertir el orden de los elementos de cualquier <span lang="en">array</span>, sea del tipo que sea. Para ello, va intercambiando entre sí el primer elemento con el último (cuando i=0),  el segundo con el penúltimo (cuando i=1), <abbr title="etcétera.">etc.</abbr>, hasta llegar a la mitad del <span lang="en">array</span>, momento en que se habrán intercambiado todos y el <span lang="en">array </span>estará invertido.</p>
<p>Para usar esa clase genérica hay que crear un objeto o instancia de dicha clase especificando el tipo base entre los símbolos menor que ("&lt;") y mayor que ("&gt;"), justo detrás del nombre de la clase. Veamos un ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 43.95em;">
<div class="texto_izquierda">
<pre>Integer[] numeros={0,1,2,3,4,5,6,7,8,9};
</pre>
<pre>Util&lt;Integer&gt; u= new Util&lt;Integer&gt;();
</pre>
<pre>u.invertir(numeros);
</pre>
<pre>for (int i=0;i&lt;numeros.length;i++){ </pre>
<pre>    System.out.println(numeros[i]);</pre>
<pre>}</pre>
</div>
</div>
<p>Como puedes observar, el uso de genéricos es sencillo, tanto a nivel de clase como a nivel de método. Simplemente, a la hora de crear una instancia de una clase genérica, hay que especificar el tipo, tanto en la definición (Util &lt;Integer&gt; u) como en la creación (new Util&lt;Integer&gt;()). Así, el objeto u es una instancia de la clase genérica Util particularizada para objetos de tipo Integer. Por eso podemos invocar al método u.invertir(numeros), de forma que el parámetro formal T[] array (un <span lang="en">array</span> de objetos de tipo T) se sustituye por el parámetro actual numeros, que es un <span lang="en">array</span> de objetos de tipo Integer.</p>
<p>Ahora bien, a partir de Java 7 es posible utilizar el <em><strong>operador diamante</strong></em> ("&lt;&gt;") para simplificar la instanciación o creación de nuevos objetos a partir de clases genéricas, de manera que la instanciación anterior podría quedar como new Util&lt;&gt;(), sin necesidad de especificar el tipo "concreto" Integer en la llamada al constructor. El ejemplo anterior completo quedaría entonces:</p>
<div class="codigo elemento_centrado" style="width: 43.95em;">
<div class="texto_izquierda">
<pre>Integer[] numeros={0,1,2,3,4,5,6,7,8,9};
</pre>
<pre><strong>Util&lt;Integer&gt; u= new Util&lt;&gt;();  // Sólo a partir de Java 7
</strong></pre>
<pre>u.invertir(numeros);
</pre>
<pre>for (int i=0;i&lt;numeros.length;i++) System.out.println(numeros[i]);
</pre>
</div>
</div>
<p>Por tanto, a partir de ahora, siempre que nos sea posible utilizaremos el <em><strong>operador diamante</strong></em> ("&lt;&gt;") para mejorar la legibilidad del código, aunque la otra opción es siempre posible (y necesaria si por alguna razón se fuera a trabajar con versiones anteriores a Java 7).</p>
<p>Los genéricos los vamos a usar ampliamente a partir de ahora, aplicados a un montón de clases genéricas que tiene <span lang="en">Java</span> y que son de gran utilidad, por lo que es conveniente que aprendas bien a usar una clase genérica.</p></div></div>
</div>
<div class="DestacadofpdIdevice" id="id56">
<div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta56_70" class="block" style="display:block;position:relative"><p>Los parámetros de tipo de las clases genéricas solo pueden ser clases, no pueden ser jamás tipos de datos primitivos como int, short, double, <abbr title="etcétera.">etc.</abbr> En su lugar, debemos usar sus clases envoltorio Integer, Short, Double, <abbr title="etcétera.">etc.</abbr></p></div></div>
</div>
</div>
<div class="DebesconocerfpdIdevice" id="id57">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta57_48" class="block" style="display:block;position:relative"><p>Todavía hay un montón de cosas más sobre los métodos y las clases genéricas que deberías saber. En la siguiente animación se muestran algunos usos interesantes de los genéricos:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " profundización="" en="" el="" uso="" de="" genéricos.""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_Descripcion_Presentacion_ProfundizacionUsoGenericos.html">Resumen textual alternativo para "Profundización en el uso de genéricos".</a></div>
</div></div></div>
</div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id58">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion58_60" class="block" style="display:block;position:relative"><p><strong>Dada la siguiente clase, donde el código del método prueba carece de importancia, ¿podrías decir cuál de las siguientes invocaciones es la correcta?</strong></p>
<div class="codigo elemento_centrado" style="width: 38.45em;">
<div class="texto_izquierda">
<pre>public class Util { 
</pre>
<pre>    public static &lt;T&gt; int prueba (T t) { … } 
</pre>
<pre>}; 
</pre>
</div>
</div></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option58_60" id="i58_63" onclick="getFeedback(0,3,&#39;58_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans58_63" class="block" style="display:block;position:relative"><p>Util.&lt;int&gt;prueba(4);</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option58_60" id="i58_102" onclick="getFeedback(1,3,&#39;58_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans58_102" class="block" style="display:block;position:relative"><p>Util.&lt;Integer&gt;prueba(new Integer(4));</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option58_60" id="i58_105" onclick="getFeedback(2,3,&#39;58_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans58_105" class="block" style="display:block;position:relative"><p>Util u=new Util(); u.&lt;int&gt;prueba(4);</p></div></div>
</div></div>
<div id="sa0b58_60" class="feedback" style="display: none;"><div id="taf58_63" class="" style="display:block;position:relative"><p>Incorrecto. No se pueden usar tipos de datos primitivos en los genéricos.</p></div></div>
<div id="sa1b58_60" class="feedback" style="display: none;"><div id="taf58_102" class="" style="display:block;position:relative"><p>Correcto. Has captado la idea.</p></div></div>
<div id="sa2b58_60" class="feedback" style="display: none;"><div id="taf58_105" class="" style="display:block;position:relative"><p>Incorrecto. Fíjate que prueba es un método estático y no se puede invocar así. Además se usan datos primitivos en un genérico, cosa que no es posible.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>Incorrecto. No se pueden usar tipos de datos primitivos en los genéricos.</p></li><li><strong>Opción correcta</strong> <p>Correcto. Has captado la idea.</p></li><li><strong>Incorrecto</strong> <p>Incorrecto. Fíjate que prueba </code>es un método estático y no se puede invocar así. Además se usan datos primitivos en un genérico, cosa que no es posible.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
2.-  Introducción a las colecciones.</h1></div>
<div class="CasopracticofpdIdevice" id="id59">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta59_66" class="block" style="display:block;position:relative"><p><img style="float: left;" alt="Una chica en postura de yoga." class="elemento_derecha" src="./PROG_T8_files/BW4P63_ok.jpg" title="Todo está OK" height="160" width="160"></p>
<p>A <strong>Ana</strong> las listas siempre se le han atragantado, por eso procura evitar usarlas, y eso la lleva a perder una gran cantidad de tiempo "inventando la rueda" para conseguir lo que podría objeter de forma casi automática si aprovechara la ptencia que éstas proporcionan, sobre todo en el lenguaje <span lang="en">Java</span>.</p>
<p>Después de darle muchas vueltas, ha pensado que no le queda más remedio y que tendrá que usarlas para almacenar los artículos del pedido. Además, se ha convencido que es la mejor forma de gestionar un grupo de objetos, aunque sean del mismo tipo.</p>
<p>No sabe si lo más adecuado es usar una lista u otro tipo de colección, así que ha decido revisar todos los tipos de colecciones disponibles en <span lang="en">Java</span>, para ver cuál se adecua mejor a sus necesidades.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id60">
<div class="iDevice emphasis0">
<div id="ta60_73" class="block" style="display:block;position:relative"><p><img alt="Estantería con una colección de libros." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R028_colecciondelibros.jpg" title="Estantería con una colección de libros." width="192" height="128"></p>
<p>¿Qué es para ti una colección?</p>
<p>Seguramente al pensar en el término se te viene a la cabeza una colección de libros o algo parecido, y la idea no va muy desencaminada.</p>
<p><span class="destacado_inline"><strong>Una colección a nivel de <span lang="en">software</span> es un grupo de elementos almacenados de forma conjunta en una misma estructura</strong>.</span></p>
<p>Eso son las colecciones. Definen <strong>un conjunto de interfaces, clases genéricas y algoritmos</strong> que permiten manejar grupos de objetos, todo ello enfocado a <strong>potenciar la reusabilidad del software y facilitar las tareas de programación</strong>. Te parecerá increíble el tiempo que se ahorra empleando colecciones y cómo se reduce la complejidad del<span lang="en"> software</span> usándolas adecuadamente. Las colecciones<strong> permiten almacenar y manipular grupos de objetos</strong> que, a priori, están relacionados entre sí (aunque no es obligatorio que estén relacionados, lo lógico es que si se almacenan juntos es porque tienen alguna relación entre sí), pudiendo trabajar con cualquier tipo de objeto (de ahí que se empleen los genéricos en las colecciones).</p>
<p>Además las colecciones permiten realizar algunas <strong>operaciones útiles</strong> sobre los elementos almacenados, tales como<strong> búsqueda u ordenación</strong>. En algunos casos es necesario que los objetos almacenados cumplan algunas condiciones (que implementen algunas interfaces), para poder hacer uso de estos algoritmos.</p>
<p>Las colecciones son en general elementos de programación que están disponibles en muchos lenguajes de programación. En algunos de ellos su uso es algo más complejo (como es el caso de<abbr title="C plus plus" lang="en"> C++</abbr>), pero en<span lang="en"> Java</span> su uso es bastante sencillo, es algo que descubrirás a lo largo de lo que queda de unidad.</p>
<p>Las colecciones en <span lang="en">Java</span> parten de una serie de interfaces básicas. Cada interfaz define un <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/">modelo<span><em>Modelo</em>En general, un modelo es una descripción o una representación abstracta (gráfica o textual) de un proceso o del funcionamiento de un sistema, cuyo objetivo es facilitar la compresión del mismo. En la informática puede tener otras connotaciones adicionales, en nuestro caso refiere a las forma en las que se pueden almacenar los datos y las relaciones existentes entre ellos. Existen varias formas y cada forma es un modelo que sigue una serie de reglas y mecanismos.</span></a> de colección y las operaciones que se pueden llevar a cabo sobre los datos almacenados, por lo que es necesario conocerlas. La interfaz inicial, a través de la cual se han construido el resto de colecciones, es la interfaz java.util.Collection, que <strong>define las operaciones comunes a todas las colecciones derivadas</strong>. A continuación se muestran las operaciones más importantes definidas por esta interfaz, ten en cuenta que Collection es una interfaz genérica donde "&lt;E&gt;" es el parámetro de tipo (podría ser cualquier clase):</p>
<ul class="lista_verificacion">
<li>Método int size(): devuelve el número de elementos de la colección.</li>
<li>Método boolean isEmpty(): devuelve true si la colección está vacía.</li>
<li>Método boolean contains (Object element): retornará true si la colección tiene el elemento pasado como parámetro.</li>
<li>Método boolean add(E element): permitirá añadir elementos a la colección.</li>
<li>Método boolean remove (Object element): permitirá eliminar elementos de la colección.</li>
<li>Método Iterator&lt;E&gt; iterator(): permitirá crear un iterador para recorrer los elementos de la colección. Esto se ve más adelante, no te preocupes.</li>
<li>Método Object[] toArray(): permite pasar la colección a un <span lang="en">array</span> de objetos tipo Object.</li>
<li>Método containsAll(Collection&lt;?&gt; c): permite comprobar si una colección contiene los elementos existentes en otra colección, si es así, retorna verdadero.</li>
<li>Método addAll (Collection&lt;? extends E&gt; c): permite añadir todos los elementos de una colección a otra colección, siempre que sean del mismo tipo (o deriven del mismo tipo base).</li>
<li>Método boolean removeAll(Collection&lt;?&gt; c): si los elementos de la colección pasada como parámetro están en nuestra colección, se eliminan, el resto se quedan.</li>
<li>Método boolean retainAll(Collection&lt;?&gt; c): si los elementos de la colección pasada como parámetro están en nuestra colección, se dejan, el resto se eliminan.</li>
<li>Método void clear(): vacíar la colección.</li>
</ul>
<p>Más adelante veremos cómo se usan estos métodos, será cuando veamos las implementaciones (clases genéricas que implementan alguna de las interfaces derivadas del <span lang="en">interface</span> Collection).</p></div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.- Conjuntos (I).  ¿Qué son y cómo se declaran? HashSet.</h1></div>
<div class="CasopracticofpdIdevice" id="id61">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta61_66" class="block" style="display:block;position:relative"><p><img alt="Fotografía de Juan." class="elemento_derecha" src="./PROG_T8_files/CASO_PERSONAJES_04.jpg" title="Juan." height="160" width="176"></p>
<p><strong>Ana</strong> se toma un descanso, se levanta y en el pasillo se encuentra con <strong>Juan</strong>, con el que entabla una conversación bastante amena. Una cosa lleva a otra y al final,<strong> Ana</strong> saca el tema que más le preocupa:</p>
<p>—¿Cuántos tipos de colecciones hay? ¿Tu los sabes? —pregunta <strong>Ana</strong>.</p>
<p>—¿Yo? ¡Que va! Normalmente consulto la documentación cuando las voy a usar, como todo el mundo. Lo que sí creo recordar es que había cuatro tipos básicos: los <strong>conjuntos</strong>, las <strong>listas</strong>, las <strong>colas</strong> y alguno más que no recuerdo. ¡Ah sí¡, los <strong>mapas</strong>, aunque creo que no se consideraban un tipo de colección. ¿Por qué lo preguntas?</p>
<p>—Pues porque tengo que usar uno y no sé cuál me irá mejor para mi aplicación.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id62">
<div class="iDevice emphasis0">
<div id="ta62_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " ejemplo="" de="" utilización="" una="" función="" hash"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R029_funcionhash.png"><img alt="Imagen en la que ejemplos de resúmenes de una función hash, aplicados sobre tres distintas cadenas. Cada cadena genera un resumen hash diferente. La primera cadena es “Zorro” y genera un resumen hexadecimal, muy diferente a la segunda cadena “El zorro rojo corre a través del hielo”. La tercera cadena, es una ligera variación de la segunda “El zorro  rojo camina a través del hielo” y en cambio, genera un resumen hash muy diferente a la segunda." class="imagen_ampliable" src="./PROG_T8_files/PROG08_CONT_R029_funcionhash_miniatura.PNG" title="Ejemplo de utilización de una función hash." height="112" width="192"></a></div>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="Wikimedia Commons" href="https://es.wikipedia.org/wiki/Archivo:Hash_function2-es.svg" target="_blank">Wikimedia Commons</a></div>
</div>
<p>¿Con qué relacionarías los conjuntos?</p>
<p>Seguro que con las matemáticas. Los conjuntos son un tipo de colección que <strong>no admite duplicados</strong>, derivados del concepto matemático de conjunto.</p>
<p>La interfaz java.util.Set define cómo deben ser los conjuntos, y extiende la interfaz Collection, aunque no añade ninguna operación nueva. Las implementaciones (clases genéricas que implementan la interfaz Set) más usadas son las siguientes:</p>
<ul class="lista_verificacion">
<li>java.util.HashSet. Conjunto que almacena los objetos usando<a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/"> tablas hash<span><em>Tabla hash.</em>Es una estructura de datos formada básicamente por un array donde la posición de los datos va determinada por una función hash, permitiendo localizar la información de forma extraordinariamente rápida. Los datos están ordenados en la tabla en base a un resumen numérico de los mismos (en hexadecimal generalmente) obtenido a partir de un algoritmo para cálculo de resúmenes, denominadas funciones hash. El resumen no tiene significado para un ser humano, se trata simplemente de un mecanismo para obtener un número asociado a un conjunto de datos. El inconveniente de estas tablas es que los datos se ordenan por el resumen obtenido, y no por el valor almacenado. El resumen, de un buen algoritmo hash, no se parece en nada al contenido almacenado.</span></a>, lo cual acelera enormemente el acceso a los objetos almacenado. Inconvenientes: necesitan bastante memoria y <strong>no almacenan los objetos de forma ordenada</strong> (al contrario pueden aparecer completamente desordenados).</li>
<li>java.util.LinkedHashSet. Conjunto que almacena objetos combinando tablas <span lang="en">hash</span>, para un acceso rápido a los datos, y<a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/"> listas enlazadas<span><em>Lista enlazada.</em>Es una estructura de datos que almacena los objetos enlazándolos entre sí a través de un apuntador de memoria o puntero (una referencia en Java), manteniendo un orden, que generalmente es el propio orden de inserción, pero que puede ser otro. Cada dato se almacena en una estructura llamada nodo en la que existe un campo, generalmente llamado siguiente, que contiene la dirección de memoria del siguiente nodo (con el siguiente dato). En Java, ese campo siguiente será en realidad una referencia de tipo nodo, pero eso sería si quisiéramos implementar las listas "manualmente". Afortunadamente, Java nos proporciona clases para trabajar con listas sin que nos tengamos que preocupar de los detalles de la implementación. </span></a> para conservar el orden. <strong>El orden de almacenamiento es el de inserción</strong>, por lo que se puede decir que es una estructura ordenada a medias. Inconvenientes: necesitan bastante memoria y es algo más lenta que HashSet.</li>
<li>java.util.TreeSet. Conjunto que almacena los objetos usando unas estructuras conocidas como<a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/"> árboles rojo-negro<span><em>Árbol rojo-negro.</em>Se trata de un árbol binario de búsqueda balanceado, lo que implica que tiene un "buen peor caso" de tiempo de ejecución para sus operaciones y es eficiente en la práctica. Puede buscar, insertar y borrar en un tiempo O(log n) , donde n es el número de elementos del árbol, lo que signfica que el tiempo necesario para efectuar las operaciones no crece significativamente aunque se tengan muchos elementos o datos en el árbol. Ejemplo para que se entienda: suponiendo que para 10 elmentos tarda 1 milisegundo en el peor de los casos en acceder a un elemento, para 100 elementos tardaría 2 milisegundos, y para 1000 tardaría 3 milisegundos. (El número de elementos crece exponencialmente, sin embargo, el tiempo necesario para acceder a ellos en el peor de los casos, no crece de la misma manera, sino que se mantiene en valores bajos.</span></a>. Son más lentas que los dos tipos anteriores. pero tienen una gran ventaja: <strong>los datos almacenados se ordenan por valor</strong>. Es decir, que aunque se inserten los elementos de forma desordenada, internamente se ordenan dependiendo del valor de cada uno.</li>
</ul>
<p>Poco a poco, iremos viendo qué son las listas enlazadas y los árboles (no profundizaremos en los árboles rojo-negro, pero si veremos las estructuras tipo árbol en general). Veamos un ejemplo de uso básico de la estructura HashSet y después, profundizaremos en los LinkedHashSet y los TreeSet.</p>
<p>Para crear un conjunto, simplemente creamos el HashSet indicando el tipo de objeto que va a almacenar, dado que es una clase genérica que puede trabajar con cualquier tipo de dato debemos crearlo como sigue (no olvides hacer la importación de java.util.HashSet primero):</p>
<div class="codigo elemento_centrado" style="width: 36.25em;">
<div class="texto_izquierda">
<pre>HashSet&lt;Integer&gt; conjunto=new HashSet&lt;Integer&gt;();
</pre>
</div>
</div>
<p> </p>
<p>Después podremos ir almacenando objetos dentro del conjunto usando el método add() definido por la interfaz Set, ya que extiende a Collection. Los objetos que se pueden insertar serán siempre del tipo especificado al crear el conjunto:</p>
<div class="codigo elemento_centrado" style="width: 48.85em;">
<div class="texto_izquierda">
<pre>Integer n=new Integer(10);
</pre>
<pre>if (!conjunto.add( n )){</pre>
<pre>     System.out.println("No se pudo añadir. El número "+n+" ya está en la lista.");</pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>Si el elemento ya está en el conjunto, el método add() devolverá false indicando que no se pueden insertar duplicados. Si todo va bien, devolverá true.</p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id63">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion63_60" class="block" style="display:block;position:relative"><strong>¿Cuál de las siguientes estructuras ordena automáticamente los elementos según su valor?</strong>
</div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option63_60" id="i63_63" onclick="getFeedback(0,3,&#39;63_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans63_63" class="block" style="display:block;position:relative"><p>
HashSet.
</p>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option63_60" id="i63_78" onclick="getFeedback(1,3,&#39;63_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans63_78" class="block" style="display:block;position:relative"><p>
LinkedHashSet.
</p>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option63_60" id="i63_81" onclick="getFeedback(2,3,&#39;63_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans63_81" class="block" style="display:block;position:relative"><p>
TreeSet.
</p>
</div></div>
</div></div>
<div id="sa0b63_60" class="feedback" style="display: none;"><div id="taf63_63" class="" style="display:block;position:relative">No es correcto. Lee de nuevo los contenidos.
</div></div>
<div id="sa1b63_60" class="feedback" style="display: none;"><div id="taf63_78" class="" style="display:block;position:relative">Incorrecto. Revisa el apartado y averigua por qué.
</div></div>
<div id="sa2b63_60" class="feedback" style="display: none;"><div id="taf63_81" class="" style="display:block;position:relative">Efectivamente, has captado la idea a la primera.
</div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> No es correcto. Lee de nuevo los contenidos.
</li><li><strong>Incorrecto</strong> Incorrecto. Revisa el apartado y averigua por qué.
</li><li><strong>Opción correcta</strong> Efectivamente, has captado la idea a la primera.
</li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.1.- Conjuntos (II). ¿Cómo acceder a sus elementos?</h1></div>
<div class="FreeTextfpdIdevice" id="id64">
<div class="iDevice emphasis0">
<div id="ta64_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R030_Conjunto.png"><img alt="Ilustración que muestra el concepto matemático de conjunto. En la ilustración se muestra un área circular que en su interior tiene un montón de figuras humanas de diferentes colores, las cuales conforman el conjunto. Al conjunto le llama A, y debajo del mismo, se muestran los elementos del conjunto usando una nomenclatura matemática." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R030_Conjunto_miniatura.png" title="Concepto matemático de conjunto."></a></div>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title=" Kismalac" href="https://es.wikipedia.org/wiki/Archivo:PersonsSet.svg" target="_blank">Kismalac</a></div>
</div>
<p>Y ahora te preguntarás, ¿cómo accedo a los elementos almacenados en un conjunto?</p>
<p>Para obtener todos los elementos almacenados en un conjunto hay que usar<strong> iteradores</strong>, que permiten obtener los elementos del conjunto uno a uno de forma secuencial (es la única forma de acceder a todos los elementos de un conjunto).</p>
<p>Los iteradores se verán en mayor profundidad más adelante, así que de momento los utilizaremos de forma "transparente" mediante un bucle <strong><span lang="en">"for-each</span></strong>" o bucle "para cada". Este tipo de bucles ya los vimos en la unidad dedicada a las estructuras de control, aunque apenas los habíamos utilizado hasta ahora. En el siguiente código tienes un ejemplo de uso de un bucle <strong><span lang="en">for-each</span></strong>. En él la variable i va tomando todos los valores almacenados en el conjunto hasta que llega al último:</p>
<div class="codigo elemento_centrado" style="width: 34.05em;">
<div class="texto_izquierda">
<pre>for (Integer i: conjunto) { 
</pre>
<pre>     System.out.println("Elemento almacenado:"+i); 
</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>Como ves la estructura<strong><span lang="en"> for-each</span></strong> es muy sencilla: la palabra for seguida de "<span title="Paréntesis seguido de tipo de la variable y espacio, seguido de nombre de la variable que irá tomando el valor de cada elemento de la colección, dos puntos, y después la variable que contiene la colección. Finalmente cierre de paréntesis.">(tipo variable:colección)</span>" y el cuerpo del bucle, donde:</p>
<ul class="lista_verificacion">
<li>tipo es el tipo del objeto sobre el que se ha creado la colección;</li>
<li>variable es la variable donde se almacenará cada elemento de la colección;</li>
<li>colección es la colección en sí.</li>
</ul>
<p>Los bucles<strong><span lang="en"> for-each</span></strong> se pueden usar para todas las colecciones.</p></div></div>
</div>
<div class="EjercicioresueltofpdIdevice" id="id65">
<div class="iDevice emphasis_ejercicioresueltofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_ejercicioresueltofpd.gif">
<span class="iDeviceTitle"><strong>Ejercicio resuelto</strong></span>
<div class="iDevice_inner">
<div id="ta65_67" class="block" style="display:block;position:relative"></div><div class="question">
<div id="taquesQuestion0b65" class="block" style="display:block;position:relative"><p>Realiza un pequeño programa que pregunte al usuario 5 números diferentes (almacenándolos en un HashSet), y que después calcule la suma de los mismos (usando un bucle<strong><span lang="en"> for-each</span></strong>).</p></div><div id="viewq0b65" style="display:block;"><input type="button" name="btnshowq0b65" value="Mostrar retroalimentación" class="feedbackbutton" onclick="showAnswer(&#39;q0b65&#39;,1)">
</div><div id="hideq0b65" style="display:none;"><input type="button" name="btnhideq0b65" value="Ocultar retroalimentación" class="feedbackbutton" onclick="showAnswer(&#39;q0b65&#39;,0)">
<p></p></div><div id="sq0b65" class="feedback" style=" display: none;"><div id="taquesFeedback0b65" class="block" style="display:block;position:relative"><p>Una solución posible podría ser la siguiente. Para preguntar al usuario un número y para mostrarle la información se ha usado la clase JOptionPane, pero podrías haber utilizado cualquier otro sistema. Fijate en la solución y verás que el uso de conjuntos ha simplificado enormemente el ejercicio, permitiendo al programador o la programadora centrarse en otros aspectos:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen. Solución al Ejercicio resuelto de sumar números." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R030_01_solucion_ejercicio_resuelto.png"><img alt="Imagen que muestra el código fuente de un algoritmo que pide una serie de números, y realiza la suma de los mismos." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R030_01_solucion_ejercicio_resuelto_miniatura.PNG" style="width: 200px; height: 124px;" title="Solución del ejercicio resuelto sobre sumar una lista de números." height="124" width="200"></a></div>
</div>
<div class="enlace_centrado"><a class="paquete" title="Descargar código fuente de la solución propuesta para el ejercicio de sumar números. [zip - 851 KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R030_02_ejemplo.zip">Código fuente de la solución propuesta para el ejercicio.</a> <span class="tamano"> (851 KB) </span></div></div></div>
<noscript><div class="feedback">
<p><strong>Solution: </strong></p>
<p>Una solución posible podría ser la siguiente. Para preguntar al usuario un número y para mostrarle la información se ha usado la clase JOptionPane</code>, pero podrías haber utilizado cualquier otro sistema. Fijate en la solución y verás que el uso de conjuntos ha simplificado enormemente el ejercicio, permitiendo al programador o la programadora centrarse en otros aspectos:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen. Solución al Ejercicio resuelto de sumar números." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R030_01_solucion_ejercicio_resuelto.png"><img alt="Imagen que muestra el código fuente de un algoritmo que pide una serie de números, y realiza la suma de los mismos." class="imagen_ampliable" src="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R030_01_solucion_ejercicio_resuelto_miniatura.PNG" style="width: 200px; height: 124px;" title="Solución del ejercicio resuelto sobre sumar una lista de números." height="124" width="200" /></a></div>
</div>
<div class="enlace_centrado"><a class="paquete" title="Descargar código fuente de la solución propuesta para el ejercicio de sumar números. [zip - 851 KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R030_02_ejemplo.zip">Código fuente de la solución propuesta para el ejercicio.</a> <span class="tamano"> (851 KB) </span></div></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.2.- Conjuntos (III). ¿En qué se diferencian LinkedHashSet y TreeSet?</h1></div>
<div class="FreeTextfpdIdevice" id="id66">
<div class="iDevice emphasis0">
<div id="ta66_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " lista="" enlazada""="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R031_ListaEnlazada.JPG"><img alt="Imagen que muestra una lista enlazada. Diferentes cajas, cada una representado un nodo que contiene datos, están enlazadas entre sí por apuntadores a memoria o punteros, que señalan la dirección en memoria del siguiente nodo con el siguiente dato.  En la imagen se muestra como podría ser un ejemplo de nodo en Java sencillo, se trata de una clase llamada Nodo con solo dos atributos, uno que se llama sig, y que es una instancia de una clase Nodo (siguiente nodo) y otro que es v, el cual es una instancia de la clase Object, y que está destinado a almacenar la información de nodo (sea del tipo que sea)." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R031_ListaEnlazada_miniatura.JPG" title="Lista enlazada." height="76" width="200"></a></div>
</div>
<p>¿En qué se diferencian las estructuras LinkedHashSet y <code>TreeSet</code> de la estructura HashSet? Ya se comentó antes: la diferencia se encuentra básicamente en su funcionamiento interno.</p>
<p>La estructura LinkedHashSet es una estructura que internamente funciona como una lista enlazada, aunque usa también <strong>tablas <span lang="en">hash</span></strong> para poder acceder rápidamente a los elementos. Una lista enlazada es una estructura similar a la representada en la imagen de la derecha, la cual está compuesta por nodos (elementos que forman la lista) que van enlazándose entre sí. Un nodo contiene dos cosas: <strong>el dato u objeto almacenado en la lista y una referencia al siguiente nodo de la lista</strong>. Si no hay siguiente nodo, se indica poniendo nulo (null) en la referencia al siguiente nodo.<br><br>Las listas enlazadas tienen un montón de operaciones asociadas en las que no vamos a profundizar: eliminación de un nodo de la lista, inserción de un nodo al final, al principio o entre dos nodos,<abbr title="etcétera."> etc.</abbr> Gracias a las colecciones podremos utilizar listas enlazadas sin tener que complicarnos en detalles de programación.<br><br></p>
<p>La estructura TreeSet, en cambio, utiliza internamente árboles. Los árboles son como las listas pero mucho más complejos. En vez de tener un único elemento siguiente, pueden tener dos o más elementos siguientes, formando estructuras organizadas y jerárquicas.</p>
<div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " Árbol="" binario"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R032_ArbolBinario.JPG"><img alt="Ilustración que muestra tres niveles de un árbol binario, formado por 5 nodos, así como una posible implementación básica de un nodo en Java. En la ilustración se ve un primer nivel (nivel 0), con un nodo inicial (padre) que enlaza con dos nodos del siguiente nivel. En el nivel 1 se ven dos nodos que enlazan a su vez con otros dos nodos en el nivel 2, dejando el valor nulo (null) en los enlaces donde no hay un nodo hijo. Una posible implentación para este nodo podría ser la que se muestra en la imagen, donde hay una clase llamada Nodo con tres atributos, los dos primeros se llaman izq y dch, y son instancias de la clase Nodo, usados para almacenar la posición de los nodos hijo de este nodo. El tercer atributo es v, una instancia de la clase Object utilizada para almacenar el dato almacenado en el árbol." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R032_ArbolBinario_miniatura.jpg" title="Árbol binario."></a></div>
</div>
<p>Los nodos se diferencian en dos tipos: <strong>nodos padre y nodos hijo</strong>; un nodo padre puede tener varios nodos hijo asociados (depende del tipo de árbol), dando lugar a una estructura que parece un árbol invertido (de ahí su nombre).</p>
<p>En la figura de la derecha se puede apreciar un árbol donde cada nodo puede tener dos hijos, denominados izquierdo (<abbr title="Izquierdo o izquierda.">izq</abbr>) y derecho (<abbr title="Derecha o derecho.">dch</abbr>). Puesto que un nodo hijo puede también ser padre a su vez, los árboles se suelen visualizar para su estudio por niveles para entenderlos mejor, donde cada nivel contiene hijos de los nodos del nivel anterior, excepto el primer nivel (que no tiene padre).</p>
<p>Los árboles son estructuras complejas de manejar y que permiten operaciones muy sofisticadas. Los árboles usados en los TreeSet, los árboles rojo-negro, son árboles auto-ordenados, es decir, que al insertar un elemento, éste queda ordenado por su valor de forma que al recorrer el árbol, pasando por todos los nodos, los elementos salen ordenados. El ejemplo mostrado en la imagen es simplemente un árbol binario, el más simple de todos.</p>
<p>Nuevamente, no se va a profundizar en las operaciones que se pueden realizar en un árbol a nivel interno (inserción de nodos, eliminación de nodos, búsqueda de un valor, <abbr title="etcétera">etc.</abbr>). Nos aprovecharemos de las colecciones para hacer uso de su potencial. En la siguiente tabla tienes un uso comparado de TreeSet y <code>LinkedHashSet</code>. Su creación es similar a como se hace con HashSet, simplemente sustituyendo el nombre de la clase HashSet por una de las otras. Ni TreeSet, ni LinkedHashSet admiten duplicados, y se usan los mismos métodos ya vistos antes, los existentes en la interfaz Set (que es la interfaz que implementan).</p>
<table class="tabla" summary="Tabla que muestra ejemplos de utilización de TreeSet y LinkedHashSet, mostrando un trozo de código para cada uno de ellos, y el resultado que se mostraría después de ejecutar dicho código."><caption>Ejemplos de utilización de los conjuntos TreeSet y <code>LinkedHashSet</code>.</caption>
<thead>
<tr>
<td> </td>
<th scope="col">Conjunto TreeSet.</th><th scope="col">Conjunto LinkedHashSet.</th></tr>
</thead>
<tbody>
<tr><th scope="row">Ejemplo de uso</th>
<td>
<div class="codigo elemento_centrado" style="width: 28em;">
<div class="texto_izquierda">
<pre>TreeSet &lt;Integer&gt; t;
</pre>
<pre>t=new TreeSet&lt;Integer&gt;();     
</pre>
<pre>t.add(new Integer(4));
</pre>
<pre>t.add(new Integer(3));
</pre>
<pre>t.add(new Integer(1));
</pre>
<pre>t.add(new Integer(99));
</pre>
<pre>for (Integer i:t){</pre>
<pre>    System.out.println(i);</pre>
<pre>}</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 28em;">
<div class="texto_izquierda">
<pre>LinkedHashSet &lt;Integer&gt; t;
</pre>
<pre>t=new LinkedHashSet&lt;Integer&gt;();     
</pre>
<pre>t.add(new Integer(4));
</pre>
<pre>t.add(new Integer(3));
</pre>
<pre>t.add(new Integer(1));
</pre>
<pre>t.add(new Integer(99));
</pre>
<pre>for (Integer i:t){</pre>
<pre>    System.out.println(i);</pre>
<pre>}</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Resultado mostrado por pantalla</th>
<td>
<p>1 3 4 99</p>
<p>(el resultado sale ordenado por valor)</p>
</td>
<td>
<p>4 3 1 99</p>
<p>(los valores salen ordenados según el momento de inserción en el conjunto)</p>
</td>
</tr>
</tbody>
</table></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id67">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion67_60" class="block" style="display:block;position:relative"><p><strong>Un árbol cuyos nodos solo pueden tener un único nodo hijo, en realidad es una lista. ¿Verdadero o falso?</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option67_60" id="i67_63" onclick="getFeedback(0,2,&#39;67_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans67_63" class="block" style="display:block;position:relative"><p>Verdadero.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option67_60" id="i67_93" onclick="getFeedback(1,2,&#39;67_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans67_93" class="block" style="display:block;position:relative"><p>Falso.</p></div></div>
</div></div>
<div id="sa0b67_60" class="feedback" style="display: none;"><div id="taf67_63" class="" style="display:block;position:relative"><p>Acertaste.</p></div></div>
<div id="sa1b67_60" class="feedback" style="display: none;"><div id="taf67_93" class="" style="display:block;position:relative"><p>Incorrecto. Revisa el tema para entender en qué has fallado.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Opción correcta</strong> <p>Acertaste.</p></li><li><strong>Incorrecto</strong> <p>Incorrecto. Revisa el tema para entender en qué has fallado.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.3.- Conjuntos (IV). Combinando datos de varias colecciones.</h1></div>
<div class="FreeTextfpdIdevice" id="id68">
<div class="iDevice emphasis0">
<div id="ta68_73" class="block" style="display:block;position:relative"><p>¿Cómo podría copiar los elementos de un conjunto de uno a otro? ¿Hay que usar un bucle &lt;span lang="en"&gt;for&lt;/span&gt; y recorrer toda la lista para ello?</p>
<p>¡Qué va! Para facilitar esta tarea, los conjuntos, y las colecciones en general, facilitan un montón de operaciones para poder combinar los datos de varias colecciones. Ya se vieron en un apartado anterior, aquí simplemente vamos poner un ejemplo de su uso.</p>
<p>Partimos del siguiente ejemplo, en el que hay dos colecciones de diferente tipo, cada una con 4 números enteros:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen para " conjuntos="" a="" y="" b"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R033_CONJUNTOS.JPG"><img alt="Imagen que muestra dos conjuntos, A y B, donde se muestran los elementos en común (5 y 7) y los elementos propios de cada conjunto (9 y 19 para A, y 20 y 10 para B)." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R033_CONJUNTOS_miniatura.jpg" title="Conjuntos A y B." height="160" width="184"></a></div>
</div>
<div class="codigo elemento_centrado" style="width: 52.2em;">
<div class="texto_izquierda">
<pre>TreeSet&lt;Integer&gt; A= new TreeSet&lt;Integer&gt;();
</pre>
<pre>A.add(9); A.add(19); A.add(5); A.add(7); // Elementos del conjunto A: 9, 19, 5 y 7
</pre>
<pre>     LinkedHashSet&lt;Integer&gt; B= new LinkedHashSet&lt;Integer&gt;();
</pre>
<pre>B.add(10); B.add(20); B.add(5); B.add(7); // Elementos del conjunto B: 10, 20, 5 y 7
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior, el literal de número se convierte automáticamente a la clase envoltorio Integer sin tener que hacer nada, lo cual es una ventaja. Veamos las formas de combinar ambas colecciones:</p>
<table class="tabla" summary="Tabla que muestra los distintos de combinar colecciones."><caption>Tipos de combinaciones.</caption>
<thead>
<tr><th scope="col">Combinación.</th><th scope="col">Código.</th><th scope="col">Elementos finales del conjunto A.</th></tr>
</thead>
<tbody>
<tr><th scope="row"><strong>Unión</strong>. Añadir todos los elementos del conjunto B en el conjunto A.</th>
<td>A.addAll(B)</td>
<td>
<p>Todos los del conjunto A, añadiendo los del B, pero sin repetir los que ya están: 5, 7, 9, 10, 19 y 20.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen para " unión="" de="" a="" y="" b."."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R034_UNION.JPG"><img alt="Imagen que muestra dos conjuntos unidos; A , con los elementos 9, 19, 5 y 7, y B con los elementos 5, 7, 20 y 10; dando lugar a un nuevo conjunto con los elementos 9, 19, 5, 7, 20 y 10." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R034_UNION_miniatura.jpg" style="width: 200px; height: 116px;" title="Unión de A y B." height="116" width="200"></a></div>
</div>
</td>
</tr>
<tr><th scope="row"><strong>Diferencia</strong>. Eliminar los elementos del conjunto B que puedan estar en el conjunto A.</th>
<td>A.removeAll(B)</td>
<td>
<p>Todos los elementos del conjunto A, que no estén en el conjunto B: 9, 19.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen para " conjunto="" a="" menos="" el="" b"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R035_SUSTRACCION.JPG"><img alt="Imagen que muestra la diferencia de dos conjuntos; A , con los elementos 9, 19, 5 y 7, y B con los elementos 5, 7, 20 y 10; dando lugar a un nuevo conjunto con los elementos 9 y 19." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R035_SUSTRACCION_miniatura.jpg" style="width: 192px; height: 112px;" title="Conjunto A menos el conjunto B." height="112" width="192"></a></div>
</div>
</td>
</tr>
<tr><th scope="row"><strong>Intersección</strong>. Retiene los elementos comunes a ambos conjuntos.</th>
<td>A.retainAll(B)</td>
<td>
<p>Todos los elementos del conjunto A, que también están en el conjunto B: 5 y 7.</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a title="Ampliar imagen para " intersección="" de="" los="" conjuntos="" a="" y="" b"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R036_INTERSECCION.JPG"><img alt="Imagen que muestra la intersección de dos conjuntos; A , con los elementos 9, 19, 5 y 7, y B con los elementos 5, 7, 20 y 10; dando lugar a un nuevo conjunto con los elementos 5 y 7." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R036_INTERSECCION_miniatura.jpg" style="width: 196px; height: 152px;" title="Intersección de los conjuntos A y B." height="152" width="196"></a></div>
</div>
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>Recuerda, estas operaciones son comunes a todas las colecciones.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id69">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta69_47" class="block" style="display:block;position:relative"><p>Puede que no recuerdes cómo era eso de los conjuntos, y dada la íntima relación de las colecciones con el álgebra de conjuntos, es recomendable que repases cómo era aquello, con el siguiente artículo de la Wikipedia.</p>
<p class="enlace_centrado"><a class="html" title="Acceder al artículo de la Wikipedia sobre el álgebra de conjuntos." href="http://es.wikipedia.org/wiki/%C3%81lgebra_de_conjuntos">Álgebra de conjuntos.</a></p></div></div>
</div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id70">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion70_60" class="block" style="display:block;position:relative"><p><strong>Tienes un HashSet llamado vocales que contiene los elementos "a", "e", "i", "o", "u", y otro, llamado vocalesFuertes con los elementos "a", "e" y "o". ¿De qué forma podríamos sacar una lista con las denominadas vocales débiles (que son aquellas que no son fuertes)?</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option70_60" id="i70_63" onclick="getFeedback(0,3,&#39;70_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans70_63" class="block" style="display:block;position:relative"><p>vocales.retainAll(vocalesFuertes);</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option70_60" id="i70_104" onclick="getFeedback(1,3,&#39;70_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans70_104" class="block" style="display:block;position:relative"><p>vocales.removeAll(vocalesFuertes);</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option70_60" id="i70_107" onclick="getFeedback(2,3,&#39;70_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans70_107" class="block" style="display:block;position:relative"><p>No es posible hacer esto con HashSet, solo se puede hacer con TreeSet o <code>LinkedHashSet</code>.</p></div></div>
</div></div>
<div id="sa0b70_60" class="feedback" style="display: none;"><div id="taf70_63" class="" style="display:block;position:relative"><p>No es correcto, no se trata de hacer una intersección.</p></div></div>
<div id="sa1b70_60" class="feedback" style="display: none;"><div id="taf70_104" class="" style="display:block;position:relative"><p>Efectivamente, sería una diferencia.</p></div></div>
<div id="sa2b70_60" class="feedback" style="display: none;"><div id="taf70_107" class="" style="display:block;position:relative"><p>Incorrecto. Como se ha dicho antes estas operaciones son comunes a todas las colecciones.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>No es correcto, no se trata de hacer una intersección.</p></li><li><strong>Opción correcta</strong> <p>Efectivamente, sería una diferencia.</p></li><li><strong>Incorrecto</strong> <p>Incorrecto. Como se ha dicho antes estas operaciones son comunes a todas las colecciones.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
3.4.- Conjuntos (V). Ordenando sus elementos.</h1></div>
<div class="FreeTextfpdIdevice" id="id71">
<div class="iDevice emphasis0">
<div id="ta71_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " algoritmo="" de="" ordenación="" por="" selección"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R037_ANIMACIONSORT.gif"><img alt="Imagen animada que ilustra como un algoritmo de ordenación va ordenando los elementos a base de ir comparándolos e ir averiguando cual es el mayor y el menor. En la imagen hay 10 números, del 0 al 9, desordenados. Para ordenarlos el algoritmo recorre toda la lista una y otra vez. En la primera pasada, compara el primer elemento con cada uno de los 9 restantes, si encuentra uno menor, lo cambia de posición. En la segunda pasada, compara el segundo elemento con cada uno de los 8 que le quedan todavía por delante, si encuentra alguno menor, lo cambia de sitio. Este proceso sigue para el resto de elementos, hasta finalizar la ordenación." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R037_ANIMACIONSORT_miniatura.gif" title="Algoritmo de ordenación por selección." height="192" width="52"></a></div>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="Wikimedia Commons" href="https://es.wikipedia.org/wiki/Archivo:Selection-Sort-Animation.gif" target="_blank">Wikimedia Commons</a></div>
</div>
<p>Por defecto, los TreeSet ordenan sus elementos de forma ascendente, pero, ¿se podría cambiar el orden de ordenación?</p>
<p>Los TreeSet tienen un conjunto de operaciones adicionales, además de las que incluye por el hecho de ser un conjunto, que permite entre otras cosas, cambiar la forma de ordenar los elementos. Esto es especialmente útil cuando el tipo de objeto que se almacena no es un simple número, sino algo más complejo (un artículo por ejemplo). TreeSet es capaz de ordenar tipos básicos (números, cadenas y fechas) pero otro tipo de objetos no puede ordenarlos con tanta facilidad.</p>
<p>Para indicar a un TreeSet cómo tiene que ordenar los elementos, debemos decirle cuándo un elemento va antes o después que otro, y cuándo son iguales. Para ello, utilizamos la interfaz genérica java.util.Comparator, usada en general en algoritmos de ordenación, como veremos más adelante. Se trata de crear una clase que implemente dicha interfaz, así de fácil. Dicha interfaz requiere de un único método que debe calcular si un objeto pasado por parámetro es mayor, menor o igual que otro del mismo tipo. Veamos un ejemplo general de cómo implementar un comparador para una hipotética clase "Objeto":</p>
<div class="codigo elemento_centrado" style="width: 39em;">
<div class="texto_izquierda">
<pre>class ComparadorDeObjetos implements Comparator&lt;Objeto&gt; {
</pre>
<pre>    public int compare(Objeto objeto1, Objeto objeto2) { ... }    
</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>La interfaz Comparator obliga a implementar un único método, es el método compare(), el cual tiene dos parámetros: los dos elementos a comparar. Las reglas son sencillas, a la hora de personalizar dicho método:</p>
<ul class="lista_verificacion">
<li>Si el primer objeto (objeto1) es menor que el segundo (o&lt;code&gt;bjeto2), debe devolver un número entero negativo.</li>
<li>Si el primer objeto (o&lt;code&gt;bjeto1) es mayor que el segundo (o&lt;code&gt;bjeto2), debe devolver un número entero positivo.</li>
<li>Si ambos son iguales, debe devolver 0.</li>
</ul>
<p>Te suena, ¿verdad? Es el mismo criterio que seguía el método compareTo() que usábamos para comparar dos String... pero eso es otra historia</p>
<p>A veces, cuando el orden que deben tener los elementos es diferente al orden real (por ejemplo cuando ordenamos los números en orden inverso), la definición de antes, pensando en menor y mayor,  puede ser un poco liosa, así que es recomendable en tales casos pensar en términos de delante y detrás, o de antes y después, más o menos de la siguiente forma:</p>
<ul class="lista_verificacion">
<li>Si el primer objeto (o&lt;code&gt;bjeto1) debe ir antes que el segundo objeto (o&lt;code&gt;bjeto2), devolver entero negativo.</li>
<li>Si el primer objeto (o&lt;code&gt;bjeto1) debe ir después que el segundo objeto (o&lt;code&gt;bjeto2), devolver entero positivo.</li>
<li>Si ambos son iguales, debe devolver 0.</li>
</ul>
<p>Una vez creado el comparador simplemente tenemos que pasarlo como parámetro en el momento de la creación al TreeSet, y los datos internamente mantendrán dicha ordenación:</p>
<div class="codigo elemento_centrado" style="width: 45.6em;">
<div class="texto_izquierda">
<pre>TreeSet&lt;Objeto&gt; ts=new TreeSet&lt;Objeto&gt;(new ComparadorDeObjetos());
</pre>
</div>
</div></div></div>
</div>
<div class="EjercicioresueltofpdIdevice" id="id72">
<div class="iDevice emphasis_ejercicioresueltofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_ejercicioresueltofpd.gif">
<span class="iDeviceTitle"><strong>Ejercicio resuelto</strong></span>
<div class="iDevice_inner">
<div id="ta72_67" class="block" style="display:block;position:relative"></div><div class="question">
<div id="taquesQuestion0b72" class="block" style="display:block;position:relative"><p>¿Fácil no? Pongámoslo en práctica. Imagínate que Objeto es una clase como la siguiente:</p>
<div class="codigo elemento_centrado" style="width: 15.9em;">
<div class="texto_izquierda">
<pre>class Objeto {
</pre>
<pre>     public int a;
</pre>
<pre>     public int b;
</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>Imagina que ahora, al añadirlos en un TreeSet, éstos se tienen que ordenar de forma que la suma de sus atributos (a y <code>b</code>) sea descendente, ¿como sería el comparador?</p></div><div id="viewq0b72" style="display:block;"><input type="button" name="btnshowq0b72" value="Mostrar retroalimentación" class="feedbackbutton" onclick="showAnswer(&#39;q0b72&#39;,1)">
</div><div id="hideq0b72" style="display:none;"><input type="button" name="btnhideq0b72" value="Ocultar retroalimentación" class="feedbackbutton" onclick="showAnswer(&#39;q0b72&#39;,0)">
<p></p></div><div id="sq0b72" class="feedback" style=" display: none;"><div id="taquesFeedback0b72" class="block" style="display:block;position:relative"><p>Una de las posibles soluciones a este problema podría ser la siguiente:</p>
<div class="codigo elemento_centrado" style="width: 39em;">
<div class="texto_izquierda">
<pre>class ComparadorDeObjetos implements Comparator&lt;Objeto&gt; {</pre>
<pre>    @Override</pre>
<pre>    public int compare(Objeto objeto1, Objeto objeto2){</pre>
<pre>       &lt;code&gt;int resultado;</pre>
<pre>       int sumaObjeto1=objeto1.a+objeto1.b;  </pre>
<pre>       int sumaObjeto2=objeto2.a+objeto2.b;  </pre>
<pre>       if (sumaObjeto1 &lt; sumaObjeto2){</pre>
<pre>             resultado=1; </pre>
<pre>       }else{  </pre>
<pre>           if (sumaObjeto1&gt;sumaObjeto2){ </pre>
<pre>                resultado=-1;</pre>
<pre>           }else{</pre>
<pre>               resultado=0;</pre>
<pre>           }</pre>
<pre>       }</pre>
<pre>       return resultado;</pre>
<pre>   }</pre>
<pre>}</pre>
</div>
</div></div></div>
<noscript><div class="feedback">
<p><strong>Solution: </strong></p>
<p>Una de las posibles soluciones a este problema podría ser la siguiente:</p>
<div class="codigo elemento_centrado" style="width: 39em;">
<div class="texto_izquierda">
<pre>class ComparadorDeObjetos implements Comparator&lt;Objeto&gt; {</code></pre>
<pre>    @Override</code></pre>
<pre>    public int compare(Objeto objeto1, Objeto objeto2){</code></pre>
<pre>       &lt;code&gt;int </code>resultado;</code></pre>
<pre>       int sumaObjeto1=objeto1.a+objeto1.b;  </code></pre>
<pre>       int sumaObjeto2=objeto2.a+objeto2.b;  </code></pre>
<pre>       if (sumaObjeto1 &lt; sumaObjeto2){</code></pre>
<pre>             resultado=1; </code></pre>
<pre>       }else{  </code></pre>
<pre>           if (sumaObjeto1&gt;sumaObjeto2){ </code></pre>
<pre>                resultado=-1;</code></pre>
<pre>           }else{</code></pre>
<pre>               resultado=0;</code></pre>
<pre>           }</code></pre>
<pre>       }</code></pre>
<pre>       return resultado;</code></pre>
<pre>   }</code></pre>
<pre>}</code></pre>
</div>
</div></div></noscript>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.- Listas (I). Definición y diferencias con los conjuntos.</h1></div>
<div class="CasopracticofpdIdevice" id="id73">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta73_66" class="block" style="display:block;position:relative"><p><img style="float: left;" alt="Fotografía de María." class="elemento_derecha" src="./PROG_T8_files/CASO_PERSONAJES_03.jpg" title="María." height="160" width="172"></p>
<p><strong>Juan</strong> se queda pensando después de que <strong>Ana</strong> le preguntara si sabía los tipos de colecciones que había en <span lang="en">Java</span>. Obviamente no lo sabía, son muchos tipos, pero ya tenía una respuesta preparada:</p>
<p>—Bueno, sea lo que sea, siempre puedes utilizar una lista para almacenar cualquier cosa. Yo siempre las uso, pues te permiten almacenar cualquier tipo de objeto, extraer uno de la lista sin tener que recorrerla entera, o buscar si hay o no un elemento en ella, de forma cómoda. Son para mi el mejor invento desde la rueda —dijo <strong>Juan</strong>.</p>
<p>—Ya, supongo, pero hay dos tipos de listas que me interesan, LinkedList y <code>ArrayList.</code> ¿Cuál es mejor? ¿Cuál me conviene más? —respondió<strong> Ana</strong>.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id74">
<div class="iDevice emphasis0">
<div id="ta74_73" class="block" style="display:block;position:relative"><p><img alt="Fotografía en la que aparece una fila de hormigas y una que amplifica la imagen para ver con detalle una de ellas." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R038_EnDetalle.jpg" title="Mirando con lupa." width="192" height="128"></p>
<p>¿En qué se diferencia una lista de un conjunto?</p>
<p><strong>Las listas son elementos de programación un poco más avanzados que los conjuntos</strong>. Su ventaja es que amplían el conjunto de operaciones de las colecciones añadiendo operaciones extra. Veamos algunas de ellas:</p>
<ul class="lista_verificacion">
<li>Las listas <strong>sí pueden almacenar duplicados</strong>. Si no queremos duplicados, hay que verificar manualmente que el elemento no esté en la lista antes de su inserción.</li>
<li><strong>Acceso posicional</strong>. Podemos acceder a un elemento indicando su posición en la lista.</li>
<li><strong>Búsqueda</strong>. Es posible buscar elementos en la lista y obtener su posición. En los conjuntos, al ser colecciones sin aportar nada nuevo, solo se podía comprobar si un conjunto contenía o no un elemento de la lista, retornando verdadero o falso. Las listas mejoran este aspecto.</li>
<li><strong>Extracción de sublistas</strong>. Es posible obtener una lista que contenga solo una parte de los elementos de forma muy sencilla.</li>
</ul>
<p>En <span lang="en">Java</span>, para las listas se dispone de una interfaz llamada java.util.List, y dos implementaciones (java.util.LinkedList y <code>java.util.ArrayList</code>), con diferencias significativas entre ellas. Los métodos de la interfaz List, que obviamente estarán en todas las implementaciones y que permiten las operaciones anteriores, son:</p>
<ul class="lista_verificacion">
<li>E get(int index). El método get() permite obtener un elemento partiendo de su posición (index).</li>
<li>E set(int index, E element). El método set() permite cambiar el elemento almacenado en una posición de la lista (index), por otro (element).</li>
<li>void add(int index, E element). Se añade otra versión del método add(), en la cual se puede insertar un elemento (element) en la lista en una posición concreta (index), desplazando los existentes.</li>
<li>E remove(int index). Se añade otra versión del método remove(), esta versión permite eliminar un elemento indicando su posición en la lista.</li>
<li>boolean addAll(int index, Collection&lt;? extends E&gt; c). Se añade otra versión del método addAll(), que permite insertar una colección pasada por parámetro en una posición de la lista, desplazando el resto de elementos.</li>
<li>int indexOf(Object objeto). El método indexOf() permite conocer la posición (índice) de un elemento (<strong>objeto</strong>), si dicho elemento no está en la lista retornará<strong> -1</strong>.</li>
<li>int lastIndexOf(Object objeto). El método lastIndexOf() nos permite obtener la última ocurrencia del objeto en la lista (dado que la lista sí puede almacenar duplicados).</li>
<li>List&lt;E&gt; subList(int from, int to). El método subList() genera una sublista (una vista parcial de la lista) con los elementos comprendidos entre la posición inicial (incluida) y la posición final (no incluida).</li>
</ul>
<p>Ten en cuenta que los elementos de una lista empiezan a numerarse por 0. Es decir, que el primer elemento de la lista es el 0. Ten en cuenta también que List es una interfaz genérica, por lo que &lt;E&gt; corresponde con el tipo base usado como parámetro genérico al crear la lista.</p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id75">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion75_60" class="block" style="display:block;position:relative"><p><strong>Si M es una lista de números enteros, ¿sería correcto poner "M.add(M.size(),3);"?</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option75_60" id="i75_63" onclick="getFeedback(0,2,&#39;75_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans75_63" class="block" style="display:block;position:relative"><p>Sí.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option75_60" id="i75_114" onclick="getFeedback(1,2,&#39;75_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans75_114" class="block" style="display:block;position:relative"><p>No.</p></div></div>
</div></div>
<div id="sa0b75_60" class="feedback" style="display: none;"><div id="taf75_63" class="" style="display:block;position:relative"><p>Correcto. Inserta un elemento al final de la lista y es equivalente a poner M.add(3).</p></div></div>
<div id="sa1b75_60" class="feedback" style="display: none;"><div id="taf75_114" class="" style="display:block;position:relative"><p>Incorrecto. Piénsalo, ese código inserta un elemento al final de la lista.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Opción correcta</strong> <p>Correcto. Inserta un elemento al final de la lista y es equivalente a poner M.add(3)</code>.</p></li><li><strong>Incorrecto</strong> <p>Incorrecto. Piénsalo, ese código inserta un elemento al final de la lista.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.1.- Listas (II). ¿Cómo se usan?</h1></div>
<div class="FreeTextfpdIdevice" id="id76">
<div class="iDevice emphasis0">
<div id="ta76_73" class="block" style="display:block;position:relative"><p><img alt="Imagen en la que se ve a María trabajando." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R039_trabajando.jpg" title="María trabajando."></p>
<p>Y, ¿cómo se usan las listas? Pues para usar una lista haremos uso de sus implementaciones LinkedList y <code>ArrayList</code>. Veamos un ejemplo de su uso y después obtendrás respuesta a esta pregunta.</p>
<p>Supongo que intuirás cómo se usan, pero nunca viene mal un ejemplo sencillo, que nos aclare las ideas. El siguiente ejemplo muestra cómo usar una LinkedList, pero valdría también para ArrayList (no olvides importar las clases java.util.LinkedList y <code>java.util.ArrayList</code> según sea necesario). En este ejemplo se usan los métodos de acceso posicional a la lista:</p>
<div class="codigo elemento_centrado" style="width: 64.85em;">
<div class="texto_izquierda">
<pre>LinkedList&lt;Integer&gt; t=new LinkedList&lt;Integer&gt;(); // Declaración y creación del LinkedList de enteros.
</pre>
<pre>t.add(1); // Añade un elemento al final de la lista.
</pre>
<pre>t.add(3); // Añade otro elemento al final de la lista.
</pre>
<pre>t.add(1,2); // Añade en la posición 1 el elemento 2.
</pre>
<pre>t.add(t.get(1)+t.get(2)); // Suma los valores contenidos en la posición 1 y 2, y lo agrega al final.
</pre>
<pre>t.remove(0); // Elimina el primer elemento de la lista.
</pre>
<pre>int contador= 0;&lt;br /&gt;for (Integer i: t) {</pre>
<pre>    &lt;code&gt;contador++;&lt;br /&gt;    System.out.println("Elemento " + contador + ": " + i); // Muestra cada elemento de la lista.  </pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior se realizan muchas operaciones, ¿cuál será el contenido de la lista al final?</p>
<p>Pues será 2, 3 y 5. En el ejemplo cabe destacar el uso del bucle <strong><span lang="en">for-each</span></strong>. Recuerda que se puede usar en cualquier colección.</p>
<p>Veamos otro ejemplo, esta vez con ArrayList, de cómo obtener la posición de un elemento en la lista:</p>
<div class="codigo elemento_centrado" style="width: 63.75em;">
<div class="texto_izquierda">
<pre>ArrayList&lt;Integer&gt; al=new ArrayList&lt;Integer&gt;(); // Declaración y creación del ArrayList de enteros.
</pre>
<pre>al.add(10); </pre>
<pre>al.add(11); // Añadimos dos elementos a la lista.</pre>
<pre>al.set(al.indexOf(11), 12); // Sustituimos el 11 por el 12, primero lo buscamos y luego lo reemplazamos.
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior se emplea tanto el método indexOf() para obtener la posición de un elemento como el método set() para reemplazar el valor en una posición, una combinación muy habitual. Se generará un ArrayList que contendrá dos números, el 10 y el 12. Veamos ahora un ejemplo algo más difícil:</p>
<div class="codigo elemento_centrado" style="width: 26.35em;">
<div class="texto_izquierda">
<pre>al.addAll(0, t.subList(1, t.size()));
</pre>
</div>
</div>
<p> </p>
<p>Este ejemplo es especial porque usa sublistas. Se usa el método size() para obtener el tamaño de la lista. Después el método subList() para extraer una sublista de la lista (que incluía en origen los números 2, 3 y 5), desde la posición 1 hasta el final de la lista (lo cual dejaría fuera al primer elemento). Y por último, se usa el método addAll() para añadir todos los elementos de la sublista al ArrayList anterior.</p>
<p>Debes saber que <strong><span class="destacado_inline">las operaciones aplicadas a una sublista repercuten sobre la lista original</span></strong>. Por ejemplo, si ejecutamos el método clear() sobre una sublista, se borrarán todos los elementos de la sublista, pero también se borrarán dichos elementos de la lista original:</p>
<div class="codigo elemento_centrado" style="width: 19.75em;">
<div class="texto_izquierda">
<pre>al.subList(0, 2).clear();
</pre>
</div>
</div>
<p> </p>
<p>Lo mismo ocurre al añadir un elemento, se añade en la sublista y en la lista original.</p></div></div>
</div>
<div class="DebesconocerfpdIdevice" id="id77">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta77_48" class="block" style="display:block;position:relative"><p>Las listas enlazadas son un elemento muy recurrido y su funcionamiento interno es complejo. Te recomendamos el siguiente artículo de la wikipedia para profundizar un poco más en las listas enlazadas y los diferentes tipos que hay.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a enlace de la wikipedia sobre las listas enlazadas." href="http://es.wikipedia.org/wiki/Lista_enlazada">Listas enlazadas.</a></p></div></div>
</div>
</div>
<div class="ClozefpdIdevice" id="id78">
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<div class="iDevice_inner">
<div id="ta78_41" class="block" style="display:block;position:relative"><p><strong><strong>Dado el siguiente código, c</strong>ompleta el cuadro vacío con el número que falta.</strong></p>
<p><strong> </strong></p>
<div class="codigo elemento_centrado" style="width: 51.1em;">
<div class="texto_izquierda">
<pre> LinkedList&lt;Integer&gt; t=new LinkedList&lt;Integer&gt;();
</pre>
<pre> t.add(t.size()+1); </pre>
<pre> t.add(t.size()+1);  </pre>
<pre> Integer suma = t.get(0) + t.get(1);</pre>
</div>
</div></div><div id="cloze78_42">
<script>var YOUR_SCORE_IS = "Su puntuación es ";</script>
<input type="hidden" name="clozeFlag78_42.strictMarking" id="clozeFlag78_42.strictMarking" value="false">

<input type="hidden" name="clozeFlag78_42.checkCaps" id="clozeFlag78_42.checkCaps" value="false">

<input type="hidden" name="clozeFlag78_42.instantMarking" id="clozeFlag78_42.instantMarking" value="false">

<p>El valor de la variable suma después de ejecutarlo es 
 <input type="text" value="" id="clozeBlank78_42.0" style="width:1em">

<span style="display: none;" id="clozeAnswer78_42.0">JXUwMDZi
</span>
 .</p>
<div class="block">

<input type="button" name="submit78_42" value="Enviar" id="submit78_42" onclick="clozeSubmit(&#39;78_42&#39;)">

<input type="button" name="restart78_42" value="Reiniciar" style="display: none;" id="restart78_42" onclick="clozeRestart(&#39;78_42&#39;)">

  
<input type="button" name="78_42showAnswersButton" value="Mostrar las respuestas" style="display: none;" id="showAnswersButton78_42" onclick="fillClozeInputs(&#39;78_42&#39;)">

<div id="clozeScore78_42"></div>
</div>
</div></div>
<noscript><div class="feedback">
<strong>Solution: </strong><br />
<p>El valor de la variable suma después de ejecutarlo es <span style="text-decoration: underline;">3</span> .</p></div></noscript></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.2.- Listas (III). Diferencias entre LinkedList y ArrayList.</h1></div>
<div class="FreeTextfpdIdevice" id="id79">
<div class="iDevice emphasis0">
<div id="ta79_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " lista="" doblemente="" enlazada"."="" href="./PROG_T8_files/PROG09_CONT_R040_ListaDoblementeEnlazada.png"><img alt="Ilustración que muestra como funciona una lista doblemente enlazada. En la imagen se ven varios nodos unidos por flechas, simbolizando a un puntero o apuntador que contiene la dirección del elemento anterior y posterior en la lista. También se muestra un ejemplo de como podría ser un clase nodo, que encadenados entre sí darían lugar a la lista. La clase nodo propuesta contiene tres campos, uno sig (instancia de la clase Nodo), que sería un apuntador o puntero al siguiente nodo, uno ant (también instancia de la clase nodo), que sería un puntero al nodo anterior, y una instancia de la clase Object, llamada v, destinada a contener el valor almacenado en cada nodo." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R040_ListaDoblementeEnlazada.png" title="Lista doblemente enlazada." width="196" height="103"></a></div>
</div>
<p>¿Y en qué se diferencia un LinkedList de un ArrayList?</p>
<p>Los LinkedList utilizan listas doblemente enlazadas, que son listas enlazadas (como se vio en un apartado anterior), pero que permiten ir hacia atrás en la lista de elementos. Los elementos de la lista se encapsulan en los llamados nodos. Los nodos van enlazados unos a otros para no perder el orden y no limitar el tamaño de almacenamiento. Tener un doble enlace significa que en cada nodo se almacena la información de cuál es el siguiente nodo y además, de cuál es el nodo anterior. Si un nodo no tiene nodo siguiente o nodo anterior, se almacena null o nulo para ambos casos.</p>
<p>No es el caso de los ArrayList. Éstos se implementan utilizando <span lang="en">arrays</span> que se van redimensionando conforme se necesita más espacio o menos. La redimensión es transparente para nosotros, no nos enteramos cuando se produce, pero eso redunda en una diferencia de rendimiento notable dependiendo del uso. Los ArrayList son más rápidos en cuanto a acceso a los elementos, acceder a un elemento según su posición es más rápido en un <span lang="en">array</span> que en una lista doblemente enlazada (hay que recorrer la lista). En cambio, eliminar un elemento implica muchas más operaciones en un <span lang="en">array</span> que en una lista enlazada de cualquier tipo.</p>
<p>¿Y esto que quiere decir?</p>
<p class="destacado"><strong>Si se van a realizar muchas operaciones de eliminación de elementos sobre la lista, conviene usar una lista enlazada (LinkedList), pero si no se van a realizar muchas eliminaciones, sino que solamente se van a insertar y consultar elementos por posición, conviene usar una lista basada en <span lang="en">arrays</span> redimensionados (ArrayList)</strong>.</p>
<p>LinkedList tiene otras ventajas que pueden hacer aconsejable su uso. Implementa las interfaces java.util.Queue y <code>java.util.Deque</code>. Dichas interfaces permiten hacer uso de las listas como si fueran una cola de prioridad o una pila, respectivamente.</p>
<p><strong>Las colas</strong>, también conocidas como colas de prioridad, son una lista, pero que aportan métodos para trabajar de forma diferente. ¿Tú sabes lo que es hacer cola para que te atiendan en una ventanilla? Pues igual. Se trata de que el primero llega es el primero en ser atendido (<acronym title="First In First Out. (Primero en Entrar, Primero en Salir)." lang="en">FIFO</acronym>). Simplemente se aportan tres métodos nuevos: meter en el final de la lista (add() y <code>offer()</code>), sacar y eliminar el elemento más antiguo (poll()), y examinar el elemento al principio de la lista sin eliminarlo (peek()). Dichos métodos están disponibles en las listas enlazadas LinkedList:</p>
<ul class="lista_verificacion">
<li>boolean add(E e) y boolean offer(E e), devolverán true si se ha podido insertar el elemento al final de la LinkedList.</li>
<li>E poll() devolverá el primer elemento de la LinkedList y lo eliminará de la misma. Al insertar al final, los elementos más antiguos siempre están al principio. Retornará null si la lista está vacía.</li>
<li>E peek() devolverá el primer elemento de la LinkedList pero no lo eliminará, permite examinarlo. Retornará null si la lista está vacía.</li>
</ul>
<p><strong>Las pilas</strong>, mucho menos usadas, son todo lo contrario a las colas. Una pila es igual que una montaña de hojas en blanco, para añadir hojas nuevas se ponen encima del resto, y para retirar una se coge la primera que hay, encima de todas. En las pilas el último en llegar es el primero en ser atendido. Para ello se proveen de tres métodos: meter al principio de la pila (push()), sacar y eliminar del principio de la pila (pop()), y examinar el primer elemento de la pila (peek(), igual que si usara la lista como una cola).</p>
<p>Las pilas se usan menos y haremos menos hincapié en ellas. Simplemente ten en mente que, tanto las colas como las pilas, son una lista enlazada sobre la que se hacen operaciones especiales.</p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id80">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion80_60" class="block" style="display:block;position:relative"><p><strong>Dada la siguiente lista, usada como si fuera una cola de prioridad, ¿cuál es la letra que se mostraría por la pantalla tras su ejecución?</strong></p>
<div class="codigo elemento_centrado" style="width: 35.15em;">
<div class="texto_izquierda">
<pre>LinkedList&lt;String&gt; tt=new LinkedList&lt;String&gt;();
</pre>
<pre>tt.offer("A"); </pre>
<pre>tt.offer("B"); </pre>
<pre>tt.offer("C");</pre>
<pre>System.out.println(tt.poll());
</pre>
</div>
</div></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option80_60" id="i80_63" onclick="getFeedback(0,3,&#39;80_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans80_63" class="block" style="display:block;position:relative"><p>A.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option80_60" id="i80_120" onclick="getFeedback(1,3,&#39;80_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans80_120" class="block" style="display:block;position:relative"><p>C.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option80_60" id="i80_123" onclick="getFeedback(2,3,&#39;80_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans80_123" class="block" style="display:block;position:relative"><p>D.</p></div></div>
</div></div>
<div id="sa0b80_60" class="feedback" style="display: none;"><div id="taf80_63" class="" style="display:block;position:relative"><p>Correcto. Efectivamente, el primero en entrar es el primero que sale.</p></div></div>
<div id="sa1b80_60" class="feedback" style="display: none;"><div id="taf80_120" class="" style="display:block;position:relative"><p>Incorrecto. Revisa el funcionamiento de las colas.</p></div></div>
<div id="sa2b80_60" class="feedback" style="display: none;"><div id="taf80_123" class="" style="display:block;position:relative"><p>No es correcto. El elemento D no está en la lista.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Opción correcta</strong> <p>Correcto. Efectivamente, el primero en entrar es el primero que sale.</p></li><li><strong>Incorrecto</strong> <p>Incorrecto. Revisa el funcionamiento de las colas.</p></li><li><strong>Incorrecto</strong> <p>No es correcto. El elemento D no está en la lista.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
4.3.- Listas (IV). ¿Es igual si los elementos son mutables o inmutables?</h1></div>
<div class="FreeTextfpdIdevice" id="id81">
<div class="iDevice emphasis0">
<div id="ta81_73" class="block" style="display:block;position:relative"><p><img alt="Ordenador de un puesto de trabajo de una oficina." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R041_Ordenador2.jpg" title="Ordenador en puesto de trabajo." height="128" width="192"></p>
<p>A la hora de usar las listas, hay que tener en cuenta un par de detalles, ¿sabes cuáles? Es sencillo, pero importante.</p>
<p>No es lo mismo usar las colecciones (listas y conjuntos) con objetos inmutables (String, <code>Integer</code>, <abbr title="etcétera.">etc.</abbr>) que con objetos mutables. Los objetos inmutables no pueden ser modificados después de su creación, por lo que cuando se incorporan a la lista, a través de los métodos add(), se pasan por copia (es decir, se realiza una copia de los mismos). En cambio los objetos mutables (como las clases que tú puedes crear), no se copian, y eso puede producir efectos no deseados.</p>
<p>Imagínate la siguiente clase, que contiene un número:</p>
<div class="codigo elemento_centrado" style="width: 32.95em;">
<div class="texto_izquierda">
<pre>class Test {</pre>
<pre>    public Integer numero;</pre>
<pre>    Test (int numero) { </pre>
<pre>        this.numero=new Integer(numero);</pre>
<pre>    }</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>La clase de antes es mutable, por lo que no se pasa por copia a la lista. Ahora imagina el siguiente código en el que se crea una lista que usa este tipo de objeto, y en el que se insertan dos objetos:</p>
<div class="codigo elemento_centrado" style="width: 64.3em;">
<div class="texto_izquierda">
<pre>Test p1=new Test(11); // Se crea un objeto Test donde el entero que contiene vale 11.
</pre>
<pre>Test p2=new Test(12); // Se crea otro objeto Test donde el entero que contiene vale 12.
</pre>
<pre>LinkedList&lt;Test&gt; lista=new LinkedList&lt;Test&gt;(); // Creamos una lista enlazada para objetos tipo Test.
</pre>
<pre>lista.add(p1); // Añadimos el primer objeto test.
</pre>
<pre>lista.add(p2); // Añadimos el segundo objeto test. 
</pre>
<pre>for (Test p:lista){</pre>
<pre>     System.out.println(p.numero); // Mostramos la lista de objetos.</pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>¿Qué mostraría por pantalla el código anterior?   Simplemente mostraría los números 11 y 12 en líneas consecutivas.</p>
<p>Ahora bien, ¿qué pasa si modificamos el valor de uno de los números de los objetos test? ¿Qué se mostrará al ejecutar el siguiente código?</p>
<div class="codigo elemento_centrado" style="width: 30.75em;">
<div class="texto_izquierda">
<pre>p1.numero=44;</pre>
<pre>for (Test p:lista){</pre>
<pre>     System.out.println(p.numero);</pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>El resultado de ejecutar el código anterior es que se muestran los números 44 y 12. El número ha sido modificado y no hemos tenido que volver a insertar el elemento en la lista para que en la lista se cambie también. Esto es porque en la lista no se almacena una copia del objeto Test, sino un apuntador a dicho objeto (solo hay una copia del objeto a la que se hace referencia desde distintos lugares).</p></div></div>
</div>
<div class="CitasparapensarfpdIdevice" id="id123">
<div class="iDevice emphasis_citasparapensarfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_citasparapensarfpd.gif">
<span class="iDeviceTitle"><strong>Citas para pensar</strong></span>
<div class="iDevice_inner">
<div id="ta123_49" class="block" style="display:block;position:relative"><blockquote>
<p>"Controlar la complejidad es la esencia de la programación."</p>
<p><strong><cite class="elemento_derecha">Brian Kernighan</cite></strong></p>
</blockquote></div></div>
</div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id83">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion83_60" class="block" style="display:block;position:relative"><p><strong>Los elementos de un ArrayList de objetos Short se copian al insertarse, ya que son objetos mutables. ¿Verdadero o falso?</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option83_60" id="i83_63" onclick="getFeedback(0,2,&#39;83_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans83_63" class="block" style="display:block;position:relative"><p>Verdadero.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option83_60" id="i83_127" onclick="getFeedback(1,2,&#39;83_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans83_127" class="block" style="display:block;position:relative"><p>Falso.</p></div></div>
</div></div>
<div id="sa0b83_60" class="feedback" style="display: none;"><div id="taf83_63" class="" style="display:block;position:relative"><p>Lo siento, pero no has acertado. Los objetos Short son inmutables.</p></div></div>
<div id="sa1b83_60" class="feedback" style="display: none;"><div id="taf83_127" class="" style="display:block;position:relative"><p>Acertaste. Los elementos se pasan por copia por ser inmutables, no mutables.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>Lo siento, pero no has acertado. Los objetos Short</code> son inmutables.</p></li><li><strong>Opción correcta</strong> <p>Acertaste. Los elementos se pasan por copia por ser inmutables, no mutables.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
5.- Conjuntos de pares clave/valor.</h1></div>
<div class="CasopracticofpdIdevice" id="id84">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta84_66" class="block" style="display:block;position:relative"><p><img style="float: left;" alt="Imagen que muestra una bombilla encendida." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R042_bombilla_encendida.jpg" title="Bombilla encendida." height="128" width="192"></p>
<p><strong>Juan</strong> se quedó pensativo después de la conversación con <strong>Ana</strong>. <strong>Ana</strong> se fue a su puesto a seguir trabajando, pero él se quedó dándole vueltas al asunto...</p>
<p>—Sí que está bien preparada <strong>Ana</strong>, me ha puesto en jaque y no sabía qué responder.</p>
<p>El hecho de no poder ayudar a <strong>Ana</strong> le frustró un poco.</p>
<p>De repente, apareció <strong>María</strong>. Entonces <strong>Juan</strong> aprovecha el momento para preguntar con más detalle acerca del trabajo de <strong>Ana</strong>. <strong>María</strong> se lo cuenta y de repente, se le enciende una bombilla a <strong>Juan</strong>:</p>
<p>—Vale, creo que puedo ayudar a <strong>Ana</strong> en algo, le aconsejaré usar mapas y le explicaré cómo se usan.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id85">
<div class="iDevice emphasis0">
<div id="ta85_73" class="block" style="display:block;position:relative"><p><img alt="Imagen que muestra dos tomos de un diccionario de la real academia de la lengua española." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R043_diccionario.jpg" style="width: 192px; height: 128px;" title="Diccionarios." height="128" width="192"></p>
<p>¿Cómo almacenarías los datos de un diccionario?</p>
<p>Tenemos por un lado cada palabra y por otro su significado. Para resolver este problema existe precisamente un tipo de <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/">array asociativo<span><em>Array asociativo</em>Es un tipo de array que en vez de permitir el acceso por posición numérica, permite el acceso a los elementos almacenados en base a un valor diferente, numérico o no, pero que no hace referencia a su posición, sino al contenido almacenado. Podríamos por ejemplo, almacenar los datos de una persona, y acceder a dichos datos en base a su número de documento de identidad. El número del documento sería la clave que permitiría acceder al resto de la información.</span></a>:  los mapas o diccionarios, que permiten almacenar pares de valores conocidos como <strong>clave y valor</strong>. La clave se utiliza para acceder al valor, como una entrada de un diccionario permite acceder a su definición.</p>
<p>En <span lang="en">Java</span> existe la interfaz java.util.Map que define los métodos que deben tener los mapas, y existen tres implementaciones principales de dicha interfaz:</p>
<ul class="lista_verificacion">
<li>java.util.HashMap<code></code></li>
<li>java.util.TreeMap</li>
<li>java.util.LinkedHashMap.</li>
</ul>
<p>¿Te suenan? Claro que sí. Cada una de ellas, respectivamente, tiene características similares a HashSet, <code>TreeSet</code> y LinkedHashSet, tanto en funcionamiento interno como en rendimiento.</p>
<p>Los <strong>mapas utilizan clases genéricas</strong> para dar extensibilidad y flexibilidad, y permiten definir un tipo base para la clave, y otro tipo diferente para el valor. Veamos un ejemplo de cómo crear un mapa, que es extensible a los otros dos tipos de mapas:</p>
<div class="codigo elemento_centrado" style="width: 40.1em;">
<div class="texto_izquierda">
<pre>HashMap&lt;String,Integer&gt; t=new HashMap&lt;String,Integer&gt;();
</pre>
</div>
</div>
<p> </p>
<p>El mapa anterior permite usar cadenas como llaves y almacenar de forma asociada a cada llave, un número entero. Veamos los métodos principales de la interfaz Map, disponibles en todas las implementaciones. En los ejemplos, V es el tipo base usado para el valor y K el tipo base usado para la llave:</p>
<table class="tabla" summary="Tabla que muestra los métodos principales de los mapas. En la primera columna aparecen el listado de métodos y en la segunda una breve descripción de cada uno de ellos. "><caption>Métodos principales de los mapas.</caption>
<thead>
<tr><th scope="col">Método.</th><th scope="col">Descripción.</th></tr>
</thead>
<tbody>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>V put(K key, V value) 
</pre>
</div>
</div>
</th>
<td>Inserta un par de objetos llave (key) y valor (value) en el mapa. Si la llave ya existe en el mapa, entonces devolverá el valor asociado que tenía antes, si la llave no existía, entonces devolverá null.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>V get(Object key)
</pre>
</div>
</div>
</th>
<td>Obtiene el valor asociado a una llave ya almacenada en el mapa. Si no existe la llave, devolverá null.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>V remove(Object key)
</pre>
</div>
</div>
</th>
<td>Elimina la llave y el valor asociado. Devuelve el valor asociado a la llave, por si lo queremos utilizar para algo, o null, si la llave no existe.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>boolean containsKey(Object key)
</pre>
</div>
</div>
</th>
<td>Devolverá true si el mapa tiene almacenada la llave pasada por parámetro, false en cualquier otro caso.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>boolean containsValue(Object value)
</pre>
</div>
</div>
</th>
<td>Devolverá true si el mapa tiene almacenado el valor pasado por parámetro, false en cualquier otro caso.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>int size()
</pre>
</div>
</div>
</th>
<td>Devolverá el número de pares llave y valor almacenado en el mapa.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>boolean isEmpty()
</pre>
</div>
</div>
</th>
<td>Devolverá true si el mapa está vacío, false en cualquier otro caso.</td>
</tr>
<tr><th scope="row">
<div>
<div class="texto_izquierda">
<pre>void clear()
</pre>
</div>
</div>
</th>
<td>Vacía el mapa.</td>
</tr>
</tbody>
</table></div></div>
</div>
<div class="ClozefpdIdevice" id="id122">
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<div class="iDevice_inner">
<div id="ta122_41" class="block" style="display:block;position:relative"><strong>Completa el siguiente código para que al final se muestre el número 40 por pantalla:</strong>
</div><div id="cloze122_42">
<script>var YOUR_SCORE_IS = "Su puntuación es ";</script>
<input type="hidden" name="clozeFlag122_42.strictMarking" id="clozeFlag122_42.strictMarking" value="false">

<input type="hidden" name="clozeFlag122_42.checkCaps" id="clozeFlag122_42.checkCaps" value="false">

<input type="hidden" name="clozeFlag122_42.instantMarking" id="clozeFlag122_42.instantMarking" value="false">

<p>
HashMap&lt; String, 
 <input type="text" value="" id="clozeBlank122_42.0" style="width:6em">

<span style="display: none;" id="clozeAnswer122_42.0">JXUwMDBiJXUwMDI3JXUwMDA2JXUwMDFiJXUwMDA3JXUwMDA5
</span>
  &gt; datos=new  
 <input type="text" value="" id="clozeBlank122_42.1" style="width:7em">

<span style="display: none;" id="clozeAnswer122_42.1">JXUwMDEwJXUwMDI5JXUwMDEyJXUwMDFiJXUwMDI1JXUwMDJjJXUwMDEx
</span>
 &lt; String,String &gt;();<br>
datos. 
 <input type="text" value="" id="clozeBlank122_42.2" style="width:3em">

<span style="display: none;" id="clozeAnswer122_42.2">JXUwMDI4JXUwMDA1JXUwMDAx
</span>
 ("A","44");<br>
System.out.println(Integer. 
 <input type="text" value="" id="clozeBlank122_42.3" style="width:8em">

<span style="display: none;" id="clozeAnswer122_42.3">JXUwMDI4JXUwMDExJXUwMDEzJXUwMDAxJXUwMDE2JXUwMDJjJXUwMDI3JXUwMDFh
</span>
 (datos. 
 <input type="text" value="" id="clozeBlank122_42.4" style="width:3em">

<span style="display: none;" id="clozeAnswer122_42.4">JXUwMDNmJXUwMDAyJXUwMDEx
</span>
  ("  
 <input type="text" value="" id="clozeBlank122_42.5" style="width:1em">

<span style="display: none;" id="clozeAnswer122_42.5">JXUwMDE5
</span>
  "))- 
 <input type="text" value="" id="clozeBlank122_42.6" style="width:1em">

<span style="display: none;" id="clozeAnswer122_42.6">JXUwMDZj
</span>
 );
</p>

<div class="block">

<input type="button" name="submit122_42" value="Enviar" id="submit122_42" onclick="clozeSubmit(&#39;122_42&#39;)">

<input type="button" name="restart122_42" value="Reiniciar" style="display: none;" id="restart122_42" onclick="clozeRestart(&#39;122_42&#39;)">

  
<input type="button" name="122_42showAnswersButton" value="Mostrar las respuestas" style="display: none;" id="showAnswersButton122_42" onclick="fillClozeInputs(&#39;122_42&#39;)">

<div id="clozeScore122_42"></div>
</div>
</div></div>
<noscript><div class="feedback">
<strong>Solution: </strong><br />
<p>
HashMap&lt; String,</code> <u>String</u>  &gt; datos=new </code> <u>HashMap</u> &lt; String,String &gt;();</code><br />
datos.</code> <u>put</u> (&quot;A&quot;,&quot;44&quot;);</code><br />
System.out.println(Integer.</code> <u>parseInt</u> (datos.</code> <u>get</u>  (&quot;</code>  <u>A</u>  &quot;))-</code> <u>4</u> );</code>
</p>
</div></noscript></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
6.- Iteradores (I). ¿Qué son y cómo se usan?</h1></div>
<div class="CasopracticofpdIdevice" id="id119">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta119_66" class="block" style="display:block;position:relative"><p><img alt="Mapa del mundo." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R044_Mapa.jpg" style="width: 192px; height: 128px;" title="Mapa sí, pero no de este tipo."></p>
<p><strong>Juan</strong> se acerco a la mesa de <strong>Ana</strong> y le dijo:</p>
<p>—<strong>María</strong> me ha contado la tarea que te ha encomendado y he pensado que quizás te convendría usar mapas en algunos casos. Por ejemplo, para almacenar los datos del pedido asociados con una etiqueta: nombre, dirección, fecha, <acronym title="etcétera.">etc.</acronym> Así creo que te será más fácil generar luego el <acronym title="Extensible Markup Language." lang="en">XML</acronym>.</p>
<p>—La verdad es que pensaba almacenar los datos del pedido en una clase especial llamada Pedido. No tengo ni idea de qué son los mapas —dijo <strong>Ana</strong>—, supongo que son como las listas. ¿Tienen iteradores?</p>
<p>—Según me ha contado <strong>María,</strong> no necesitas hacer tanto, no es necesario crear una clase específica para los pedidos. Y respondiendo a tu pregunta, los mapas no tienen iteradores, pero hay una solución... Te explico.</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id120">
<div class="iDevice emphasis0">
<div id="ta120_73" class="block" style="display:block;position:relative"><p style="text-align: left;"><img alt="Logotipo de Java." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R045_Java.png" style="width: 196px; height: 160px; float: left;" title="Logotipo de Java."></p>
<div><a class="cc0" title="Dominio público" href="http://creativecommons.org/publicdomain/zero/1.0/deed.es" target="_blank"><span class="transparente">Dominio público</span></a> <a title="Java " href="https://commons.wikimedia.org/wiki/File:Java.png" target="_blank">Java </a></div>
<p> </p>
<p> </p>
<p>¿Qué son los iteradores realmente?</p>
<p>Son un mecanismo que nos permite recorrer todos los elementos de una colección de forma secuencial, sencilla y segura. Los mapas, como <strong>no derivan</strong> de la interfaz Collection realmente, no tienen iteradores, pero como veremos, existe un truco interesante.</p>
<p>Los iteradores permiten recorrer las colecciones de dos formas: <strong>bucles <span lang="en">for-each</span></strong> (existentes en <span lang="en">Java</span> a partir de la versión 1.5) <strong>y a través de un bucle normal creando un iterador</strong>. Como los bucles <strong><span lang="en">for-each</span></strong> ya los hemos visto antes y ha quedado patente su simplicidad, nos vamos a centrar en el otro método, especialmente útil en versiones antiguas de <span lang="en">Java</span>. Ahora la pregunta es: ¿cómo se crea un iterador? Pues invocando el método "iterator()" de cualquier colección. Veamos un ejemplo (en el ejemplo t es una colección cualquiera):</p>
<div class="codigo elemento_centrado" style="width: 26.35em;">
<div class="texto_izquierda">
<pre>Iterator&lt;Integer&gt; it=t.iterator();
</pre>
</div>
</div>
<p> </p>
<p>Fíjate que se ha especificado un parámetro para el tipo de dato genérico en el iterador (poniendo "&lt;Integer&gt;" después de Iterator). Esto es porque los iteradores son también clases genéricas, y es necesario especificar el tipo base que contendrá el iterador. Si no se especifica el tipo base del iterador, igualmente nos permitiría recorrer la colección, pero retornará objetos tipo Object (clase de la que derivan todas las clases), con lo que nos veremos obligados a forzar la conversión de tipo.</p>
<p>Para recorrer y gestionar la colección, el iterador ofrece tres métodos básicos:</p>
<ul class="lista_verificacion">
<li>boolean hasNext(). Devolverá true si le quedan más elementos a la colección por visitar. false en caso contrario.</li>
<li>E next(). Devolverá el siguiente elemento de la colección, si no existe siguiente elemento, lanzará una excepción (NoSuchElementException para ser exactos), con lo que conviene chequear primero si el siguiente elemento existe.</li>
<li>remove(). Elimina de la colección el último elemento retornado en la última invocación de next() (no es necesario pasárselo por parámetro). ¡Cuidado! Si next() no ha sido invocado todavía, saltará una incómoda excepción.</li>
</ul>
<p>¿Cómo recorreríamos una colección con estos métodos? Pues de una forma muy sencilla, un simple bucle mientras (while) con la condición hasNext() nos permite hacerlo:</p>
<div class="codigo elemento_centrado" style="width: 64.85em;">
<div class="texto_izquierda">
<pre>while (it.hasNext()) &lt;code&gt;{ // Mientras que haya un siguiente elemento, seguiremos en el bucle.</pre>
<pre>      Integer t=it.next(); // Escogemos el siguiente elemento.</pre>
<pre>      if (t%2==0) it.remove();  //Si es necesario, podemos eliminar el elemento extraído de la lista.</pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>¿Qué elementos contendría la lista después de ejecutar el bucle? Efectivamente, solo los números impares.</p></div></div>
</div>
<div class="ReflectionfpdmodifIdevice" id="id121">
<div class="iDevice emphasis_reflexionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_reflexionfpd.gif">
<span class="iDeviceTitle"><strong>Reflexiona</strong></span>
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<div class="iDevice_inner">
<div id="ta121_40" class="block" style="display:block;position:relative"><p>Las listas permiten acceso posicional a través de los métodos get() y <code>set()</code>, y acceso secuencial a través de iteradores. ¿Cuál es para ti la forma más cómoda de recorrer todos los elementos? ¿Un <strong>acceso posicional</strong> a través un bucle "for (i=0;i&lt;lista.size();i++)" o un <strong>acceso secuencial</strong> usando un bucle "while (iterador.hasNext())"?</p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
6.1.- Iteradores (II). ¿Qué características debemos considerar?</h1></div>
<div class="FreeTextfpdIdevice" id="id116">
<div class="iDevice emphasis0">
<div id="ta116_73" class="block" style="display:block;position:relative"><p>¿Qué inconvenientes tiene usar los iteradores sin especificar el tipo de objeto?</p>
<p>En el siguiente ejemplo, se genera una lista con los números del 0 al 10. Se eliminan de la lista aquellos que son pares y sólo se dejan los impares. En el ejemplo de la izquierda se especifica el tipo de objeto del iterador, en el ejemplo de la derecha no. Observa  que al no especificar el tipo de objeto del iterador,  tenemos que usar la conversión explícita de tipos (<strong><span lang="en">casting</span></strong>) en la línea 7.</p>
<table class="tabla" summary="Tabla en la que se muestran dos ejemplos de usos de los iteradores, en uno de ellos, el segundo, se usa conversión de tipos, en el otro, el primero, no."><caption>Comparación de usos de los iteradores, con o sin conversión de tipos.</caption>
<tbody>
<tr><th scope="col">Ejemplo indicando el tipo de objeto de iterador</th><th scope="col">Ejemplo no indicando el tipo de objeto del iterador</th></tr>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 37.35em;">
<div class="texto_izquierda">
<pre>ArrayList &lt;Integer&gt; lista=new ArrayList&lt;Integer&gt;();</pre>
<pre>for (int i=0;i&lt;=10;i++){ </pre>
<pre>     lista.add(i);</pre>
<pre>}</pre>
<pre>Iterator&lt;Integer&gt; it=lista.iterator();</pre>
<pre>while (it.hasNext()) {</pre>
<pre>    Integer t=it.next();</pre>
<pre>    if (t%2==0) it.remove();</pre>
<pre>}</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 37.35em;">
<div class="texto_izquierda">
<pre>ArrayList &lt;Integer&gt; lista=new ArrayList&lt;Integer&gt;();</pre>
<pre>for (int i=0;i&lt;=10;i++){</pre>
<pre>    lista.add(i);</pre>
<pre>}</pre>
<pre>Iterator it=lista.iterator();</pre>
<pre>while (it.hasNext()) {</pre>
<pre>    Integer t=(Integer)it.next();</pre>
<pre>    if (t%2==0) it.remove();</pre>
<pre>}</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><br> <img alt="Ilustración de un candado." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R046_candado.jpg" style="width: 136px; height: 200px;" title="Candado."></p>
<p>Un iterador <strong>es seguro porque esta pensado para</strong> <strong>no sobrepasar los límites de la colección,</strong> ocultando operaciones más complicadas que pueden repercutir en errores de <span lang="en">software</span>. Pero realmente <strong>se convierte en inseguro cuando es necesario hacer la operación de conversión de tipos</strong>. Si la colección no contiene los objetos esperados, al intentar hacer la conversión, saltará una incomoda excepción. Usar genéricos aporta grandes ventajas, pero usándolos adecuadamente.</p>
<p><strong>Para recorrer los mapas con iteradores, hay que hacer un pequeño truco</strong>. Usamos el método entrySet() que ofrecen los mapas para generar un conjunto con las entradas (pares de llave-valor) o bien el método keySet() para generar un conjunto con las llaves existentes en el mapa. Veamos cómo sería para el segundo caso, el más sencillo:</p>
<div class="codigo elemento_centrado" style="width: 62.1em;">
<div class="texto_izquierda">
<pre>HashMap&lt;Integer,Integer&gt; mapa=new HashMap&lt;Integer,Integer&gt;();</pre>
<pre>for (int i=0;i&lt;10;i++){</pre>
<pre>    mapa.put(i, i); // Insertamos datos de prueba en el mapa.</pre>
<pre>}</pre>
<pre>for (Integer llave:mapa.keySet()){ // Recorremos el conjunto generado por keySet(), contendrá las llaves.</pre>
<pre>           Integer valor=mapa.get(llave); //Para cada llave, accedemos a su valor si es necesario. </pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>Lo único que debes tener en cuenta es que el conjunto generado por <strong>keySet()</strong> no tendrá obviamente el método add() para añadir elementos al mismo, dado que eso tendrás que hacerlo a través del mapa.</p></div></div>
</div>
<div class="RecomendacionfpdIdevice" id="id117">
<div class="iDevice emphasis_recomendacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_recomendacionfpd.gif">
<span class="iDeviceTitle"><strong>Recomendación</strong></span>
<div class="iDevice_inner">
<div id="ta117_50" class="block" style="display:block;position:relative"><p>Si usas iteradores, y piensas eliminar elementos de la colección (e incluso de un mapa), debes usar el método remove() del iterador y no el de la colección. Si eliminas los elementos utilizando el método remove() de la colección, mientras estás dentro de un bucle de iteración, o dentro de un bucle <strong><span lang="en">for-each</span></strong>, los fallos que pueden producirse en tu programa son impredecibles. ¿Logras adivinar por qué se pueden producir dichos problemas?</p>
<p>Los problemas son debidos a que el método <code>remove()</code> del iterador elimina el elemento de dos sitios: de la colección y del iterador en sí (que mantiene interiormente información del orden de los elementos). Si usas el método remove() de la colección, la información solo se elimina de un lugar: de la colección.</p></div></div>
</div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id118">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion118_60" class="block" style="display:block;position:relative"><p>
<strong>¿Cuándo debemos invocar el método remove() de los iteradores?</strong>
</p>
</div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option118_60" id="i118_63" onclick="getFeedback(0,4,&#39;118_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans118_63" class="block" style="display:block;position:relative">En cualquier momento.
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option118_60" id="i118_101" onclick="getFeedback(1,4,&#39;118_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans118_101" class="block" style="display:block;position:relative"><p>
Después de invocar el método next().
</p>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option118_60" id="i118_104" onclick="getFeedback(2,4,&#39;118_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans118_104" class="block" style="display:block;position:relative"><p>
Después de invocar el método hasNext().
</p>
</div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option118_60" id="i118_107" onclick="getFeedback(3,4,&#39;118_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans118_107" class="block" style="display:block;position:relative">No es conveniente usar este método para eliminar elementos, es mejor usar el de la colección.
</div></div>
</div></div>
<div id="sa0b118_60" class="feedback" style="display: none;"><div id="taf118_63" class="" style="display:block;position:relative">Incorrecto. Deberías revisar el tema.
</div></div>
<div id="sa1b118_60" class="feedback" style="display: none;"><div id="taf118_101" class="" style="display:block;position:relative">Efectivamente, has dado en el clavo.
</div></div>
<div id="sa2b118_60" class="feedback" style="display: none;"><div id="taf118_104" class="" style="display:block;position:relative">No es correcto.
</div></div>
<div id="sa3b118_60" class="feedback" style="display: none;"><div id="taf118_107" class="" style="display:block;position:relative">Incorrecto. Es relativo, si usas iteradores deberías usar este método, sino usas iteradores, no importa.
</div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> Incorrecto. Deberías revisar el tema.
</li><li><strong>Opción correcta</strong> Efectivamente, has dado en el clavo.
</li><li><strong>Incorrecto</strong> No es correcto.
</li><li><strong>Incorrecto</strong> Incorrecto. Es relativo, si usas iteradores deberías usar este método, sino usas iteradores, no importa.
</li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.- Algoritmos (I). ¿Qué podemos hacer con las colecciones?</h1></div>
<div class="CasopracticofpdIdevice" id="id114">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta114_66" class="block" style="display:block;position:relative"><p><img alt="Fotografía de Ada." class="elemento_derecha" src="./PROG_T8_files/CASO_PERSONAJES_24.png" style="width: 128px; height: 192px;" title="Ada." width="128" height="192"></p>
<p><strong>Ada</strong> se acercó a preguntar a <strong>Ana </strong>cómo llevaba la tarea que le había encomendado<strong> <strong>María</strong></strong>. <strong>Ada</strong> era la jefa y <strong>Ana</strong> le tenía mucho respeto.  Era una tarea importante, así que prestó mucha atención.</p>
<p><strong>Ana</strong> le enseñó el código que estaba elaborando, le dijo que en un principio había pensado crear una clase llamada Pedido para almacenar los datos del pedido, pero que <strong>Juan</strong> le recomendó usar mapas para almacenar los pares de valor y dato. Así que se decantó por usar mapas para ese caso. Le comentó también que para almacenar los artículos si había creado una pequeña clase llamada Articulo. <strong>Ada</strong> le dio el visto bueno:</p>
<p>—Pues <strong>Juan</strong> te ha recomendado de forma adecuada, no vas a necesitar hacer ningún procesamiento especial de los datos del pedido, solo convertirlos de un formato específico a <acronym title="eXtended Markup Language" lang="en">XML</acronym>. Eso sí, sería recomendable que los artículos del pedido vayan ordenados por código de artículo —dijo <strong>Ada</strong>.</p>
<p>—¿Ordenar los artículos? Vaya, que jaleo —respondió <strong>Ana</strong>.</p>
<p>—Arriba ese ánimo mujer, si has usado listas es muy fácil, déjame ver tu código y te explicaré cómo hacerlo.</p>
<p>—Sí, aquí está, es el siguiente, espero que te guste:</p>
<div class="enlace_centrado"><a class="paquete" title="Descargar código fuente para procesar archivo de pedido en 2ª Fase de desarrollo." href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R047_ProcesarArchivoPedido_2aFase.zip">Procesar archivo de pedido, <abbr title="Segunda.">2ª</abbr> Fase.</a><span class="tamano"> (4 KB) </span></div></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id115">
<div class="iDevice emphasis0">
<div id="ta115_73" class="block" style="display:block;position:relative"><p><img alt="Fotografía de una baraja de cartas desordena." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R048_desorden.jpg" style="width: 128px; height: 192px;" title="¡¡Vaya desorden!! ¿Empezamos a ordenar?" height="192" width="128"></p>
<p>La palabra algoritmo seguro que te suena, pero, ¿a qué se refiere en el contexto de las colecciones y de otras estructuras de datos? Las colecciones, los <span lang="en">arrays</span> e incluso las cadenas, tienen un conjunto de operaciones típicas asociadas que son habituales. Algunas de estas operaciones ya las hemos visto antes, pero otras no. Veamos para qué nos pueden servir estas operaciones:</p>
<ul class="lista_verificacion">
<li><strong>Ordenar</strong> listas y <span lang="en">arrays</span>.</li>
<li><strong>Desordenar</strong> listas y <span lang="en">arrays</span>.</li>
<li><strong>Búsqueda binaria</strong> en listas y <span lang="en">arrays</span>.</li>
<li><strong>Conversión de arrays a listas y de listas a <span lang="en">array</span></strong>.</li>
<li><strong>Partir cadenas</strong> y almacenar el resultado en un <span lang="en">array</span>.</li>
</ul>
<p>Estos algoritmos están en su mayoría recogidos como métodos estáticos de las clases java.util.Collections y <code>java.util.Arrays</code>, salvo los referentes a cadenas obviamente.</p>
<p>Los algoritmos de ordenación ordenan los elementos en orden natural, siempre que <span lang="en">Java</span> sepa cómo ordenarlos. Como se explicó en el apartado de conjuntos, cuando se desea que la ordenación siga un orden diferente, o simplemente los elementos no son ordenables de forma natural, hay que facilitar un mecanismo para que se pueda producir la ordenación. Los tipos "ordenables" de forma natural son los enteros, las cadenas (orden alfabético) y las fechas, y por defecto su orden es ascendente.</p>
<p>La clase Collections y la clase Arrays facilitan el método sort(), que permiten ordenar respectivamente listas y <span lang="en">arrays</span>. Los siguientes ejemplos ordenarían los números de forma ascendente (de menor a mayor):</p>
<table class="tabla" summary="Tabla que muestra ejemplos de como ordenar un array y una lista usando los métodos estáticos sort de las clases Collections y Arrays."><caption>Ordenación natural en listas y arrays.</caption>
<tbody>
<tr><th scope="col">Ejemplo de ordenación de un <span lang="en">array</span> de números</th><th scope="col">Ejemplo de ordenación de una lista con números</th></tr>
<tr>
<td>
<div class="codigo elemento_centrado" style="width: 22.5em;">
<div class="texto_izquierda">
<pre>Integer[] array={10,9,99,3,5};
</pre>
<pre>Arrays.sort(array);
</pre>
</div>
</div>
</td>
<td>
<div class="codigo elemento_centrado" style="width: 36.8em;">
<div class="texto_izquierda">
<pre>ArrayList&lt;Integer&gt; lista=new ArrayList&lt;Integer&gt;();</pre>
<pre>lista.add(10);</pre>
<pre>lista.add(9);</pre>
<pre>lista.add(99);</pre>
<pre>lista.add(3);</pre>
<pre>lista.add(5);</pre>
<pre>Collections.sort(lista);</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table></div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.1.- Algoritmos (II). Ordenando los elementos de la colección.</h1></div>
<div class="FreeTextfpdIdevice" id="id112">
<div class="iDevice emphasis0">
<div id="ta112_73" class="block" style="display:block;position:relative"><p><img alt="Fotografía que muestra una baraja de cartas ordenada." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R049_orden.jpg" style="width: 192px; height: 128px;" title="Así está mejor, todo ordenado."></p>
<p>En <span lang="en">Java</span> hay dos mecanismos para cambiar la forma en la que los elementos se ordenan. ¿Recuerdas la tarea que <strong>Ada</strong> pidió a <strong>Ana</strong>?</p>
<p>Así es, <strong>Ada</strong> pidió a <strong>Ana</strong> que los artículos del pedido aparecieran ordenados por código de artículo. Imagina que tienes los artículos almacenados en una lista llamada "articulos", y que cada artículo se almacena en la siguiente clase (fíjate que el código de artículo es una cadena y no un número):</p>
<div class="codigo elemento_centrado" style="width: 39em;">
<div class="texto_izquierda">
<pre>class Articulo {
</pre>
<pre>    public String codArticulo; // Código de artículo
</pre>
<pre>    public String descripcion; // Descripción del artículo.
</pre>
<pre>    public int cantidad; // Cantidad a proveer del artículo.
</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>La <strong>primera forma</strong> de ordenar consiste en crear una clase que implemente la interfaz java.util.Comparator, lo que supone implementar el método  compare() definido en dicha interfaz. Esto se explicó en el apartado de conjuntos, al explicar el TreeSet, así que no vamos a profundizar en ello. No obstante, el comparador para ese caso podría ser así:</p>
<div class="codigo elemento_centrado" style="width: 62.1em;">
<div class="texto_izquierda">
<pre>class ComparadorArticulos implements Comparator&lt;Articulo&gt;{</pre>
<pre>    @Override</pre>
<pre>    public int compare(Articulo art1, Articulo art2) { </pre>
<pre>       return art1.codArticulo.compareTo(art2.codArticulo);</pre>
<pre>    }</pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>Una vez creada esta clase, ordenar los elementos es muy sencillo, simplemente se pasa como segundo parámetro del método sort() una instancia del comparador creado:</p>
<div class="codigo elemento_centrado" style="width: 36.25em;">
<div class="texto_izquierda">
<pre>Collections.sort(articulos, new comparadorArticulos());
</pre>
</div>
</div>
<p> </p>
<p>La <strong>segunda forma</strong> es quizás más sencilla cuando se trata de objetos cuya ordenación no existe de forma natural, pero requiere modificar la clase Articulo. Consiste en hacer que los objetos que se meten en la lista o <span lang="en">array</span> implementen la interfaz java.util.Comparable. <strong>Todos los objetos que implementan la interfaz Comparable son "ordenables" y se puede invocar el método sort() sin indicar un comparador para ordenarlos</strong>. La interfaz Comparable solo requiere implementar el método compareTo():</p>
<div class="codigo elemento_centrado" style="width: 52.75em;">
<div class="texto_izquierda">
<pre>class Articulo implements Comparable&lt;Articulo&gt;{</pre>
<pre>    public String codArticulo;</pre>
<pre>    public String descripcion;</pre>
<pre>    public int cantidad;</pre>
<pre> </pre>
<pre>    @Override</pre>
<pre>    public int compareTo(Articulo o) { </pre>
<pre>         return codArticulo.compareTo(o.codArticulo); </pre>
<pre>    }</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>Del ejemplo anterior se pueden resaltar dos cosas importantes: que la interfaz Comparable es genérica y que para que funcione sin problemas es conveniente indicar el tipo base sobre el que se permite la comparación (en este caso, el objeto Articulo debe compararse consigo mismo), y que el método compareTo() solo admite un parámetro, dado que comparará el objeto con el que se pasa por parámetro.</p>
<p>El funcionamiento del método compareTo() es el mismo que el método compare() de la interfaz Comparator: si el objeto que se pasa por parámetro es igual al objeto ha llamado al método, se tendría que devolver  0; si es menor o anterior, se debería retornar un número menor que cero; si es mayor o posterior, se debería retornar un número mayor que 0.</p>
<p>Ordenar ahora la lista de artículos es sencillo, fíjate que fácil: "Collections.sort(articulos);"</p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id113">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion113_60" class="block" style="display:block;position:relative"><p><strong>Si tienes que ordenar los elementos de una lista de tres formas diferentes, ¿cuál de los métodos anteriores es más conveniente?</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option113_60" id="i113_63" onclick="getFeedback(0,2,&#39;113_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans113_63" class="block" style="display:block;position:relative"><p>Usar comparadores, a través de la interfaz java.util.Comparator.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option113_60" id="i113_94" onclick="getFeedback(1,2,&#39;113_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans113_94" class="block" style="display:block;position:relative"><p>Implementar la interfaz Comparable en el objeto almacenado en la lista.</p></div></div>
</div></div>
<div id="sa0b113_60" class="feedback" style="display: none;"><div id="taf113_63" class="" style="display:block;position:relative"><p>Efectivamente, creas tres comparadores, uno para cada forma de ordenar la lista.</p></div></div>
<div id="sa1b113_60" class="feedback" style="display: none;"><div id="taf113_94" class="" style="display:block;position:relative"><p>No es la mejor forma, solo podrías ordenar los elementos de una forma, ya que sólo puedes incluir un único método compareTo() en dicha clase, que ni siquiera se puede sobrecargar, ya que sólo admite como parámetro un objeto del tipo base de la lista,  que se comparará con el que hace la llamada al método.</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Opción correcta</strong> <p>Efectivamente, creas tres comparadores, uno para cada forma de ordenar la lista.</p></li><li><strong>Incorrecto</strong> <p>No es la mejor forma, solo podrías ordenar los elementos de una forma, ya que sólo puedes incluir un único método compareTo()</code> en dicha clase, que ni siquiera se puede sobrecargar, ya que sólo admite como parámetro un objeto del tipo base de la lista,  que se comparará con el que hace la llamada al método.</p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
7.2.- Algoritmos (III). Algunas operaciones adicionales con colecciones.</h1></div>
<div class="FreeTextfpdIdevice" id="id110">
<div class="iDevice emphasis0">
<div id="ta110_73" class="block" style="display:block;position:relative"><p>¿Qué más ofrecen las clases java.util.Collections y <code>java.util.Arrays</code> de <span lang="en">Java</span>?</p>
<p>Una vez vista la ordenación, que quizás es lo más complicado, veamos algunas operaciones adicionales. En los ejemplos, la variable "array" es un <span lang="en">array</span> y la variable "lista" es una lista de cualquier tipo de elemento:</p>
<table class="tabla" summary="Tabla que muestra algunas operaciones adicionales sobre listas y arrays. En la primera columna se muestra el nombre de la operación, en la segunda columna la descripción de la operación realizada y en la tercera un código de ejemplo para llevar a cabo dicha operación."><caption>Operaciones adicionales sobre listas y arrays.</caption>
<tbody>
<tr><th scope="col">Operación</th><th scope="col">Descripción</th><th scope="col">Ejemplos</th></tr>
<tr><th scope="row">Desordenar una lista.</th>
<td>Desordena una lista, este método no está disponible para <span lang="en">arrays</span>.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>Collections.shuffle (lista);
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Rellenar una lista o <span lang="en">array</span>.</th>
<td>Rellena una lista o <span lang="en">array</span> copiando el mismo valor en todos los elementos del <span lang="en">array</span> o lista. Útil para reiniciar una lista o <span lang="en">array</span>.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>Collections.fill (lista,elemento);
</pre>
<pre>Arrays.fill (array,elemento);
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Búsqueda binaria.</th>
<td>Permite realizar búsquedas rápidas en un una lista o <span lang="en">array</span> ordenados. Es necesario que la lista o <span lang="en">array</span> estén ordenados, si no lo están, la búsqueda no tendrá éxito.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>Collections.binarySearch(lista,elemento);
</pre>
<pre>Arrays.binarySearch(array, elemento);
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Convertir un array a lista.</th>
<td>Permite rápidamente convertir un <span lang="en">array</span> a una lista de elementos, extremadamente útil. No se especifica el tipo de lista retornado (no es ArrayList ni <code>LinkedList</code>), Solo se especifica que retorna una lista que implementa la interfaz java.util.List.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>List lista=Arrays.asList(array);
</pre>
</div>
</div>
<br>
<p>Si el tipo de dato almacenado en el <span lang="en">array</span> es conocido (Integer por ejemplo), es conveniente especificar el tipo de objeto de la lista:</p>
<div>
<div class="texto_izquierda">
<pre>List&lt;Integer&gt;lista = Arrays.asList(array);
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Convertir una lista a <span lang="en">array</span>.</th>
<td>Permite convertir una lista a <span lang="en">array</span>. Esto se puede realizar en todas las colecciones, y no es un método de la clase Collections, sino propio de la interfaz Collection. Es conveniente que sepas de su existencia.</td>
<td>
<p>Para este ejemplo, supondremos que los elementos de la lista son números, dado que hay que crear un <span lang="en">array</span> del tipo almacenado en la lista, y del tamaño de la lista:</p>
<div>
<div class="texto_izquierda">
<pre>Integer[] array=new Integer[lista.size()];
</pre>
<pre>lista.toArray(array)
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Dar la vuelta.</th>
<td>Da la vuelta a una lista, poniéndola en orden inverso al que tiene.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>Collections.reverse(lista);
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><br> <img alt="Fotografía que muestra un cuchillo cortando en rodajas un plátano." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R050_cortar.jpg" style="width: 192px; height: 128px;" title="Cortar sí, pero cadenas de texto." width="192" height="128"></p>
<p>Otra operación que no se ha visto hasta ahora es la <strong>dividir una cadena en partes</strong>.</p>
<p>Cuando una cadena está formada internamente por trozos de texto claramente delimitados por un separador (una coma, un punto y coma o cualquier otro), es posible dividir la cadena y obtener cada uno de los trozos de texto por separado en un <span lang="en">array</span> de cadenas. Es una operación sencilla, pero requiere conocer el funcionamiento de los <span lang="en">arrays</span> y de las expresiones regulares para su uso. Para poder realizar esta operación, usaremos el método split() de la clase String. El delimitador o separador es una expresión regular, único argumento del método split(), y puede ser obviamente todo lo complejo que sea necesario:</p>
<div class="codigo elemento_centrado" style="width: 24.15em;">
<div class="texto_izquierda">
<pre>String texto="Z,B,A,X,M,O,P,U";
</pre>
<pre>String[] partes=texto.split(",");
</pre>
<pre>Arrays.sort(partes);
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior la cadena texto contiene una serie de letras separadas por comas. La cadena se ha dividido con el método split(), y se ha guardado cada carácter por separado en un <span lang="en">array</span>. Después se ha ordenado el <span lang="en">array</span>.</p>
<p>¡Increíble lo que se puede llegar a hacer con solo tres líneas de código!</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id111">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta111_47" class="block" style="display:block;position:relative"><p>En el siguiente vídeo podrás ver en qué consiste la búsqueda binaria y cómo se aplica de forma sencilla:</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><iframe src="./PROG_T8_files/7qv1An90q2Q.html" frameborder="0" width="425" height="350"></iframe></div>
<div class="credenciales elemento_centrado"><a title="Resumen textual alternativo para " metodo="" de="" búsqueda="" binaria"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_Descripcion_Video_metodo_de_busqueda_binaria.html">Resumen textual alternativo para "Metodo de búsqueda binaria"</a></div>
</div>
<p> </p>
<p>Ahora bien, este vídeo contiene un par de erratas. A ver si eres capaz de encontrarlas. Te damos una pista: la primera se encuentra sobre el minuto y medio, y la segunda sobre los dos minutos y medio.</p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.- Tratamiento de documentos estructurados XML.</h1></div>
<div class="CasopracticofpdIdevice" id="id107">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta107_66" class="block" style="display:block;position:relative"><p> </p>
<p><strong>Ana</strong> ya ha terminado lo principal, ya es capaz de procesar el pedido y de almacenar la información en estructuras de memoria que luego podrá proyectar a un documento <acronym title="eXtended Markup Language" lang="en">XML</acronym>, incluso ha ordenado los artículos en base al código de artículo, definitivamente era bastante más fácil de lo que ella pensaba.</p>
<p>Ahora le toca la tarea más ardua de todas, o al menos así lo ve ella, generar el documento <acronym title="eXtended Markup Language" lang="en">XML</acronym> con la información del pedido. ¿Le resultará muy difícil?</p></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id108">
<div class="iDevice emphasis0">
<div id="ta108_73" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " ¡¡un="" perro="" que="" sabe="" xml!!"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R052_XMLexpert.jpg"><img alt="Imagen que muestra un perro tumbado, con cara pensativa, con un bocadillo de cómic que dice “Aquí un experto en XML... ¿lo dudabas?”" class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R052_XMLexpert_miniatura.jpg" title="¡¡Un perro que sabe XML!!" height="148" width="196"></a></div>
</div>
<p>¿Qué es <acronym title="eXtended Markup Language" lang="en">XML</acronym>? </p>
<p><acronym title="eXtended Markup Language" lang="en">XML</acronym> es un mecanismo extraordinariamente sencillo para estructurar, almacenar e intercambiar información entre sistemas informáticos. <acronym title="eXtended Markup Language" lang="en">XML</acronym> define un lenguaje de etiquetas, muy fácil de entender pero con unas reglas muy estrictas, que permite encapsular información de cualquier tipo para posteriormente ser manipulada. Se ha extendido tanto que hoy día es un estándar en el intercambio de información entre sistemas.</p>
<p>La información en <acronym title="eXtended Markup Language" lang="en">XML</acronym> va escrita en texto legible por el ser humano, pero no está pensada para que sea leída por un ser humano, sino por una máquina. La información va codificada generalmente en <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/">Unicode<span><em>Unicode.</em>Codificación de caracteres capaz de codificar caracteres y símbolos de múltiples idiomas.</span></a>, pero estructurada de forma que una máquina es capaz de procesarla eficazmente. Esto tiene una clara ventaja: si necesitamos modificar algún dato de un documento en <acronym title="eXtended Markup Language" lang="en">XML</acronym>, podemos hacerlo con un <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/">editor de texto plano<span><em>Editor de texto plano. </em>Editor de texto que no admite formateado, solo caracteres dentro de una codificación de caracteres como Unicode o ASCII (American Standard Code for Information Interchange).</span></a>. Veamos los elementos básicos del <acronym title="eXtended Markup Language" lang="en">XML</acronym>:</p>
<table class="tabla" summary="Tabla que muestra los elementos básicos de un documento XML. En la primera columna se muestra el nombre del elemento, en la segunda una descripción de la función del mismo y en la tercera un ejemplo de su uso."><caption>Elementos de un documento XML.</caption>
<tbody>
<tr><th scope="col">Elemento</th><th scope="col">Descripción</th><th scope="col">Ejemplo</th></tr>
<tr><th scope="row">Cabecera o declaración del XML.</th>
<td>Es lo primero que encontramos en el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> y define cosas como, por ejemplo, la <a class="glosario" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/">codificación<span><em>Codificación</em>Hace referencia a cómo se codifican los caracteres de un documento de texto, es decir, cómo se convierten los símbolos humanos de escritura a ceros y unos: Unicode, ASCII, etc.</span></a> del documento XML (que suele ser <abbr title="Estándar ISO 8859 1, donde ISO significa Organización de Estandarización Internacional.">ISO-8859-1</abbr> o <acronym title=" Unicode Transformation Format" lang="en">UTF</acronym>-8) y la versión del estándar <acronym title="eXtended Markup Language." lang="en">XML</acronym> que sigue nuestro documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Etiquetas.</th>
<td>Una etiqueta es un delimitador de datos, y a su vez, un elemento organizativo. La información va entre las etiquetas de apertura ("&lt;pedido&gt;") y cierre ("&lt;/pedido&gt;"). <strong>Fíjate en el nombre de la etiqueta ("pedido"), debe ser el mismo tanto en el cierre como en la apertura, respetando mayúsculas</strong>.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>&lt;pedido&gt;
</pre>
<pre>   información del pedido
</pre>
<pre>&lt;/pedido&gt;
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Atributos.</th>
<td>Una etiqueta puede tener asociado uno o más atributos. Siempre deben ir detrás del nombre de la etiqueta, en la etiqueta de apertura, poniendo el nombre del atributo seguido de igual y <strong>el valor encerrado entre comillas</strong>. Siempre debes dejar al menos un espacio entre los atributos.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>&lt;articulo cantidad="20"&gt;
</pre>
<pre>    información
</pre>
<pre>&lt;/articulo&gt;
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Texto.</th>
<td>Entre el cierre y la apertura de una etiqueta puede haber texto.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>&lt;cliente&gt;
</pre>
<pre>     Muebles Bonitos S.A.
</pre>
<pre>&lt;/cliente&gt;
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Etiquetas sin contenido.</th>
<td>Cuando una etiqueta no tiene contenido, no tiene porqué haber una etiqueta de cierre, pero no debes olvidar poner la barra de cierre ("/") al final de la etiqueta para indicar que no tiene contenido.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>&lt;fecha entrega="1/1/2012" /&gt;
</pre>
</div>
</div>
</td>
</tr>
<tr><th scope="row">Comentario.</th>
<td>Es posible introducir comentarios en <acronym title="eXtended Markup Language." lang="en">XML</acronym> y estos van dirigidos generalmente a un ser humano que lee directamente el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</td>
<td>
<div>
<div class="texto_izquierda">
<pre>&lt;!-- comentario --&gt;
</pre>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>El nombre de la etiqueta y de los nombres de los atributos no deben tener espacios. También es conveniente evitar los puntos, comas y demás caracteres de puntuación. En su lugar se puede usar el guión bajo ("&lt;pedido_enviado&gt; … &lt;/pedido_enviado&gt;").</p></div></div>
</div>
<div class="SeleccionmultiplefpdIdevice" id="id109">
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion109_55" class="block" style="display:block;position:relative"><p><strong>Señala las líneas que no serían elementos <acronym title="eXtended Markup Language" lang="en">XML</acronym> válidos.</strong></p></div><div style="display: table; overflow: auto; width:100%;"><div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op109_550" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans109_550">
<div id="taans109_58" class="block" style="display:block;position:relative"><p>&lt;cliente&gt;Informática Elegante &lt;cliente/&gt;</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op109_550_1" style="display:none;">
<strong>Correcto</strong></div><div id="op109_550_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op109_551" value="False">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans109_551">
<div id="taans109_85" class="block" style="display:block;position:relative"><p>&lt;!-- --&gt;</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op109_551_1" style="display:none;">
<strong>Correcto</strong></div><div id="op109_551_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op109_552" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans109_552">
<div id="taans109_87" class="block" style="display:block;position:relative"><p>&lt;pedido fechaentrega=25 /&gt;</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op109_552_1" style="display:none;">
<strong>Correcto</strong></div><div id="op109_552_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op109_553" value="False">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans109_553">
<div id="taans109_89" class="block" style="display:block;position:relative"><p>&lt;direccion_entrega&gt;sin especificar&lt;/direccion_entrega&gt;</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op109_553_1" style="display:none;">
<strong>Correcto</strong></div><div id="op109_553_0" style="display:none;">
Incorrecto</div></div>
</div>
</div><input type="button" name="submitSelect" value="Mostrar retroalimentación" onclick="showFeedback(4,&#39;109_55&#39;)"> <br>
<div id="f109_55" style="display:none"><div id="tafeedback109_55" class="feedback" style="display:block;position:relative"><p>Recuerda que <acronym title="eXtended Markup Language." lang="en">XML</acronym> es estricto en cuanto a sintaxis, no se mira si el contenido es correcto o no.</p>
<p>En el primer caso, la etiqueta no está bien cerrada, y en el tercer caso, el valor del atributo se debe especificar entre comillas.</p></div></div><noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p><ol>
<li><em>Correcto</em></li><li><em>Incorrecto</em></li><li><em>Correcto</em></li><li><em>Incorrecto</em></li></ol><p><strong>Retroalimentación: </strong></p>
<p>Recuerda que <acronym title="eXtended Markup Language." lang="en">XML</acronym> es estricto en cuanto a sintaxis, no se mira si el contenido es correcto o no.</p>
<p>En el primer caso, la etiqueta no está bien cerrada, y en el tercer caso, el valor del atributo se debe especificar entre comillas.</p></div></noscript></div>
</div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.1.- ¿Qué es un documento XML?</h1></div>
<div class="FreeTextfpdIdevice" id="id105">
<div class="iDevice emphasis0">
<div id="ta105_73" class="block" style="display:block;position:relative"><p><img alt="Ilustración de un árbol." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R053_arbol.jpg" style="width: 140px; height: 192px;" title="Árbol." width="140" height="192"></p>
<p>Los documentos <acronym title="eXtended Markup Language." lang="en.">XML</acronym> son documentos que solo utilizan los elementos expuestos en el apartado anterior (declaración, etiquetas, comentarios, etc.) de <strong>forma estructurada</strong>. Siguen una estructura de árbol, pseudo-jerárquica, permitiendo agrupar la información en diferentes niveles, que van desde la raíz a las hojas.</p>
<p>Para comprender la estructura de un documento <acronym title="eXtended Markup Language." lang="en.">XML</acronym> vamos a utilizar una terminología afín a la forma en la cual procesaremos los documentos <acronym title="eXtended Markup Language." lang="en.">XML</acronym>. Un documento <acronym title="eXtended Markup Language." lang="en.">XML</acronym> está compuesto desde el punto de vista de programación por nodos, que pueden (o no) contener otros nodos. Todo es un nodo:</p>
<ul class="lista_verificacion">
<li>El par formado por la etiqueta de apertura ("&lt;etiqueta&gt;") y por la de cierre ("&lt;/etiqueta&gt;"), junto con todo su contenido (elementos, atributos y texto de su interior) es un nodo llamado <strong>elemento</strong> (Element desde el punto de vista de programación). Un elemento puede contener otros elementos, es decir, puede contener en su interior subetiquetas, de forma anidada.</li>
<li>Un <strong>atributo</strong> es un nodo especial llamado atributo (Attr desde el punto de vista de programación), que solo puede estar dentro de un elemento (concretamente dentro de la etiqueta de apertura).</li>
<li>El <strong>texto</strong> es un nodo especial llamado texto (Text), que solo puede estar dentro de una etiqueta.</li>
<li>Un <strong>comentario</strong> es un nodo especial llamado comentario (Comment), que puede estar en cualquier lugar del documento <acronym title="eXtended Markup Language." lang="en.">XML</acronym>.</li>
<li>Y por último, un <strong>documento</strong> (Document) es un nodo que contiene una jerarquía de nodos en su interior. Está formado opcionalmente por una declaración, opcionalmente por uno o varios comentarios y <strong>obligatoriamente por un único elemento</strong>.</li>
</ul>
<p>Esto es un poco lioso, ¿verdad? Vamos a clarificarlo con ejemplos.</p>
<p>Primero, tenemos que entender la diferencia entre nodos padre y nodos hijo. Un elemento (par de etiquetas) puede contener varios nodos hijo, que pueden ser texto u otros elementos. Por ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 25.8em;">
<div class="texto_izquierda">
<pre>&lt;padre att1="valor" att2="valor"&gt;
</pre>
<pre>   texto 1
</pre>
<pre>   &lt;ethija&gt; texto 2 &lt;/ethija&gt;
</pre>
<pre>&lt;/padre&gt;
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior, el elemento padre tendría dos hijos: el texto "texto 1", sería el primer hijo, y el elemento etiquetado como "ethija", el segundo. Tendría también dos atributos, que serían nodos hijo también, pero que se consideran especiales y la forma de acceso es diferente. A su vez, el elemento "ethija" tiene un nodo hijo, que será el texto "texto 2". ¿Fácil no?</p>
<p>Ahora veamos el conjunto, un documento estará formado, como se dijo antes, por algunos elementos opcionales, y obligatoriamente por un único elemento (es decir, por un único par de etiquetas que lo engloba todo) que contendrá internamente el resto de información como nodos hijo. Por ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 31.3em;">
<div class="texto_izquierda">
<pre>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
</pre>
<pre>&lt;pedido&gt;
</pre>
<pre>&lt;cliente&gt; texto &lt;/cliente&gt;
</pre>
<pre>&lt;codCliente&gt; texto &lt;/codCliente&gt;
</pre>
<pre>...
</pre>
<pre>&lt;/pedido&gt;
</pre>
</div>
</div>
<p> </p>
<p>La etiqueta pedido del ejemplo anterior, será por tanto el elemento raíz del documento y dentro de él estará toda la información del documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>. Ahora seguro que es más fácil, ¿no?</p>
<p>Se puede y se suele usar <strong>indentación</strong> para que visualmente se vea con más claridad qué etiquetas van dentro de qué otras, aunque su uso no es obligado, ya que como dijimos antes, el <acronym title="eXtended Markup Language." lang="en">XML</acronym> no está pensado para ser leído  por humanos, (aunque puedan hacerlo) sino por la aplicación de forma automática. Para el ordenador, la indentación es irrelevante.</p></div></div>
</div>
<div class="ParasabermasfpdIdevice" id="id106">
<div class="iDevice emphasis_parasabermasfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_parasabermasfpd.gif">
<span class="iDeviceTitle"><strong>Para saber más</strong></span>
<div class="iDevice_inner">
<div id="ta106_47" class="block" style="display:block;position:relative"><p>En el siguiente enlace podrás encontrar una breve guía, en inglés, de las tecnologías asociadas a <acronym title="eXtended Markup Language." lang="en">XML</acronym> actuales. Son bastantes y su potencial es increíble.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a una breve guía sobre las tecnologías XML." href="http://www.w3.org/standards/xml/">Breve guía de las tecnologías <acronym title="eXtended Markup Language." lang="en">XML.</acronym></a></p>
<p class="enlace_centrado" style="text-align: justify;">En este otro enlace podrás ver una serie de <strong>vídeos de introducción a <acronym title="eXtended Markup Language." lang="en">XML</acronym></strong> con abundantes ejemplos que te podrán ser muy útiles a la hora de entender su estructura y funcionamiento:</p>
<p class="enlace_centrado" style="text-align: center;"><a title="Acceder a una colección de vídeos de introducción a las tecnologías XML" href="https://www.youtube.com/user/introxml/videos" target="_blank"><span class="html">Colección de vídeos de introducción a <acronym title="eXtended Markup Language." lang="en">XML</acronym></span></a></p>
<p class="enlace_centrado" style="text-align: justify;"> </p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.2.- Librerías para procesar documentos XML (I). Convertir el archivo  XML a árbol DOM</h1></div>
<div class="FreeTextfpdIdevice" id="id103">
<div class="iDevice emphasis0">
<div id="ta103_73" class="block" style="display:block;position:relative"><div class="elemento_centrado credenciales"> </div>
<p>¿Quién establece las bases del <acronym title="eXtended Markup Language." lang="en">XML</acronym>?</p>
<p>El <abbr title="World Wide Web Consortium." lang="en">W3C</abbr> o <span lang="en">World Wide Web Consortium</span>  (Consorcio para la gran red mundial) es la entidad que establece las bases del <acronym title="eXtended Markup Language." lang="en">XML</acronym>. Dicha entidad, además de describir cómo es el <acronym title="eXtended Markup Language." lang="en">XML</acronym> internamente, define un montón de tecnologías estándar adicionales para verificar, convertir y manipular documentos <acronym title="eXtended Markup Language." lang="en">XML</acronym>. Nosotros no vamos a explorar todas las tecnologías de <acronym title="eXtended Markup Language." lang="en">XML</acronym> aquí (son muchísimas), solamente vamos a usar dos de ellas, aquellas que nos van a permitir manejar de forma simple un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>:</p>
<ul class="lista_verificacion">
<li>Procesadores de <acronym title="eXtended Markup Language." lang="en">XML</acronym>. Son librerías para leer documentos <acronym title="eXtended Markup Language." lang="en">XML</acronym> y comprobar que están bien formados. En <span lang="en">Java</span>, el procesador más utilizado es <abbr title="Simple API for XML. (Interfaz de programación de aplicaciones simple para XML)." lang="en">SAX</abbr>, lo usaremos pero sin percatarnos casi de ello.</li>
<li><abbr title="Document Object Model." lang="en">XML DOM</abbr> (Modelo de Objetos para Documento). Permite transformar un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> en un modelo de objetos (de hecho <abbr title="Document Object Model." lang="en">DOM</abbr> significa <span lang="en">Document Object Model</span>), accesible cómodamente desde el lenguaje de programación. <abbr title="Document Object Model." lang="en">DOM</abbr> almacena cada elemento, atributo, texto, comentario, <abbr title="etcétera.">etc.</abbr> del documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> en una estructura tipo árbol compuesta por nodos fácilmente accesibles, sin perder la jerarquía del documento. A partir de ahora, la estructura <abbr title="Document Object Model." lang="en">DOM</abbr> que almacena un <acronym title="eXtended Markup Language." lang="en">XML</acronym> la llamaremos árbol o jerarquía de objetos <abbr title="Document Object Model." lang="en">DOM</abbr>.</li>
</ul>
<p>En <span lang="en">Java</span>, éstas y otras funciones están implementadas en la librería <abbr title="API de Java para el procesamiento de XML. (Java API for XML Processing)." lang="en">JAXP</abbr> (<span lang="en">Java <acronym title="Application Programming Interface." lang="en">API</acronym> for <acronym title="eXtended Markup Language." lang="en">XML</acronym> Processing</span>), y ya van incorporadas en la edición estándar de<span lang="en"> Java</span> (<span lang="en">Java</span> <abbr title="Standard Edition." lang="en">SE</abbr>). En primer lugar vamos a ver cómo convertir un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> a un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>, y viceversa, para después ver cómo manipular desde <span lang="en">Java</span> un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>.</p>
<p>Para cargar un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> tenemos que hacer uso de un procesador de documentos <acronym title="eXtended Markup Language." lang="en">XML</acronym> (conocidos generalmente como <strong><span lang="en">parsers</span>)</strong> y de un constructor de documentos <abbr title="Document Object Model." lang="en">DOM</abbr>. Las clases de <span lang="en">Java</span> que tendremos que utilizar son:</p>
<ul class="lista_verificacion">
<li>javax.xml.parsers.DocumentBuilder: será el procesador y transformará un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> a árbol <abbr title="Document Object Model." lang="en">DOM</abbr>, se le conoce como constructor de documentos.</li>
<li>javax.xml.parsers.DocumentBuilderFactory: permite crear un constructor de documentos, es una fábrica de constructores de documentos.</li>
<li>org.w3c.dom.Document: una instancia de esta clase es un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> pero almacenado en memoria siguiendo el modelo <abbr title="Document Object Model." lang="en">DOM</abbr>. Cuando el <span lang="en">parser</span> procesa un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> creará una instancia de la clase Document con el contenido del documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</li>
</ul>
<p>Ahora bien, ¿esto cómo se usa?</p>
<p>Pues de una forma muy fácil, en pocas líneas (no olvides importar las tres clases anteriores, DocumentBuilder, <code>DocumentBuilderFactory</code> y Document):</p>
<div class="codigo elemento_centrado" style="width: 69.25em;">
<div class="texto_izquierda">
<pre>try {
</pre>
<pre>            // 1º Creamos una nueva instancia de un fábrica de constructores de documentos.
</pre>
<pre>            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
</pre>
<pre>            // 2º A partir de la instancia anterior, fabricamos un constructor de documentos, que procesará el XML.
</pre>
<pre>            DocumentBuilder db = dbf.newDocumentBuilder();
</pre>
<pre>            // 3º Procesamos el documento (almacenado en un archivo) y lo convertimos en un árbol DOM.
</pre>
<pre>            Document documento=db.parse(CaminoAArchivoXml);
</pre>
<pre>} catch (Exception ex) {
</pre>
<pre>            System.out.println("¡Error! No se ha podido cargar el documento XML.");
</pre>
<pre>}  
</pre>
</div>
</div>
<p> </p>
<p>En este sentido (convertir el archivo  <acronym title="eXtended Markup Language." lang="en">XML</acronym> a árbol <abbr title="Document Object Model." lang="en">DOM</abbr>)  no tiene mucha complicación,  pero es un pelín más complicado para hacer el camino inverso (pasar el <abbr title="Document Object Model." lang="en">DOM</abbr> a  <acronym title="eXtended Markup Language." lang="en">XML</acronym>).</p>
<p>Este proceso puede generar hasta tres tipos de excepciones diferentes. La más común, que el documento  <acronym title="eXtended Markup Language." lang="en">XML</acronym> esté mal formado, por lo que tienes que tener cuidado con la sintaxis  <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</p></div></div>
</div>
<div class="EleccionmultiplefpdIdevice" id="id104">
<script type="text/javascript" src="./PROG_T8_files/common.js.descarga"></script>
<script type="text/javascript" src="./PROG_T8_files/libot_drag.js.descarga"></script>
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion104_60" class="block" style="display:block;position:relative"><p><strong>¿Cuál es la función de la clase org.w3c.dom.Document?</strong></p></div><div style="display: table; overflow: auto; width: 100%;">
<div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option104_60" id="i104_63" onclick="getFeedback(0,3,&#39;104_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans104_63" class="block" style="display:block;position:relative"><p>Procesar el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option104_60" id="i104_75" onclick="getFeedback(1,3,&#39;104_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans104_75" class="block" style="display:block;position:relative"><p>Almacenar el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> en un modelo de objetos accesible desde <span lang="en">Java</span>.</p></div></div>
</div><div style="display: table-row; clear: both;" class="answer">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="radio" name="option104_60" id="i104_78" onclick="getFeedback(2,3,&#39;104_60&#39;,&#39;multi&#39;)"></div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="taans104_78" class="block" style="display:block;position:relative"><p>Fabricar un nuevo constructor de documentos.</p></div></div>
</div></div>
<div id="sa0b104_60" class="feedback" style="display: none;"><div id="taf104_63" class="" style="display:block;position:relative"><p>Incorrecto, revisa el apartado y responde de nuevo a la pregunta.</p></div></div>
<div id="sa1b104_60" class="feedback" style="display: none;"><div id="taf104_75" class="" style="display:block;position:relative"><p>Correcto. Acertaste, aunque era fácil, ¿no?</p></div></div>
<div id="sa2b104_60" class="feedback" style="display: none;"><div id="taf104_78" class="" style="display:block;position:relative"><p>No, no es esta la función de dicha clase.De eso se encarga DocumentBuilderFactory</p></div></div>
<noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p>
<ol><li><strong>Incorrecto</strong> <p>Incorrecto, revisa el apartado y responde de nuevo a la pregunta.</p></li><li><strong>Opción correcta</strong> <p>Correcto. Acertaste, aunque era fácil, ¿no?</p></li><li><strong>Incorrecto</strong> <p>No, no es esta la función de dicha clase.De eso se encarga DocumentBuilderFactory</code></p></li></ol>
</div></noscript></div>
</div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.2.1.- Librerías para procesar documentos XML (II). Transformar el árbol  DOM en archivo  XML.</h1></div>
<div class="FreeTextfpdIdevice" id="id101">
<div class="iDevice emphasis0">
<div id="ta101_73" class="block" style="display:block;position:relative"><p><img alt="Imagen en la que se ve una persona apuntando con un dedo a la pantalla de un ordenador." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R055_apuntandopantalla.jpg" style="width: 192px; height: 128px;" title="Explicando." height="128" width="192"></p>
<p>¿Y cómo paso la jerarquía o árbol de objetos  <abbr title="Document Object Model." lang="en">DOM</abbr> a <acronym title="eXtended Markup Language." lang="en">XML</acronym>?</p>
<p>Como hemos dicho en el apartado anterior, en <span lang="en">Java </span>esto es un pelín más complicado que la operación inversa, y requiere el uso de un montón de clases del paquete java.xml.transform, pues la idea es transformar el árbol  <abbr title="Document Object Model." lang="en">DOM</abbr> en un archivo de texto que contiene el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</p>
<p>Las clases que tendremos que usar son:</p>
<ul class="lista_verificacion">
<li>javax.xml.transform.TransformerFactory. Fábrica de transformadores, permite crear un nuevo transformador que convertirá el árbol <abbr title="Document Object Model." lang="en">DOM</abbr> a <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</li>
<li>javax.xml.transform.Transformer. Transformador que permite pasar un árbol <abbr title="Document Object Model." lang="en">DOM</abbr> a <acronym title="eXtended Markup Language." lang="en">XML</acronym>.</li>
<li>javax.xml.transform.TransformerException. Excepción lanzada cuando se produce un fallo en la transformación.</li>
<li>javax.xml.transform.OutputKeys. Clase que contiene opciones de salida para el transformador. Se suele usar para indicar la codificación de salida (generalmente <acronym title="8-bit Unicode Transformation Format." lang="en">UTF-8</acronym>) del documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> generado.</li>
<li>javax.xml.transform.dom.DOMSource. Clase que actuará de intermediaria entre el árbol <abbr title="Document Object Model." lang="en">DOM</abbr> y el transformador, permitiendo al transformador acceder a la información del árbol <abbr title="Document Object Model." lang="en">DOM</abbr>.</li>
<li>javax.xml.transform.stream.StreamResult. Clase que actuará de intermediaria entre el transformador y el archivo o String donde se almacenará el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> generado.</li>
<li>java.io.File. Clase que, como posiblemente sabrás, permite leer y escribir en un archivo almacenado en disco. El archivo será obviamente el documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> que vamos a escribir en el disco.</li>
</ul>
<p>Esto es un poco lioso, ¿o no? No lo es tanto cuando se ve un ejemplo de cómo realizar el proceso de transformación de árbol <abbr title="Document Object Model." lang="en">DOM</abbr> a <acronym title="eXtended Markup Language." lang="en">XML</acronym>, así que veamos ese ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 64.3em;">
<div class="texto_izquierda">
<pre>try {
</pre>
<pre>            // 1º Creamos una instancia de la clase File para acceder al archivo donde guardaremos el XML.
</pre>
<pre>            File f=new File(CaminoAlArchivoXML);
</pre>
<pre>            //2º Creamos una nueva instancia del transformador a través de la fábrica de transformadores.
</pre>
<pre>            Transformer transformer = TransformerFactory.newInstance().newTransformer();
</pre>
<pre>            //3º Establecemos algunas opciones de salida, como por ejemplo, la codificación de salida.
</pre>
<pre>            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
</pre>
<pre>            transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");            
</pre>
<pre>            //4º Creamos el StreamResult, que intermediará entre el transformador y el archivo de destino.
</pre>
<pre>            StreamResult result = new StreamResult(f);            
</pre>
<pre>            //5º Creamos el DOMSource, que intermediará entre el transformador y el árbol DOM.
</pre>
<pre>            DOMSource source = new DOMSource(doc);
</pre>
<pre>            //6º Realizamos la transformación.
</pre>
<pre>            transformer.transform(source, result);         
</pre>
<pre>} catch (TransformerException ex) {
</pre>
<pre>     System.out.println("¡Error! No se ha podido llevar a cabo la transformación.");            
</pre>
<pre>}
</pre>
</div>
</div></div></div>
</div>
<div class="DebesconocerfpdIdevice" id="id102">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta102_48" class="block" style="display:block;position:relative"><p>A continuación te adjuntamos, cortesía de la casa, una de esas clases anti-estrés, que nos permitirá hacer estas operaciones sin tener que reinventar la rueda cada vez, ni tener que acordarnos de tantos detalles... Utilízala todo lo que quieras, con ella podrás convertir un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> a árbol <acronym title="Document Object Model" lang="en">DOM </acronym>y viceversa de forma sencilla. El documento  <acronym title="eXtended Markup Language." lang="en">XML</acronym> puede estar almacenado en un archivo o en una cadena de texto (e incluso en Internet, para lo que necesitas el <acronym title="Unified Resource Identificator." lang="en">URI</acronym> (Identificador de Recursos Unificado)). Los métodos estáticos DOM2XML() te permitirán pasar el árbol <acronym title="Document Object Model" lang="en">DOM </acronym> a <acronym title="eXtended Markup Language." lang="en">XML</acronym>, y los métodos String2DOM() y <code>XML2DOM()</code> te permitirán pasar un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> a un árbol <acronym title="Document Object Model" lang="en">DOM </acronym>.</p>
<p>También contiene el método crearDOMVacio() que permite crear un árbol <acronym title="Document Object Model" lang="en">DOM </acronym>vacío, útil para empezar un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> de cero.</p>
<div class="enlace_centrado"><a class="paquete" title="Descargar clase DOMUtil para convertir documentos XML a árboles DOM y viceversa. [zip - 2 KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R056B_DOMUtil.zip">Clase DOMUtil de ayuda para convertir documentos <acronym title="eXtended Markup Language." lang="en">XML</acronym> a árboles <acronym title="Document Object Model" lang="en">DOM </acronym>y viceversa.</a> <span class="tamano"> (2 KB) </span></div></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.3.- Manipulación de documentos XML (I). Obtener el elemento raíz, y buscar un elemento.</h1></div>
<div class="FreeTextfpdIdevice" id="id99">
<div class="iDevice emphasis0">
<div id="ta99_73" class="block" style="display:block;position:relative"><p><img alt="Fotografía en la que se ve una persona manipulando productos con guantes de látex." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R057_Guantes.jpg" style="width: 192px; height: 128px;" title="¿Manipulando el árbol DOM con guantes? Tampoco es necesario tanto."></p>
<p>Bien, ahora sabes cargar un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> a árbol <abbr title="Document Object Model." lang="en">DOM</abbr> y de árbol <abbr title="Document Object Model." lang="en">DOM</abbr> a <acronym title="eXtended Markup Language." lang="en">XML</acronym>, pero, ¿cómo se modifica el árbol <abbr title="Document Object Model." lang="en">DOM</abbr>?</p>
<p>Cómo ya se dijo antes, un árbol <abbr title="Document Object Model." lang="en">DOM</abbr> es una estructura en árbol, jerárquica como cabe esperar, formada por nodos de diferentes tipos. El funcionamiento del modelo de objetos <abbr title="Document Object Model." lang="en">DOM</abbr> es establecido por el organismo <abbr title="World Wide Web Consortium." lang="en">W3C</abbr>, lo cual tiene una gran ventaja:<strong> el modelo es prácticamente el mismo en todos los lenguajes de programación</strong>.</p>
<p>En <span lang="en">Java</span>, prácticamente todas las clases que vas a necesitar para manipular un árbol <abbr title="Document Object Model." lang="en">DOM</abbr> están en el paquete org.w3c.dom. Si vas a hacer un uso muy intenso de <abbr title="Document Object Model." lang="en">DOM</abbr> es conveniente que hagas una importación de todas las clases de este paquete ("import org.w3c.dom.*;").</p>
<p>Tras convertir un documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> a <abbr title="Document Object Model." lang="en">DOM</abbr> lo que obtenemos es una instancia de la clase org.w3c.dom.Document. Esta instancia será el nodo principal que contendrá en su interior toda la jerarquía del documento <acronym title="eXtended Markup Language." lang="en">XML</acronym>. Dentro de un documento o árbol <abbr title="Document Object Model." lang="en">DOM</abbr> podremos encontrar los siguientes tipos de clases:</p>
<ul class="lista_verificacion">
<li>org.w3c.dom.Node (Nodo). Todos los objetos contenidos en el árbol <abbr title="Document Object Model." lang="en">DOM</abbr> son nodos. La clase Document es también un tipo de nodo, considerado el nodo principal.</li>
<li>org.w3c.dom.Element (Elemento). Corresponde con cualquier par de etiquetas ("&lt;&gt; &lt;/&gt;") y todo su contenido (atributos, texto, subetiquetas, <abbr title="etcétera.">etc.</abbr>).</li>
<li>org.w3c.dom.Attr (Atributo). Corresponde con cualquier atributo.</li>
<li>org.w3c.dom.Comment (Comentario). Corresponde con un comentario.</li>
<li>org.w3c.dom.Text (Texto). Corresponde con el texto que encontramos dentro de dos etiquetas.</li>
</ul>
<p>¿A qué te resultan familiares?</p>
<p>Claro que sí. Estas clases tendrán diferentes métodos para acceder y manipular la información del árbol <abbr title="Document Object Model." lang="en">DOM</abbr>. A continuación vamos a ver las operaciones más importantes sobre un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>. En todos los ejemplos, "documento" corresponde con una instancia de la clase Document.</p>
<p><span class="destacado_inline"><strong>Obtener el elemento raíz del documento</strong>.</span></p>
<p>Como ya sabes, los documentos <acronym title="eXtended Markup Language." lang="en">XML</acronym> deben tener obligatoriamente un único elemento ("&lt;pedido&gt;&lt;/pedido&gt;" por ejemplo), considerado el elemento raíz, dentro del cual está el resto de la información estructurada de forma jerárquica. Para obtener dicho elemento y poder manipularlo podemos usar el método getDocumentElement().</p>
<div class="codigo elemento_centrado" style="width: 26.9em;">
<div class="texto_izquierda">
<pre>Element raiz=&lt;strong&gt;documento&lt;/strong&gt;.getDocumentElement();
</pre>
</div>
</div>
<p> </p>
<p><span class="destacado_inline"><strong>Buscar un elemento en toda la jerarquía del documento</strong>.</span></p>
<p>Para realizar esta operación se puede usar el método getElementsByTagName() disponible tanto en la clase Document como en la clase Element. Dicha operación busca un elemento por el nombre de la etiqueta y retorna una lista de nodos (NodeList) que cumplen con la condición. Si se usa en la clase Element, solo buscará entre las subetiquetas (subelementos) de dicha clase (no en todo el documento).</p>
<div class="codigo elemento_centrado" style="width: 34.05em;">
<div class="texto_izquierda">
<pre>NodeList listaNodos=&lt;strong&gt;documento&lt;/strong&gt;.getElementsByTagName("cliente");
</pre>
<pre>Element cliente;
</pre>
<pre>if (&lt;code&gt;listaNodos.getLength()==1){ </pre>
<pre>     cliente=(Element)&lt;code&gt;&lt;code&gt;listaNodos.item(0);</pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>El método getLength() de la clase NodeList, permite obtener el número de elementos (longitud de la lista) encontrados cuyo nombre de etiqueta es coincidente. El método item() permite acceder a cada uno de los elementos encontrados, y se le pasa por argumento el índice del elemento a obtener (empezando por cero y acabando por longitud menos uno). Fíjate que es necesario hacer una conversión de tipos después de invocar el método item(). Esto es porque la clase NodeList almacena un listado de nodos (Node), sin diferenciar el tipo.</p></div></div>
</div>
<div class="SeleccionmultiplefpdIdevice" id="id100">
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion100_55" class="block" style="display:block;position:relative"><p><strong>Dado el siguiente código XML, indica qué elementos <abbr title="Document Object Model." lang="en">DOM</abbr> encontramos en el mismo:</strong></p>
<div class="codigo elemento_centrado" style="width: 32.95em;">
<div class="texto_izquierda">
<pre>&lt;strong&gt;&lt;pedido&gt;&lt;!--Datos del pedido--&gt;&lt;/pedido&gt;&lt;/strong&gt;</pre>
</div>
</div></div><div style="display: table; overflow: auto; width:100%;"><div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op100_550" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans100_550">
<div id="taans100_58" class="block" style="display:block;position:relative"><p>org.w3c.dom.Element.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op100_550_1" style="display:none;">
<strong>Correcto</strong></div><div id="op100_550_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op100_551" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans100_551">
<div id="taans100_159" class="block" style="display:block;position:relative"><p>org.w3c.dom.Node.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op100_551_1" style="display:none;">
<strong>Correcto</strong></div><div id="op100_551_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op100_552" value="False">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans100_552">
<div id="taans100_161" class="block" style="display:block;position:relative"><p>org.w3c.dom.Text.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op100_552_1" style="display:none;">
<strong>Correcto</strong></div><div id="op100_552_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op100_553" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans100_553">
<div id="taans100_163" class="block" style="display:block;position:relative"><p>org.w3c.dom.Comment.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op100_553_1" style="display:none;">
<strong>Correcto</strong></div><div id="op100_553_0" style="display:none;">
Incorrecto</div></div>
</div>
</div><input type="button" name="submitSelect" value="Mostrar retroalimentación" onclick="showFeedback(4,&#39;100_55&#39;)"> <br>
<div id="f100_55" style="display:none"><div id="tafeedback100_55" class="feedback" style="display:block;position:relative"><p>Recuerda que todo es un nodo en un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>.</p></div></div><noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p><ol>
<li><em>Correcto</em></li><li><em>Correcto</em></li><li><em>Incorrecto</em></li><li><em>Correcto</em></li></ol><p><strong>Retroalimentación: </strong></p>
<p>Recuerda que todo es un nodo en un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>.</p></div></noscript></div>
</div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.3.1.- Manipulación de documentos XML (II). Obtener y procesar la lista de hijos y añadir uno nuevo.</h1></div>
<div class="FreeTextfpdIdevice" id="id97">
<div class="iDevice emphasis0">
<div id="ta97_73" class="block" style="display:block;position:relative"><p><img alt="Fotografía de un padre con su hija encima de los hombros." class="elemento_derecha" src="./PROG_T8_files/PROG09_CONT_R058_PadreEHija.jpg" style="width: 136px; height: 200px;" title="Padre e hija."></p>
<p>¿Y qué más operaciones puedo realizar sobre un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>? Veámoslas.</p>
<p><span class="destacado_inline"><strong>Obtener la lista de hijos de un elemento y procesarla</strong>.</span></p>
<p>Se trata de obtener una lista con los nodos hijo de un elemento cualquiera, estos pueden ser un sub-elemento (sub-etiqueta) o texto. Para sacar la lista de nodos hijo se puede usar el método getChildNodes():</p>
<div class="codigo elemento_centrado" style="width: 43.95em;">
<div class="texto_izquierda">
<pre>NodeList listaNodos=documento.getDocumentElement().getChildNodes();</pre>
<pre>for (int i=0; i&lt;listaNodos.getLength();i++) {</pre>
<pre>    Node nodo=listaNodos.item(i);</pre>
<pre>    switch (nodo.getNodeType()){</pre>
<pre>        case Node.ELEMENT_NODE: </pre>
<pre>             Element elemento = (Element) nodo;</pre>
<pre>             System.out.println("Etiqueta:" + elemento.getTagName());</pre>
<pre>             break;</pre>
<pre>        case Node.TEXT_NODE: </pre>
<pre>             Text texto = (Text) nodo;</pre>
<pre>             System.out.println("Texto:" + texto.getWholeText());</pre>
<pre>             break;</pre>
<pre>    }       </pre>
<pre>}</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior se usan varios métodos. El método getNodeType() de la clase Node permite saber de qué tipo de nodo se trata, generalmente texto (Node.TEXT_NODE) o un sub-elemento (Node.ELEMENT_NODE). De esta forma podremos hacer la conversión de tipos adecuada y gestionar cada elemento según corresponda. También se usa el método getTagName() aplicado a un elemento, lo cual permitirá obtener el nombre de la etiqueta, y el método getWholeText() aplicado a un nodo de tipo texto (Text), que permite obtener el texto contenido en el nodo.</p>
<p><span class="destacado_inline"><strong>Añadir un nuevo elemento hijo a otro elemento</strong>.</span></p>
<p>Hemos visto cómo mirar qué hay dentro de un documento <acronym title="eXtended Markup Language" lang="en">XML</acronym> pero no hemos visto cómo añadir cosas a dicho documento. Para añadir un sub-elemento o un texto a un árbol <abbr title="Document Object Model." lang="en">DOM</abbr>, primero hay que crear los nodos correspondientes y después insertarlos en la posición que queramos. Para crear un nuevo par de etiquetas o elemento (Element) y un nuevo nodo texto (Text), lo podemos hacer de la siguiente forma:</p>
<div class="codigo elemento_centrado" style="width: 35.15em;">
<div class="texto_izquierda">
<pre>Element direccionTag=documento.createElement("DIRECCION_ENTREGADA")
</pre>
<pre>Text direccionTxt=documento.createTextNode("C/Perdida S/N");
</pre>
</div>
</div>
<p> </p>
<p>Ahora los hemos creado, pero todavía no los hemos insertado en el documento. Para ello podemos hacerlo usando el método appendChild() que añadirá el nodo (sea del tipo que sea) al final de la lista de hijos del elemento correspondiente:</p>
<div class="codigo elemento_centrado" style="width: 31.3em;">
<div class="texto_izquierda">
<pre> direccionTag.appendChild(direccionTxt);
</pre>
<pre> documento.getDocumentElement().appendChild(direccionTag);
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior, el texto se añade como hijo de la etiqueta "DIRECCION_ENTREGADA", y a su vez, la etiqueta "DIRECCION_ENTREGADA" se añade como hijo, al final del todo, de la etiqueta o elemento raíz del documento. Aparte del método appendChild(), que siempre insertará al final, puedes utilizar los siguientes métodos para insertar nodos dentro de un árbol <abbr title="Document Object Model." lang="en">DOM</abbr> (todos se usan sobre la clase Element):</p>
<ul class="lista_verificacion">
<li>insertBefore (Node nuevoNodo, Node nodoReferencia). Insertará un nodo nuevo antes del nodo de referencia (nodoReferencia).</li>
<li>replaceChild (Node nuevoNodo, Node nodoAnterior). Sustituye un nodo (nodoAnterior) por uno nuevo.</li>
</ul></div></div>
</div>
<div class="DebesconocerfpdIdevice" id="id98">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta98_48" class="block" style="display:block;position:relative"><p>En el siguiente enlace encontrarás a la documentación del <acronym title="Aplication Programming Interface. " lang="en">API</acronym> de <acronym title="Document Object Model." lang="en">DOM</acronym> para<span lang="en"> Java</span>, con todas las funciones de cada clase.</p>
<p class="enlace_centrado"><a class="html" title="Acceder a API de DOM para Java." href="http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/package-summary.html"><acronym title="Aplication Programming Interface." lang="en">API</acronym> de <acronym title="Document Object Model." lang="en">DOM</acronym> para <span lang="en">Java</span>.</a></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.3.2.- Manipulación de documentos XML (III). Eliminar un hijo y modificar un elemento texto.</h1></div>
<div class="FreeTextfpdIdevice" id="id95">
<div class="iDevice emphasis0">
<div id="ta95_73" class="block" style="display:block;position:relative"><p><img alt="Fotografía en la que se muestra un juego abierto de muñecas Matroshka." class="elemento_centrado" src="./PROG_T8_files/PROG09_CONT_R059_Matroshka.jpg" style="width: 200px; height: 136px;" title="Las muñecas Matroshka son el mejor ejemplo de anidamiento." height="136" width="200"></p>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="Gnomz007" href="https://es.wikipedia.org/wiki/Archivo:Russian-Matroshka_no_bg.jpg" target="_blank"> Gnomz007 </a></div>
<p>Seguimos con las operaciones sobre árboles <acronym title="Document Object Model." lang="en">DOM</acronym>. ¿Sabrías cómo eliminar nodos de un árbol? ¿No? Vamos a descubrirlo.</p>
<p><span class="destacado_inline"><strong>Eliminar un elemento hijo de otro elemento</strong>.</span></p>
<p>Para eliminar un nodo, hay que recurrir al nodo padre de dicho nodo. En el nodo padre se invoca el método removeChild(), al que se le pasa la instancia de la clase Element con el nodo a eliminar (no el nombre de la etiqueta, sino la instancia), lo cual implica que primero hay que buscar el nodo a eliminar, y después eliminarlo. Veamos un ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 38.45em;">
<div class="texto_izquierda">
<pre>NodeList listaNodos3=documento.getElementsByTagName("DIRECCION_ENTREGA");
</pre>
<pre>for (int i=0;i&lt;&lt;code&gt;listaNodos3.getLength();i++){         
</pre>
<pre>     Element elemento=(Element) &lt;code&gt;listaNodos3.item(i);
</pre>
<pre>     Element padre = (Element)&lt;code&gt;elemento.getParentNode();
</pre>
<pre>     padre.removeChild(elemento); 
</pre>
<pre>}
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior se eliminan todas las etiquetas, estén donde estén, que se llamen "DIRECCION_ENTREGA". Para ello ha sido necesario buscar todos los elementos cuya etiqueta sea esa (como se explicó en ejemplos anteriores), recorrer los resultados obtenidos de la búsqueda, obtener el nodo padre del hijo a través del método getParentNode(), para así poder eliminar el nodo correspondiente con el método removeChild().</p>
<p>No es obligatorio obviamente invocar al método getParentNode() si el nodo padre es conocido. Por ejemplo, si el nodo es un hijo del elemento o etiqueta raíz, hubiera bastado con poner lo siguiente:</p>
<div class="codigo elemento_centrado" style="width: 28em;">
<div class="texto_izquierda">
<pre>documento.getDocumentElement().removeChild(elemento);
</pre>
</div>
</div>
<p> </p>
<p><span class="destacado_inline"><strong>Cambiar el contenido de un elemento cuando solo es texto</strong>.</span></p>
<p>Los métodos getTextContent() y <code>setTextContent()</code>, aplicados a un elemento, permiten respectivamente acceder al texto contenido dentro de un elemento o etiqueta o modificar dicho contenido. Tienes que tener cuidado, porque utilizar setTextContent() significa eliminar cualquier hijo (sub-elemento por ejemplo) que previamente tuviera la etiqueta. Ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 54.4em;">
<div class="texto_izquierda">
<pre>Element nuevo=documento.createElement(DIRECCION_RECOGIDA").setTextContent("C/Del Medio S/N");
</pre>
<pre>System.out.println(nuevo.getTextContent());
</pre>
</div>
</div></div></div>
</div>
<div class="SeleccionmultiplefpdIdevice" id="id96">
<div class="iDevice emphasis_autoevaluacionfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_autoevaluacionfpd.gif">
<span class="iDeviceTitle"><strong>Autoevaluación</strong></span>
<div class="iDevice_inner">
<div class="question">
<div id="taquestion96_55" class="block" style="display:block;position:relative"><p><strong>De los siguientes tipos de nodos, marca aquellos en los que no se pueda ejecutar dos veces el método appendChild():</strong></p></div><div style="display: table; overflow: auto; width:100%;"><div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op96_550" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans96_550">
<div id="taans96_58" class="block" style="display:block;position:relative"><p>Document.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op96_550_1" style="display:none;">
<strong>Correcto</strong></div><div id="op96_550_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op96_551" value="False">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans96_551">
<div id="taans96_151" class="block" style="display:block;position:relative"><p>Element.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op96_551_1" style="display:none;">
<strong>Correcto</strong></div><div id="op96_551_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op96_552" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans96_552">
<div id="taans96_153" class="block" style="display:block;position:relative"><p>Text.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op96_552_1" style="display:none;">
<strong>Correcto</strong></div><div id="op96_552_0" style="display:none;">
Incorrecto</div></div>
</div>
<div style="display: table-row; clear: both;">
<div style="float: left; display: table-cell; margin-left: 0.2em;">
<input type="checkbox" id="op96_553" value="True">
</div>
<div style="float: left; display: table-cell; margin-left: 0.5em; width: 93%;">
<div id="ans96_553">
<div id="taans96_155" class="block" style="display:block;position:relative"><p>Attr.</p></div></div></div>
</div>
<div style="display: table-row; clear: both;"><div style="float: left; display: table-cell; margin-left: 2em;">
<div id="op96_553_1" style="display:none;">
<strong>Correcto</strong></div><div id="op96_553_0" style="display:none;">
Incorrecto</div></div>
</div>
</div><input type="button" name="submitSelect" value="Mostrar retroalimentación" onclick="showFeedback(4,&#39;96_55&#39;)"> <br>
<div id="f96_55" style="display:none"><div id="tafeedback96_55" class="feedback" style="display:block;position:relative"><p>Solo tiene sentido insertar nodos en los nodos tipo Element y <code>Document</code>, pero en los documentos<acronym title="eXtended Markup Language." lang="en"> XML</acronym> solo puede haber una etiqueta raíz, es decir, solo puede haber un nodo hijo tipo Element dentro de un Document, ¿recuerdas? Si intentas añadir otro nodo raíz dentro de un documento obtendrás una incómoda excepción.</p></div></div><noscript><br /><div class="feedback">
<p><strong>Solution: </strong></p><ol>
<li><em>Correcto</em></li><li><em>Incorrecto</em></li><li><em>Correcto</em></li><li><em>Correcto</em></li></ol><p><strong>Retroalimentación: </strong></p>
<p>Solo tiene sentido insertar nodos en los nodos tipo Element</code> y <code>Document</code>, pero en los documentos<acronym title="eXtended Markup Language." lang="en"> XML</acronym> solo puede haber una etiqueta raíz, es decir, solo puede haber un nodo hijo tipo Element</code> dentro de un Document</code>, ¿recuerdas? Si intentas añadir otro nodo raíz dentro de un documento obtendrás una incómoda excepción.</p></div></noscript></div>
</div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
8.3.3.- Manipulación de documentos XML (IV). Manejar atributos de un elemento.</h1></div>
<div class="CasopracticofpdIdevice" id="id93">
<div class="iDevice emphasis_casopracticofpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_casopracticofpd.gif">
<span class="iDeviceTitle"><strong>Caso práctico</strong></span>
<div class="iDevice_inner">
<div id="ta93_66" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><a title="Ampliar imagen para " trozo="" de="" código="" la="" solución="" final="" ana"."="" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R059_01_codigo.png"><img alt="Impresión de pantalla de un trozo de código de la solución final de Ana." class="imagen_ampliable" src="./PROG_T8_files/PROG09_CONT_R059_01_codigo_miniatura.png" title="Trozo de código de la solución final de Ana."></a></div>
</div>
<p>El documento <acronym title="eXtended Markup Language." lang="en">XML</acronym> que tiene que generar<strong> Ana</strong> tiene que seguir un formato específico, para que la otra aplicación sea capaz de entenderlo. Esto significa que los nombres de las etiquetas tienen que ser unos concretos para cada dato del pedido. Ésta ha sido quizás la parte que más complicada, ver cómo encajar cada dato del mapa con su correspondiente etiqueta en <acronym title="eXtended Markup Language." lang="en">XML</acronym>, pero ha conseguido resolverlo de forma elegante. De hecho, ya ha terminado su trabajo, ¿quieres ver el resultado?</p>
<div class="enlace_centrado"><a class="paquete" title="Descargar código fuente para procesar archivo de pedido ya finalizado. [zip - 0.01 MB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_CONT_R060_ProcesarArchivoPedido_Final.zip">Procesar archivo de pedido completo.</a> <span class="tamano"> (0.01 MB) </span></div></div></div>
</div>
</div>
<div class="FreeTextfpdIdevice" id="id94">
<div class="iDevice emphasis0">
<div id="ta94_73" class="block" style="display:block;position:relative"><p><img alt="Imagen que muestra un cubo de rubik." class="elemento_centrado" src="./PROG_T8_files/PROG09_CONT_R061_rubik.png" style="width: 160px; height: 168px;" title="¡¡ Ya hemos terminado nuestro cubo de rubik !!" height="168" width="160"></p>
<div class="elemento_centrado credenciales"><a class="cc-by-sa" title="CC by-sa" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es" target="_blank"><span class="transparente">CC by-sa</span></a> <a title="Booyabazooka" href="https://commons.wikimedia.org/wiki/File:Rubik%27s_cube.svg" target="_blank"> Booyabazooka </a></div>
<p>Y ya solo queda una cosa: descubrir cómo manejar los atributos en un árbol <acronym title="Document Object Model." lang="en">DOM</acronym>.</p>
<p><span class="destacado_inline"><strong>Atributos de un elemento</strong>.</span></p>
<p>Por último, lo más fácil. Cualquier elemento puede contener uno o varios atributos. Acceder a ellos es sencillísimo, solo necesitamos tres métodos:</p>
<ul class="lista_verificacion">
<li>setAttribute() para establecer o crear el valor de un atributo.</li>
<li>getAttribute() para obtener el valor de un atributo.</li>
<li>removeAttribute() para eliminar el valor de un atributo.</li>
</ul>
<p>Veamos un ejemplo:</p>
<div class="codigo elemento_centrado" style="width: 43.95em;">
<div class="texto_izquierda">
<pre>documento.getDocumentElement().setAttribute("urgente","no");
</pre>
<pre>System.out.println(documento.getDocumentElement().getAttribute("urgente"));
</pre>
</div>
</div>
<p> </p>
<p>En el ejemplo anterior se añade el atributo "urgente" al elemento raíz del documento con el valor "no", después se consulta para ver su valor. Obviamente se puede realizar en cualquier otro elemento que no sea el raíz. Para eliminar el atributo es tan sencillo como lo siguiente:</p>
<div class="codigo elemento_centrado" style="width: 34.6em;">
<div class="texto_izquierda">
<pre>documento.getDocumentElement().removeAttribute("urgente");
</pre>
</div>
</div></div></div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div><div id="outer">
<div id="main">
<div id="nodeDecoration">
<h1 id="nodeTitle">
Anexo I.- Ejemplo de manipulación de archivos XML.</h1></div>
<div class="DebesconocerfpdIdevice" id="id126">
<div class="iDevice emphasis_debesconocerfpd">
<img alt="" class="iDevice_icon" src="./PROG_T8_files/icon_debesconocerfpd.gif">
<span class="iDeviceTitle"><strong>Debes conocer</strong></span>
<div class="iDevice_inner">
<div id="ta126_44" class="block" style="display:block;position:relative"><div class="elemento_derecha">
<div class="elemento_centrado"><img src="./PROG_T8_files/PROG09_CONT_R62_ModeloParaAplicarEntuSolucion.jpg" alt="Mano que sujeta un molde de galletas sobre la masa, en la que hay otro molde con otra forma diferente. " title="Modelo para usar en tu tarea." width="250"></div>
<div class="elemento_centrado credenciales"><a class="cc0" title="Dominio público" href="http://creativecommons.org/publicdomain/zero/1.0/deed.es" target="_blank"><span class="transparente">Dominio público</span></a> <a title="Efraimstochter" href="http://pixabay.com/es/ni%C3%B1o-los-ni%C3%B1os-cocci%C3%B3n-221046/" target="_blank">Efraimstochter</a></div>
</div>
<p>En este Anexo te presentamos un ejemplo de aplicación en la que se realizan operaciones de manipulación de archivos <acronym title="eXtended Markup Language." lang="en">XML</acronym>. Los datos de la aplicación se encuentran en memoria almacenados en un ArrayList y la idea es almacenarlos en un <strong>archivo <acronym title="eXtended Markup Language." lang="en">XML</acronym></strong> usado como <strong>copia de seguridad</strong>. Obviamente, también existe una opción para restaurar la copia de seguridad de forma que se pueda leer el archivo <acronym title="eXtended Markup Language." lang="en">XML</acronym> generado anteriormente y restaurar en memoria la información relativa al ArrayList.</p>
<p>La aplicación te puede <strong>servir de modelo</strong> para repasar el contenido de varias unidades, así como de ejemplo para la estructura de tus tareas:</p>
<ol>
<li>Ver cómo funciona el <strong>almacenamiento en archivos</strong>, que es algo que se pedía en la tarea de una unidad anterior.</li>
<li>Ver cómo se <strong>almacenan los datos en una estructura dinámica como </strong>ArrayList y cómo se <strong>guarda y recupera la información usando archivos <acronym title="eXtended Markup Language." lang="en">XML</acronym></strong> como forma versátil de compartir información con otras aplicaciones, que es algo que se pide  en la tarea de esta unidad.</li>
<li>Ver cómo se dota a la aplicación de una <strong>interfaz gráfica de usuario</strong> (o <acronym title="Graphical User Interaface." lang="en">GUI)</acronym> (ventanas, botones, listas de verificación, menús, ...), que es algo que se pide en tareas de una unidades futuras.</li>
</ol>
<p>En lo que atañe a esta unidad, te interesa centrarte en la parte de importación / exportación usando <acronym title="eXtended Markup Language." lang="en">XML</acronym>,  que se encuentra en la clase principal: GClubSociosUI. De momento, puedes ignorar todo lo relativo a interfaz gráfica de usuario, que es algo que no se verá hasta la unidad próxima, y que se deja aquí sólo para permitirte ejecutar la aplicación de forma cómoda, mediante sus ventanas, cuadros de diálogo, menús, <abbr title="etcétera.">etc.</abbr></p>
<ul class="lista_verificacion">
<li>La exportación se encuentra en las líneas 293 a 466.</li>
<li>La importación se encuentra en las líneas 468 a 753.</li>
</ul>
<p>Verás que aunque parece muy extensa, consiste básicamente en repetir el mismo grupo de sentencias para cada atributo que se quiere exportar / importar, por lo que  visto un caso, vistos todos. Sólo hay que tener en cuenta algunas cosas que aparecen comentadas, como que los atributos de clase deben tratarse aparte de los atributos de instancia, que al importar hay que tratar por separado los atributos comunes de la superclase y los atributos específicos de la subclase, ... y poca cosa más.</p>
<p>¡Esperamos que te resulte muy útil!</p>
<p class="enlace_centrado"><a class="paquete" title="Descargar el Ejemplo resuelto para usar como modelo en la solución de la tarea. [.zip - 190 KB]" href="https://educacionadistancia.juntadeandalucia.es/cursos/pluginfile.php/100949/mod_scorm/content/0/PROG09_Anexo_Modelo_Solucion_Tarea.zip">Ejemplo de manipulación de archivos <acronym title="eXtensible Markup Language"><strong>XML</strong></acronym></a>  <span class="tamano">(190 KB)</span></p></div></div>
</div>
</div>
</div>
</div>
<div style="page-break-before: always;"></div>

</body></html>